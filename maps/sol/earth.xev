<?xml version="1.0"?>

<event-list version='649'>

 <category name='bungee'>

  <section name='form'>

   <event num='1'>
    <comment>Read form (in loc 528)</comment>
    <message type='single' where='com' who='individual' lo='bungee.form.1'/>
   </event>

   <event num='2'>
    <comment>Sign form - check if player can afford the jump</comment>
    <checkstat who='individual' money='100' higher='bungee.jump.1' equals='bungee.jump.1' lower='bungee.form.3'/>
   </event>

   <event num='3'>
    <comment>Player hasn&apos;t got the cash</comment>
    <message type='single' where='com' who='individual' lo='bungee.form.2'/>
    <move what='player' who='individual' loc='527'/>
   </event>

  </section>

  <section name='insure'>

   <event num='1'>
    <comment>Enter event on 528 - Platform - Turn back uninsured players</comment>
    <checkflag who='individual' flag ='insured'  set='stop'/>
    <message type='single' where='com' who='individual' lo='bungee.insure.1'/>
    <move what='player' who='individual' loc='527'/>
   </event>

  </section>

  <section name='jump'>

   <event num='1'>
    <comment>Player takes a bungee jump</comment>
    <move what='player' who='individual' loc='529'/>
    <changestat who='individual' money='-100' change='add' cur-max='current'/>
    <freeze />
    <message type='multi' where='com' who='individual' lo='bungee.jump.1' hi='bungee.jump.2'/>
    <announce type='single' loc='528' lo='bungee.jump.17'/>
    <delayevent delay='15' event='bungee.jump.2'/>
   </event>

   <event num='2'>
    <comment>2nd chunk</comment>
    <message type='single' where='com' who='individual' lo='bungee.jump.3'/>
    <delayevent delay='6' event='bungee.jump.3'/>
   </event>

   <event num='3'>
    <comment>3rd chunk</comment>
    <message type='single' where='com' who='individual' lo='bungee.jump.4'/>
    <delayevent delay='6' event='bungee.jump.4'/>
   </event>

   <event num='4'>
    <comment>4th chunk</comment>
    <message type='single' where='com' who='individual' lo='bungee.jump.5'/>
    <delayevent delay='15' event='bungee.jump.5'/>
   </event>

   <event num='5'>
    <comment>5th chunk</comment>
    <message type='single' where='com' who='individual' lo='bungee.jump.6'/>
    <delayevent delay='6' event='bungee.jump.6'/>
   </event>

   <event num='6'>
    <comment>6th chunk</comment>
    <message type='single' where='com' who='individual' lo='bungee.jump.7'/>
    <delayevent delay='6' event='bungee.jump.7'/>
   </event>

   <event num='7'>
    <comment>Decide if player lives or dies</comment>
    <percent value='10' higher='bungee.jump.8' equals='bungee.jump.10' lower='bungee.jump.10'/>
   </event>

   <event num='8'>
    <comment>Successful end to bungee jump</comment>
    <message type='single' where='com' who='individual' lo='bungee.jump.8'/>
    <delayevent delay='6' event='bungee.jump.9'/>
   </event>

   <event num='9'>
    <comment>Continue the successful end</comment>
    <message type='single' where='com' who='individual' lo='bungee.jump.9'/>
    <announce type='single' loc='781' lo='bungee.jump.10'/>
    <announce type='single' loc='528' lo='bungee.jump.18'/>
    <move what='player' who='individual' loc='527'/>
    <release />
   </event>

   <event num='10'>
    <comment>Player dies - pick which death</comment>
    <call event='bungee.jump.random[11-12]'/>
   </event>

   <event num='11'>
    <comment>Death 1</comment>
    <message type='single' where='com' who='individual' lo='bungee.jump.11'/>
    <announce type='multi' loc='781' lo='bungee.jump.12' hi='bungee.jump.14'/>
    <announce type='single' loc='528' lo='bungee.jump.19'/>
    <changestat who='individual' stamina='0' change='set' cur-max='current'/>
    <release />
   </event>

   <event num='12'>
    <comment>Death 2</comment>
    <message type='single' where='com' who='individual' lo='bungee.jump.15'/>
    <delayevent delay='8' event='bungee.jump.13'/>
   </event>

   <event num='13'>
    <comment>Continuing death 2</comment>
    <message type='single' where='com' who='individual' lo='bungee.jump.16'/>
    <announce type='single' loc='781' lo='bungee.jump.10'/>
    <announce type='single' loc='528' lo='bungee.jump.20'/>
    <changestat who='individual' stamina='0' change='set' cur-max='current'/>
    <release />
   </event>

  </section>

 </category>

 <category name='check'>

  <section name='insure'>

   <event num='1'>
    <comment>In hospital corridor (loc 1434, check if they&apos;ve come from ward</comment>
    <checklastloc loc='1433' pass='check.insure.2'/>
   </event>

   <event num='2'>
    <comment>If they&apos;ve come from ward, check insurance</comment>
    <checkflag who='individual' flag ='insured'  unset='check.insure.3'/>
   </event>

   <event num='3'>
    <comment>If no insurance, remind them</comment>
    <message type='single' where='loc' who='individual' lo='check.insure.1'/>
   </event>

  </section>

 </category>

 <category name='extras'>

  <section name='cantina'>

   <event num='1'>
    <comment>Extra text when player walks into Cantina - loc 454</comment>
    <message type='single' where='com' who='individual' lo='extras.cantina.1'/>
   </event>

  </section>

  <section name='gall'>

   <event num='1'>
    <comment>Enter event on Gallagher&apos;s - check rank</comment>
    <checkstat who='individual' rank='0' higher='extras.gall.2' equals='extras.gall.3'/>
   </event>

   <event num='2'>
    <comment>Player is not a groundhog</comment>
    <message type='single' where='com' who='individual' lo='extras.gall.1'/>
   </event>

   <event num='3'>
    <comment>Player is a groundhog</comment>
    <message type='single' where='com' who='individual' lo='extras.gall.2'/>
    <move what='player' who='individual' loc='651'/>
   </event>

  </section>

  <section name='loo'>

   <event num='1'>
    <comment>Ladies loo - loc 1048</comment>
    <checkgender male='extras.loo.2' neuter='extras.loo.3'/>
   </event>

   <event num='2'>
    <comment>A man walks into the ladies loo</comment>
    <message type='single' where='loc' who='individual' lo='extras.loo.1'/>
    <move what='player' who='individual' loc='1049'/>
   </event>

   <event num='3'>
    <comment>A neuter walks into the ladies loo</comment>
    <message type='single' where='loc' who='individual' lo='extras.loo.2'/>
    <move what='player' who='individual' loc='1049'/>
   </event>

   <event num='4'>
    <comment>Gents loo - loc 1050</comment>
    <checkgender />
   </event>

   <event num='5'>
    <comment>Woman walks into gents toilet</comment>
    <message type='single' where='loc' who='individual' lo='extras.loo.3'/>
    <move what='player' who='individual' loc='1049'/>
   </event>

   <event num='6'>
    <comment>Neuter walks into gents toilet</comment>
    <message type='single' where='loc' who='individual' lo='extras.loo.4'/>
    <move what='player' who='individual' loc='1049'/>
   </event>

   <event num='7'>
    <comment>Unisex toilet - loc 985</comment>
    <checkgender male='extras.loo.8' female='extras.loo.9'/>
   </event>

   <event num='8'>
    <comment>Man walks into unisex toilet</comment>
    <message type='single' where='loc' who='individual' lo='extras.loo.5'/>
    <move what='player' who='individual' loc='1049'/>
   </event>

   <event num='9'>
    <comment>Woman walks into unisex toilet</comment>
    <message type='single' where='loc' who='individual' lo='extras.loo.6'/>
    <move what='player' who='individual' loc='1049'/>
   </event>

  </section>

  <section name='lucky7'>

   <event num='1'>
    <comment>Random fight in Lucky 7 - loc 1479</comment>
    <percent value='1' higher='stop' equals='stop'/>
    <message type='multi' where='com' who='individual' lo='extras.lucky7.1' hi='extras.lucky7.2'/>
    <message type='single' where='com' who='room_ex' lo='extras.lucky7.3'/>
    <freeze />
    <delayevent delay='10' event='extras.lucky7.2'/>
   </event>

   <event num='2'>
    <comment>Random fight in Lucky 7 - release player</comment>
    <message type='single' where='com' who='individual' lo='extras.lucky7.4'/>
    <release />
   </event>

  </section>

  <section name='public'>

   <event num='1'>
    <comment>Public counter - 979 - call random event to add extra text</comment>
    <call event='extras.public.random[2-6]'/>
   </event>

   <event num='2'>
    <comment>1st message</comment>
    <message type='single' where='loc' who='individual' lo='extras.public.2'/>
   </event>

   <event num='3'>
    <comment>2nd message</comment>
    <message type='single' where='loc' who='individual' lo='extras.public.3'/>
   </event>

   <event num='4'>
    <comment>3rd message</comment>
    <message type='single' where='loc' who='individual' lo='extras.public.4'/>
   </event>

   <event num='5'>
    <comment>4th message</comment>
    <message type='single' where='loc' who='individual' lo='extras.public.5'/>
   </event>

   <event num='6'>
    <comment>5th message</comment>
    <message type='single' where='loc' who='individual' lo='extras.public.6'/>
   </event>

  </section>

 </category>

 <category name='food'>

  <section name='cantina'>

   <event num='1'>
    <comment>Buy food - Starship Cantina - 454</comment>
    <checkstat who='individual' money='10' higher='food.cantina.2' equals='food.cantina.2' lower='food.cantina.3'/>
   </event>

   <event num='2'>
    <comment>Feed the hungry</comment>
    <changestat who='individual' money='-10' change='add' cur-max='current'/>
    <changestat who='individual' stamina='5' change='add' cur-max='current'/>
    <message type='single' where='com' who='individual' lo='food.cantina.1'/>
   </event>

   <event num='3'>
    <comment>Not enough groats</comment>
    <message type='single' where='com' who='individual' lo='food.cantina.2'/>
   </event>

  </section>

  <section name='godot'>

   <event num='1'>
    <comment>Buy food - Godot&apos;s Snacks - 1105</comment>
    <checkstat who='individual' money='10' higher='food.godot.2' equals='food.godot.2' lower='food.godot.3'/>
   </event>

   <event num='2'>
    <comment>Feed the hungry</comment>
    <changestat who='individual' money='-10' change='add' cur-max='current'/>
    <changestat who='individual' stamina='5' change='add' cur-max='current'/>
    <message type='single' where='com' who='individual' lo='food.godot.1'/>
   </event>

   <event num='3'>
    <comment>Not enough groats</comment>
    <message type='single' where='com' who='individual' lo='food.godot.2'/>
   </event>

  </section>

  <section name='lodge'>

   <event num='1'>
    <comment>Get/eat food</comment>
    <message type='single' where='com' who='individual' lo='food.lodge.1'/>
    <changestat who='individual' stamina='10' change='add' cur-max='current'/>
   </event>

   <event num='2'>
    <comment>Get/drink drink</comment>
    <message type='single' where='com' who='individual' lo='food.lodge.2'/>
    <changestat who='individual' stamina='5' change='add' cur-max='current'/>
   </event>

  </section>

  <section name='lucky7'>

   <event num='1'>
    <comment>Buy food - Lucky 7 - 1479</comment>
    <checkstat who='individual' money='10' higher='food.lucky7.2' equals='food.lucky7.2' lower='food.lucky7.3'/>
   </event>

   <event num='2'>
    <comment>Feed the hungry</comment>
    <changestat who='individual' money='-10' change='add' cur-max='current'/>
    <changestat who='individual' stamina='5' change='add' cur-max='current'/>
    <message type='single' where='com' who='individual' lo='food.lucky7.1'/>
   </event>

   <event num='3'>
    <comment>Not enough groats</comment>
    <message type='single' where='com' who='individual' lo='food.lucky7.2'/>
   </event>

  </section>

  <section name='member'>

   <event num='1'>
    <comment>Buy food - Members Lounge- 1037</comment>
    <checkstat who='individual' money='10' higher='food.member.2' equals='food.member.2' lower='food.member.3'/>
   </event>

   <event num='2'>
    <comment>Feed the hungry</comment>
    <changestat who='individual' money='-10' change='add' cur-max='current'/>
    <changestat who='individual' stamina='5' change='add' cur-max='current'/>
    <message type='single' where='com' who='individual' lo='food.member.1'/>
   </event>

   <event num='3'>
    <comment>Not enough groats</comment>
    <message type='single' where='com' who='individual' lo='food.member.2'/>
   </event>

  </section>

  <section name='orran'>

   <event num='1'>
    <comment>Buy food - Orran&apos;s Ox Roast - 1602</comment>
    <checkstat who='individual' money='10' higher='food.orran.2' equals='food.orran.2' lower='food.orran.3'/>
   </event>

   <event num='2'>
    <comment>Feed the hungry</comment>
    <changestat who='individual' money='-10' change='add' cur-max='current'/>
    <changestat who='individual' stamina='5' change='add' cur-max='current'/>
    <message type='single' where='com' who='individual' lo='food.orran.1'/>
   </event>

   <event num='3'>
    <comment>Not enough groats</comment>
    <message type='single' where='com' who='individual' lo='food.orran.2'/>
   </event>

  </section>

  <section name='washroom'>

   <event num='1'>
    <comment>Buy food - Executive Washroom - 727</comment>
    <checkstat who='individual' money='10' higher='food.washroom.2' equals='food.washroom.2' lower='food.washroom.3'/>
   </event>

   <event num='2'>
    <comment>Feed the hungry</comment>
    <changestat who='individual' money='-10' change='add' cur-max='current'/>
    <changestat who='individual' stamina='5' change='add' cur-max='current'/>
    <message type='single' where='com' who='individual' lo='food.washroom.1'/>
   </event>

   <event num='3'>
    <comment>Not enough groats</comment>
    <message type='single' where='com' who='individual' lo='food.washroom.2'/>
   </event>

  </section>

 </category>

 <category name='free'>

  <section name='drink'>

   <event num='1'>
    <comment>Cantina - buy round</comment>
    <message type='single' where='com' who='individual' lo='free.drink.1'/>
    <message type='single' where='com' who='room_ex' lo='free.drink.2'/>
    <changestat who='room' stamina='2' change='add' cur-max='current'/>
   </event>

  </section>

 </category>

 <category name='keyring'>

  <section name='acorn'>

   <event num='1'>
    <comment>Examine acorn charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.acorn.1'/>
   </event>

   <event num='2'>
    <comment>Squeeze acorn charm</comment>
    <message type='multi' where='com' who='individual' lo='keyring.acorn.2' hi='keyring.acorn.4'/>
    <message type='multi' where='com' who='room_ex' lo='keyring.acorn.5' hi='keyring.acorn.7'/>
   </event>

   <event num='3'>
    <comment>Drop acorn charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.acorn.8'/>
   </event>

   <event num='4'>
    <comment>Break acorn charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.acorn.9'/>
    <destroyobject where='inventory' map='home' id-name='acorn charm'/>
   </event>

  </section>

  <section name='assistant'>

   <event num='1'>
    <comment>talk to galaghers shop assistant</comment>
    <match phrase='hello' id-name='obj_assistant' lo='keyring.assistant.1'/>
    <match phrase='bye' id-name='obj_assistant' lo='keyring.assistant.2'/>
    <match phrase='job' id-name='obj_assistant' lo='keyring.assistant.3'/>
    <match phrase='work' id-name='obj_assistant' lo='keyring.assistant.3'/>
    <match phrase='profession' id-name='obj_assistant' lo='keyring.assistant.3'/>
    <match phrase='earth' id-name='obj_assistant' lo='keyring.assistant.4'/>
    <match phrase='gallagher' id-name='obj_assistant' event='keyring.assistant.2'/>
    <match phrase='shop' id-name='obj_assistant' event='keyring.assistant.2'/>
    <match phrase='merchand' id-name='obj_assistant' event='keyring.assistant.2'/>
    <match phrase='galactic admin' id-name='obj_assistant' lo='keyring.assistant.8'/>
    <match phrase='firework' id-name='obj_assistant' lo='keyring.assistant.18'/>
    <match phrase='cracker' id-name='obj_assistant' lo='keyring.assistant.20'/>
    <match phrase='camera' id-name='obj_assistant' lo='keyring.assistant.21'/>
    <match phrase='rose' id-name='obj_assistant' lo='keyring.assistant.22'/>
    <match phrase='prism' id-name='obj_assistant' lo='keyring.assistant.23'/>
    <match phrase='emerald' id-name='obj_assistant' lo='keyring.assistant.24'/>
    <match phrase='apple' id-name='obj_assistant' lo='keyring.assistant.25'/>
    <match phrase='blossom' id-name='obj_assistant' lo='keyring.assistant.25'/>
    <match phrase='hat' id-name='obj_assistant' lo='keyring.assistant.26'/>
    <match phrase='bbq' id-name='obj_assistant' lo='keyring.assistant.27'/>
    <match phrase='amber' id-name='obj_assistant' lo='keyring.assistant.28'/>
    <match phrase='feather' id-name='obj_assistant' lo='keyring.assistant.29'/>
    <match phrase='collider' id-name='obj_assistant' lo='keyring.assistant.30'/>
    <match phrase='snowflake' id-name='obj_assistant' lo='keyring.assistant.31'/>
    <match phrase='moon' id-name='obj_assistant' lo='keyring.assistant.32'/>
    <match phrase='ribbon' id-name='obj_assistant' lo='keyring.assistant.33'/>
    <match phrase='songbird' id-name='obj_assistant' lo='keyring.assistant.34'/>
    <match phrase='clown' id-name='obj_assistant' lo='keyring.assistant.35'/>
    <match phrase='laser' id-name='obj_assistant' lo='keyring.assistant.36'/>
    <match phrase='sunflower' id-name='obj_assistant' lo='keyring.assistant.37'/>
    <match phrase='scroll' id-name='obj_assistant' lo='keyring.assistant.38'/>
    <match phrase='cat' id-name='obj_assistant' lo='keyring.assistant.39'/>
    <match phrase='schoolbell' id-name='obj_assistant' lo='keyring.assistant.40'/>
    <match phrase='football' id-name='obj_assistant' lo='keyring.assistant.41'/>
    <match phrase='sparkler' id-name='obj_assistant' lo='keyring.assistant.42'/>
    <match phrase='scrooge' id-name='obj_assistant' lo='keyring.assistant.43'/>
    <match phrase='coin' id-name='obj_assistant' lo='keyring.assistant.44'/>
    <match phrase='acorn' id-name='obj_assistant' lo='keyring.assistant.45'/>
    <match phrase='egg' id-name='obj_assistant' lo='keyring.assistant.46'/>
    <match phrase='black hole' id-name='obj_assistant' lo='keyring.assistant.47'/>
    <match phrase='streamer' id-name='obj_assistant' lo='keyring.assistant.48'/>
    <match phrase='beer stein' id-name='obj_assistant' lo='keyring.assistant.49'/>
    <match phrase='pumpkin' id-name='obj_assistant' lo='keyring.assistant.50'/>
    <match phrase='furball' id-name='obj_assistant' lo='keyring.assistant.51'/>
    <match phrase='cocoa bean' id-name='obj_assistant' lo='keyring.assistant.52'/>
    <match phrase='cloud' id-name='obj_assistant' lo='keyring.assistant.53'/>
    <match phrase='sunbeam' id-name='obj_assistant' lo='keyring.assistant.54'/>
    <match phrase='snake' id-name='obj_assistant' lo='keyring.assistant.55'/>
    <match phrase='skeleton' id-name='obj_assistant' lo='keyring.assistant.56'/>
    <match phrase='dragon' id-name='obj_assistant' lo='keyring.assistant.57'/>
    <match phrase='keyrin' id-name='obj_assistant' lo='keyring.assistant.12'/>
    <match phrase='tenbrane' id-name='obj_assistant' lo='keyring.assistant.13'/>
    <match phrase='buy' id-name='obj_assistant' lo='keyring.assistant.14' hi='keyring.assistant.16'/>
    <match phrase='key' id-name='obj_assistant' lo='keyring.assistant.17'/>
    <match phrase='slithy' id-name='obj_assistant' lo='keyring.assistant.19'/>
    <match phrase='slithies' id-name='obj_assistant' lo='keyring.assistant.19'/>
    <match phrase='tove' id-name='obj_assistant' lo='keyring.assistant.19'/>
    <nomatch id-name='obj_assistant' lo='keyring.assistant.9'/>
   </event>

   <event num='2'>
    <comment>see what merchadise the assistant will tell you about</comment>
    <checkslithy value='1' pass='keyring.assistant.4' fail='keyring.assistant.3'/>
   </event>

   <event num='3'>
    <comment>no slithies</comment>
    <message type='single' where='com' who='individual' lo='keyring.assistant.5'/>
   </event>

   <event num='4'>
    <comment>check for keyring</comment>
    <checkflag who='individual' flag ='keyring'  set='keyring.assistant.6' unset='keyring.assistant.5'/>
   </event>

   <event num='5'>
    <comment>no key ring</comment>
    <message type='single' where='com' who='individual' lo='keyring.assistant.6'/>
   </event>

   <event num='6'>
    <comment>Can buy this month&apos;s charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.assistant.7'/>
   </event>

  </section>

  <section name='blackhole'>

   <event num='1'>
    <comment>Examine black hole charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.blackhole.1'/>
   </event>

   <event num='2'>
    <comment>Shake black hole charm</comment>
    <message type='multi' where='com' who='individual' lo='keyring.blackhole.2' hi='keyring.blackhole.3'/>
    <message type='multi' where='com' who='room_ex' lo='keyring.blackhole.4' hi='keyring.blackhole.5'/>
   </event>

   <event num='3'>
    <comment>Drop black hole charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.blackhole.6'/>
   </event>

   <event num='4'>
    <comment>Break black hole charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.blackhole.7'/>
    <destroyobject where='inventory' map='home' id-name='black hole charm'/>
   </event>

  </section>

  <section name='cat'>

   <event num='1'>
    <comment>Examine cat charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.cat.1'/>
   </event>

   <event num='2'>
    <comment>stroke cat charm</comment>
    <message type='multi' where='com' who='individual' lo='keyring.cat.2' hi='keyring.cat.4'/>
    <message type='multi' where='com' who='room_ex' lo='keyring.cat.5' hi='keyring.cat.7'/>
    <changestat who='individual' stamina='999' change='add' cur-max='current'/>
    <changestat who='room' stamina='20' change='add' cur-max='current'/>
   </event>

   <event num='3'>
    <comment>shake cat charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.cat.8'/>
    <message type='multi' where='com' who='room_ex' lo='keyring.cat.9' hi='keyring.cat.10'/>
    <changestat who='individual' stamina='-5' change='add' cur-max='current'/>
   </event>

   <event num='4'>
    <comment>drop cat</comment>
    <message type='single' where='com' who='individual' lo='keyring.cat.11'/>
   </event>

   <event num='5'>
    <comment>break cat</comment>
    <message type='single' where='com' who='individual' lo='keyring.cat.12'/>
    <destroyobject where='inventory' map='home' id-name='cat charm'/>
   </event>

  </section>

  <section name='charm'>

   <event num='1'>
    <comment>Player wants to buy current charm - check for keyring</comment>
    <checkflag who='individual' flag ='keyring'  set='keyring.charm.3' unset='keyring.charm.2'/>
   </event>

   <event num='2'>
    <comment>Player has no keyring</comment>
    <message type='single' where='com' who='individual' lo='keyring.charm.3'/>
   </event>

   <event num='3'>
    <comment>Check for slithy</comment>
    <checkslithy value='1' pass='keyring.charm.4' fail='keyring.charm.5'/>
   </event>

   <event num='4'>
    <comment>Buy the charm</comment>
    <changeslithy value='-1' change='add'/>
    <createobject where='inventory' home-map='home' id='charm_dragon11'/>
    <log>SLITHY: %s - dragon_charm</log>
    <message type='single' where='com' who='individual' lo='keyring.charm.1'/>
   </event>

   <event num='5'>
    <comment>No slithy</comment>
    <message type='single' where='com' who='individual' lo='keyring.charm.2'/>
   </event>

  </section>

  <section name='cloud'>

   <event num='1'>
    <comment>Examine cloud charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.cloud.1'/>
   </event>

   <event num='2'>
    <comment>Squeeze cloud charm - checkgender</comment>
    <checkgender male='keyring.cloud.3' female='keyring.cloud.4' neuter='keyring.cloud.5'/>
   </event>

   <event num='3'>
    <comment>Squeeze cloud charm - male</comment>
    <message type='multi' where='com' who='individual' lo='keyring.cloud.2' hi='keyring.cloud.4'/>
    <message type='multi' where='com' who='room_ex' lo='keyring.cloud.5' hi='keyring.cloud.7'/>
   </event>

   <event num='4'>
    <comment>Squeeze cloud charm - female</comment>
    <message type='multi' where='com' who='individual' lo='keyring.cloud.2' hi='keyring.cloud.4'/>
    <message type='multi' where='com' who='room_ex' lo='keyring.cloud.8' hi='keyring.cloud.10'/>
   </event>

   <event num='5'>
    <comment>Squeeze cloud charm - neuter</comment>
    <message type='multi' where='com' who='individual' lo='keyring.cloud.2' hi='keyring.cloud.4'/>
    <message type='multi' where='com' who='room_ex' lo='keyring.cloud.11' hi='keyring.cloud.13'/>
   </event>

   <event num='6'>
    <comment>Drop cloud charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.cloud.14'/>
   </event>

   <event num='7'>
    <comment>Eat cloud charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.cloud.15'/>
    <destroyobject where='inventory' map='home' id-name='cloud charm'/>
   </event>

  </section>

  <section name='clown'>

   <event num='1'>
    <comment>Examine clown charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.clown.1'/>
   </event>

   <event num='2'>
    <comment>Stroke clown charm</comment>
    <message type='multi' where='com' who='individual' lo='keyring.clown.2' hi='keyring.clown.3'/>
    <message type='multi' where='com' who='room_ex' lo='keyring.clown.4' hi='keyring.clown.5'/>
   </event>

   <event num='3'>
    <comment>Shake clown charm</comment>
    <message type='multi' where='com' who='individual' lo='keyring.clown.6' hi='keyring.clown.7'/>
    <message type='multi' where='com' who='room_ex' lo='keyring.clown.8' hi='keyring.clown.9'/>
   </event>

   <event num='4'>
    <comment>Drop clown charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.clown.10'/>
    <message type='single' where='com' who='room_ex' lo='keyring.clown.11'/>
   </event>

   <event num='5'>
    <comment>Break clown charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.clown.12'/>
    <destroyobject where='inventory' map='home' id-name='clown charm'/>
   </event>

  </section>

  <section name='cocoabean'>

   <event num='1'>
    <comment>Examine cocoa bean charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.cocoabean.1'/>
   </event>

   <event num='2'>
    <comment>Eat cocoa bean charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.cocoabean.2'/>
   </event>

   <event num='3'>
    <comment>Squeeze cocoa bean charm</comment>
    <message type='multi' where='com' who='individual' lo='keyring.cocoabean.3' hi='keyring.cocoabean.5'/>
    <message type='multi' where='com' who='room_ex' lo='keyring.cocoabean.6' hi='keyring.cocoabean.8'/>
   </event>

   <event num='4'>
    <comment>Drop cocoa bean charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.cocoabean.9'/>
   </event>

   <event num='5'>
    <comment>Break cocoa bean charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.cocoabean.10'/>
    <destroyobject where='inventory' map='home' id-name='cocoa bean charm'/>
   </event>

  </section>

  <section name='coin'>

   <event num='1'>
    <comment>Examine coin charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.coin.1'/>
   </event>

   <event num='2'>
    <comment>Toss/flip coin charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.coin.2'/>
    <message type='single' where='com' who='room_ex' lo='keyring.coin.3'/>
    <percent value='50' higher='keyring.coin.3' equals='keyring.coin.4' lower='keyring.coin.5'/>
   </event>

   <event num='3'>
    <comment>Percent higher than 50 - heads</comment>
    <message type='single' where='com' who='room' lo='keyring.coin.4'/>
    <message type='single' where='com' who='individual' lo='keyring.coin.7'/>
    <message type='single' where='com' who='room_ex' lo='keyring.coin.8'/>
   </event>

   <event num='4'>
    <comment>Percent equal to 50 - balance</comment>
    <message type='single' where='com' who='room' lo='keyring.coin.5'/>
    <message type='single' where='com' who='individual' lo='keyring.coin.7'/>
    <message type='single' where='com' who='room_ex' lo='keyring.coin.8'/>
   </event>

   <event num='5'>
    <comment>Percent lower than 50 - heads</comment>
    <message type='single' where='com' who='room' lo='keyring.coin.6'/>
    <message type='single' where='com' who='individual' lo='keyring.coin.7'/>
    <message type='single' where='com' who='room_ex' lo='keyring.coin.8'/>
   </event>

   <event num='6'>
    <comment>Shake coin charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.coin.9'/>
    <message type='single' where='com' who='room_ex' lo='keyring.coin.10'/>
   </event>

   <event num='7'>
    <comment>Drop coin charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.coin.11'/>
    <message type='single' where='com' who='room_ex' lo='keyring.coin.12'/>
   </event>

   <event num='8'>
    <comment>Break coin charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.coin.13'/>
    <destroyobject where='inventory' map='home' id-name='coin charm'/>
   </event>

  </section>

  <section name='collider'>

   <event num='1'>
    <comment>Examine tiny hadron collider charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.collider.1'/>
   </event>

   <event num='2'>
    <comment>Shake tiny hadron collider charm</comment>
    <message type='multi' where='com' who='individual' lo='keyring.collider.2' hi='keyring.collider.3'/>
    <message type='single' where='com' who='room_ex' lo='keyring.collider.4'/>
   </event>

   <event num='3'>
    <comment>Drop tiny hadron collider</comment>
    <message type='single' where='com' who='individual' lo='keyring.collider.5'/>
   </event>

   <event num='4'>
    <comment>Break tiny hadron collider</comment>
    <message type='single' where='com' who='individual' lo='keyring.collider.6'/>
    <destroyobject where='inventory' map='home' id-name='tiny hadron collider charm'/>
   </event>

  </section>

  <section name='dragon'>

   <event num='1'>
    <comment>Examine dragon charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.dragon.1'/>
   </event>

   <event num='2'>
    <comment>Stroke dragon charm</comment>
    <message type='multi' where='com' who='individual' lo='keyring.dragon.2' hi='keyring.dragon.5'/>
    <message type='multi' where='com' who='room_ex' lo='keyring.dragon.6' hi='keyring.dragon.9'/>
   </event>

   <event num='3'>
    <comment>Drop dragon charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.dragon.10'/>
   </event>

   <event num='4'>
    <comment>Break dragon charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.dragon.11'/>
    <destroyobject where='inventory' map='home' id-name='dragon charm'/>
   </event>

  </section>

  <section name='egg'>

   <event num='1'>
    <comment>Examine egg charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.egg.1'/>
   </event>

   <event num='2'>
    <comment>Open egg charm</comment>
    <message type='multi' where='com' who='individual' lo='keyring.egg.2' hi='keyring.egg.4'/>
    <message type='multi' where='com' who='room_ex' lo='keyring.egg.5' hi='keyring.egg.7'/>
    <changestat who='individual' stamina='100' change='add' cur-max='current'/>
   </event>

   <event num='3'>
    <comment>Drop egg charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.egg.8'/>
   </event>

   <event num='4'>
    <comment>Break egg charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.egg.9'/>
    <destroyobject where='inventory' map='home' id-name='egg charm'/>
   </event>

  </section>

  <section name='expired'>

   <event num='1'>
    <comment>If player tries to buy an obsolete item</comment>
    <message type='single' where='com' who='individual' lo='keyring.expired.1'/>
   </event>

  </section>

  <section name='football'>

   <event num='1'>
    <comment>Examine football charm</comment>
    <message type='multi' where='com' who='individual' lo='keyring.football.1' hi='keyring.football.2'/>
   </event>

   <event num='2'>
    <comment>Throw football charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.football.3'/>
   </event>

   <event num='3'>
    <comment>Kick football charm - basic message and pick random choice</comment>
    <message type='single' where='com' who='individual' lo='keyring.football.4'/>
    <message type='single' where='com' who='room_ex' lo='keyring.football.5'/>
    <call event='keyring.football.random[6-13]'/>
   </event>

   <event num='4'>
    <comment>Drop football</comment>
    <message type='single' where='com' who='individual' lo='keyring.football.29'/>
   </event>

   <event num='5'>
    <comment>Break football</comment>
    <message type='single' where='com' who='individual' lo='keyring.football.30'/>
    <destroyobject where='inventory' map='home' id-name='football charm'/>
   </event>

   <event num='6'>
    <comment>Kick football charm 1</comment>
    <message type='single' where='com' who='individual' lo='keyring.football.6'/>
    <message type='single' where='com' who='room_ex' lo='keyring.football.7'/>
   </event>

   <event num='7'>
    <comment>kick football charm 2</comment>
    <message type='single' where='com' who='individual' lo='keyring.football.8'/>
    <message type='single' where='com' who='room_ex' lo='keyring.football.9'/>
   </event>

   <event num='8'>
    <comment>kick football charm 3</comment>
    <message type='multi' where='com' who='individual' lo='keyring.football.10' hi='keyring.football.11'/>
    <message type='single' where='com' who='room_ex' lo='keyring.football.12'/>
   </event>

   <event num='9'>
    <comment>kick football charm 4</comment>
    <message type='single' where='com' who='individual' lo='keyring.football.13'/>
    <message type='single' where='com' who='room_ex' lo='keyring.football.14'/>
   </event>

   <event num='10'>
    <comment>kick football charm 5</comment>
    <message type='single' where='com' who='individual' lo='keyring.football.15'/>
    <message type='single' where='com' who='room_ex' lo='keyring.football.16'/>
   </event>

   <event num='11'>
    <comment>kick football charm 6</comment>
    <message type='single' where='com' who='individual' lo='keyring.football.17'/>
    <message type='single' where='com' who='room_ex' lo='keyring.football.18'/>
   </event>

   <event num='12'>
    <comment>kick football charm 7</comment>
    <message type='multi' where='com' who='individual' lo='keyring.football.19' hi='keyring.football.20'/>
    <message type='multi' where='com' who='room_ex' lo='keyring.football.21' hi='keyring.football.22'/>
   </event>

   <event num='13'>
    <comment>kick football charm 8</comment>
    <message type='multi' where='com' who='individual' lo='keyring.football.23' hi='keyring.football.25'/>
    <message type='multi' where='com' who='room_ex' lo='keyring.football.26' hi='keyring.football.28'/>
   </event>

  </section>

  <section name='furball'>

   <event num='1'>
    <comment>Examine furball charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.furball.1'/>
   </event>

   <event num='2'>
    <comment>Stroke furball charm</comment>
    <message type='multi' where='com' who='individual' lo='keyring.furball.2' hi='keyring.furball.4'/>
    <message type='multi' where='com' who='room_ex' lo='keyring.furball.5' hi='keyring.furball.7'/>
   </event>

   <event num='3'>
    <comment>Drop furball charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.furball.8'/>
   </event>

   <event num='4'>
    <comment>Break furball charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.furball.9'/>
    <destroyobject where='inventory' map='home' id-name='furball charm'/>
   </event>

  </section>

  <section name='keyring'>

   <event num='1'>
    <comment>player wants to buy a keyring - already has one?</comment>
    <checkflag who='individual' flag ='keyring'  set='keyring.keyring.5' unset='keyring.keyring.2'/>
   </event>

   <event num='2'>
    <comment>has a slithy to pay for it?</comment>
    <checkslithy value='1' pass='keyring.keyring.4' fail='keyring.keyring.3'/>
   </event>

   <event num='3'>
    <comment>no slithy = no keyring</comment>
    <message type='single' where='com' who='individual' lo='keyring.keyring.1'/>
   </event>

   <event num='4'>
    <comment>complete the transaction</comment>
    <changeslithy value='-1' change='add'/>
    <flipflag who='individual' flag ='keyring'/>
    <flipflag who='individual' flag ='exec-key'/>
    <message type='single' where='com' who='individual' lo='keyring.keyring.2'/>
    <log>SLITHY: %s - keyring.</log>
   </event>

   <event num='5'>
    <comment>Already has a keyring</comment>
    <message type='single' where='com' who='individual' lo='keyring.keyring.3'/>
   </event>

  </section>

  <section name='laser'>

   <event num='1'>
    <comment>Examine twin-laser charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.laser.1'/>
   </event>

   <event num='2'>
    <comment>Activate/use twin-laser charm</comment>
    <message type='multi' where='com' who='individual' lo='keyring.laser.2' hi='keyring.laser.3'/>
    <message type='multi' where='com' who='room_ex' lo='keyring.laser.4' hi='keyring.laser.5'/>
   </event>

   <event num='3'>
    <comment>Fire twin-laser charm</comment>
    <message type='multi' where='com' who='individual' lo='keyring.laser.6' hi='keyring.laser.7'/>
    <message type='multi' where='com' who='room_ex' lo='keyring.laser.8' hi='keyring.laser.9'/>
   </event>

   <event num='4'>
    <comment>Drop twin-laser charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.laser.10'/>
    <message type='single' where='com' who='room_ex' lo='keyring.laser.11'/>
   </event>

   <event num='5'>
    <comment>Break twin-laser charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.laser.12'/>
    <destroyobject where='inventory' map='home' id-name='twin-laser charm'/>
   </event>

  </section>

  <section name='moon'>

   <event num='1'>
    <comment>Examine moon charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.moon.1'/>
   </event>

   <event num='2'>
    <comment>Shake moon charm</comment>
    <message type='multi' where='com' who='individual' lo='keyring.moon.2' hi='keyring.moon.3'/>
    <message type='multi' where='com' who='room_ex' lo='keyring.moon.4' hi='keyring.moon.5'/>
   </event>

   <event num='3'>
    <comment>Drop moon charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.moon.6'/>
   </event>

   <event num='4'>
    <comment>Break moon charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.moon.7'/>
    <destroyobject where='inventory' map='home' id-name='moon charm'/>
   </event>

  </section>

  <section name='previous'>

   <event num='1'>
    <comment>Player wants to buy last month&apos;s charm - check for keyring</comment>
    <checkflag who='individual' flag ='keyring'  set='keyring.previous.3' unset='keyring.previous.2'/>
   </event>

   <event num='2'>
    <comment>Player has no keyring</comment>
    <message type='single' where='com' who='individual' lo='keyring.previous.3'/>
   </event>

   <event num='3'>
    <comment>Check for slithy</comment>
    <checkslithy value='1' pass='keyring.previous.4' fail='keyring.previous.5'/>
   </event>

   <event num='4'>
    <comment>Buy the charm</comment>
    <changeslithy value='-2' change='add'/>
    <createobject where='inventory' home-map='home' id='charm_skeleton11'/>
    <log>SLITHY: %s - skeleton_charm</log>
    <message type='single' where='com' who='individual' lo='keyring.previous.1'/>
   </event>

   <event num='5'>
    <comment>No slithy</comment>
    <message type='single' where='com' who='individual' lo='keyring.previous.2'/>
   </event>

  </section>

  <section name='pumpkin'>

   <event num='1'>
    <comment>Examine pumpkin charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.pumpkin.1'/>
   </event>

   <event num='2'>
    <comment>Shake pumpkin charm</comment>
    <message type='multi' where='com' who='individual' lo='keyring.pumpkin.2' hi='keyring.pumpkin.5'/>
    <message type='multi' where='com' who='room_ex' lo='keyring.pumpkin.6' hi='keyring.pumpkin.9'/>
   </event>

   <event num='3'>
    <comment>Drop pumpkin charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.pumpkin.10'/>
   </event>

   <event num='4'>
    <comment>Break pumpkin charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.pumpkin.11'/>
    <destroyobject where='inventory' map='home' id-name='pumpkin charm'/>
   </event>

  </section>

  <section name='ribbon'>

   <event num='1'>
    <comment>Examine ribbon charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.ribbon.1'/>
   </event>

   <event num='2'>
    <comment>Shake ribbon charm</comment>
    <message type='multi' where='com' who='individual' lo='keyring.ribbon.2' hi='keyring.ribbon.3'/>
    <message type='multi' where='com' who='room_ex' lo='keyring.ribbon.4' hi='keyring.ribbon.5'/>
   </event>

   <event num='3'>
    <comment>Drop ribbon charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.ribbon.6'/>
   </event>

   <event num='4'>
    <comment>Break ribbon charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.ribbon.7'/>
    <destroyobject where='inventory' map='home' id-name='valentine ribbon charm'/>
   </event>

  </section>

  <section name='schoolbell'>

   <event num='1'>
    <comment>Examine schoolbell charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.schoolbell.1'/>
   </event>

   <event num='2'>
    <comment>ring schoolbell charm</comment>
    <message type='multi' where='com' who='individual' lo='keyring.schoolbell.2' hi='keyring.schoolbell.4'/>
    <message type='multi' where='com' who='room_ex' lo='keyring.schoolbell.5' hi='keyring.schoolbell.6'/>
   </event>

   <event num='3'>
    <comment>shake schoolbell charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.schoolbell.7'/>
    <message type='single' where='com' who='room_ex' lo='keyring.schoolbell.8'/>
   </event>

   <event num='4'>
    <comment>drop schoolbell charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.schoolbell.9'/>
   </event>

   <event num='5'>
    <comment>break schoolbell charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.schoolbell.10'/>
    <destroyobject where='inventory' map='home' id-name='schoolbell charm'/>
   </event>

  </section>

  <section name='scroll'>

   <event num='1'>
    <comment>Examine scroll charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.scroll.1'/>
   </event>

   <event num='2'>
    <comment>Activate/use/read/shake scroll charm</comment>
    <message type='multi' where='com' who='individual' lo='keyring.scroll.2' hi='keyring.scroll.6'/>
    <message type='multi' where='com' who='room_ex' lo='keyring.scroll.7' hi='keyring.scroll.8'/>
   </event>

   <event num='3'>
    <comment>drop scroll</comment>
    <message type='single' where='com' who='individual' lo='keyring.scroll.9'/>
   </event>

   <event num='4'>
    <comment>break scroll</comment>
    <message type='single' where='com' who='individual' lo='keyring.scroll.10'/>
    <destroyobject where='inventory' map='home' id-name='scroll charm'/>
   </event>

  </section>

  <section name='scrooge'>

   <event num='1'>
    <comment>Examine scrooge charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.scrooge.1'/>
   </event>

   <event num='2'>
    <comment>Shake scrooge charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.scrooge.2'/>
    <message type='single' where='com' who='room_ex' lo='keyring.scrooge.3'/>
   </event>

   <event num='3'>
    <comment>Squeeze scrooge charm</comment>
    <message type='multi' where='com' who='individual' lo='keyring.scrooge.4' hi='keyring.scrooge.10'/>
    <message type='single' where='com' who='room_ex' lo='keyring.scrooge.11'/>
    <message type='multi' where='com' who='room_ex' lo='keyring.scrooge.5' hi='keyring.scrooge.10'/>
   </event>

   <event num='4'>
    <comment>Drop scrooge charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.scrooge.12'/>
   </event>

   <event num='5'>
    <comment>Break scrooge charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.scrooge.13'/>
    <destroyobject where='inventory' map='home' id-name='scrooge charm'/>
   </event>

  </section>

  <section name='skeleton'>

   <event num='1'>
    <comment>Examine skeleton charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.skeleton.1'/>
   </event>

   <event num='2'>
    <comment>Shake skeleton charm</comment>
    <message type='multi' where='com' who='individual' lo='keyring.skeleton.2' hi='keyring.skeleton.5'/>
    <message type='multi' where='com' who='room_ex' lo='keyring.skeleton.6' hi='keyring.skeleton.9'/>
   </event>

   <event num='3'>
    <comment>Drop skeleton charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.skeleton.10'/>
   </event>

   <event num='4'>
    <comment>Break skeleton charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.skeleton.11'/>
    <destroyobject where='inventory' map='home' id-name='skeleton charm'/>
   </event>

  </section>

  <section name='snake'>

   <event num='1'>
    <comment>Examine snake charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.snake.1'/>
   </event>

   <event num='2'>
    <comment>Squeeze snake charm</comment>
    <message type='multi' where='com' who='individual' lo='keyring.snake.2' hi='keyring.snake.5'/>
    <message type='multi' where='com' who='room_ex' lo='keyring.snake.6' hi='keyring.snake.8'/>
   </event>

   <event num='3'>
    <comment>Drop snake charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.snake.9'/>
   </event>

   <event num='4'>
    <comment>Break snake charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.snake.10'/>
    <destroyobject where='inventory' map='home' id-name='snake charm'/>
   </event>

  </section>

  <section name='snowflake'>

   <event num='1'>
    <comment>Examine snowflake charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.snowflake.1'/>
   </event>

   <event num='2'>
    <comment>Shake snowflake charm</comment>
    <message type='multi' where='com' who='individual' lo='keyring.snowflake.2' hi='keyring.snowflake.3'/>
    <message type='multi' where='com' who='room_ex' lo='keyring.snowflake.4' hi='keyring.snowflake.5'/>
   </event>

   <event num='3'>
    <comment>Drop snowflake charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.snowflake.6'/>
   </event>

   <event num='4'>
    <comment>Break snowflake charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.snowflake.7'/>
    <destroyobject where='inventory' map='home' id-name='snowflake charm'/>
   </event>

  </section>

  <section name='songbird'>

   <event num='1'>
    <comment>Examine songbird charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.songbird.1'/>
   </event>

   <event num='2'>
    <comment>Stroke songbird charm</comment>
    <message type='multi' where='com' who='individual' lo='keyring.songbird.2' hi='keyring.songbird.3'/>
    <message type='multi' where='com' who='room_ex' lo='keyring.songbird.4' hi='keyring.songbird.5'/>
   </event>

   <event num='3'>
    <comment>Drop songbird charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.songbird.6'/>
   </event>

   <event num='4'>
    <comment>Break songbird charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.songbird.7'/>
    <destroyobject where='inventory' map='home' id-name='songbird charm'/>
   </event>

   <event num='5'>
    <comment>Shake songbird charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.songbird.8'/>
   </event>

  </section>

  <section name='sparkler'>

   <event num='1'>
    <comment>Examine sparkler charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.sparkler.1'/>
   </event>

   <event num='2'>
    <comment>Shake sparkler charm</comment>
    <message type='multi' where='com' who='individual' lo='keyring.sparkler.2' hi='keyring.sparkler.3'/>
    <message type='multi' where='com' who='room_ex' lo='keyring.sparkler.4' hi='keyring.sparkler.5'/>
   </event>

   <event num='3'>
    <comment>Drop sparkler charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.sparkler.6'/>
   </event>

   <event num='4'>
    <comment>Break sparkler charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.sparkler.7'/>
    <destroyobject where='inventory' map='home' id-name='sparkler charm'/>
   </event>

  </section>

  <section name='stein'>

   <event num='1'>
    <comment>Examine beer stein charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.stein.1'/>
   </event>

   <event num='2'>
    <comment>Raise beer stein charm</comment>
    <message type='multi' where='com' who='individual' lo='keyring.stein.2' hi='keyring.stein.3'/>
    <message type='multi' where='com' who='room_ex' lo='keyring.stein.4' hi='keyring.stein.5'/>
    <changestat who='individual' stamina='1' change='add' cur-max='current'/>
   </event>

   <event num='3'>
    <comment>Drop beer stein charm</comment>
    <message type='multi' where='com' who='individual' lo='keyring.stein.6' hi='keyring.stein.7'/>
   </event>

   <event num='4'>
    <comment>Break beer stein charm</comment>
    <message type='multi' where='com' who='individual' lo='keyring.stein.8' hi='keyring.stein.9'/>
    <destroyobject where='inventory' map='home' id-name='beer stein charm'/>
   </event>

  </section>

  <section name='streamer'>

   <event num='1'>
    <comment>Examine streamer charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.streamer.1'/>
   </event>

   <event num='2'>
    <comment>Shake streamer charm</comment>
    <message type='multi' where='com' who='individual' lo='keyring.streamer.2' hi='keyring.streamer.3'/>
    <message type='multi' where='com' who='room_ex' lo='keyring.streamer.4' hi='keyring.streamer.5'/>
   </event>

   <event num='3'>
    <comment>Drop streamer charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.streamer.6'/>
   </event>

   <event num='4'>
    <comment>Break streamer charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.streamer.7'/>
    <destroyobject where='inventory' map='home' id-name='streamer charm'/>
   </event>

  </section>

  <section name='sunbeam'>

   <event num='1'>
    <comment>Examine sunbeam charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.sunbeam.1'/>
   </event>

   <event num='2'>
    <comment>Shake sunbeam charm</comment>
    <message type='multi' where='com' who='individual' lo='keyring.sunbeam.2' hi='keyring.sunbeam.4'/>
    <message type='multi' where='com' who='room_ex' lo='keyring.sunbeam.5' hi='keyring.sunbeam.7'/>
   </event>

   <event num='3'>
    <comment>Drop sunbeam charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.sunbeam.8'/>
   </event>

   <event num='4'>
    <comment>Break sunbeam charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.sunbeam.9'/>
    <destroyobject where='inventory' map='home' id-name='sunbeam charm'/>
   </event>

  </section>

  <section name='sunflower'>

   <event num='1'>
    <comment>Examine sunflower charm</comment>
    <message type='single' where='com' who='individual' lo='keyring.sunflower.1'/>
   </event>

   <event num='2'>
    <comment>Activate/use sunflower charm - roll the dice to see what happens</comment>
    <percent value='10' higher='keyring.sunflower.3' equals='keyring.sunflower.3' lower='keyring.sunflower.4'/>
   </event>

   <event num='3'>
    <comment>90% chance that the sunflower will just do its light thing</comment>
    <message type='multi' where='com' who='individual' lo='keyring.sunflower.2' hi='keyring.sunflower.4'/>
    <message type='multi' where='com' who='room_ex' lo='keyring.sunflower.5' hi='keyring.sunflower.7'/>
   </event>

   <event num='4'>
    <comment>10% chance it&apos;ll spit out a seed</comment>
    <message type='multi' where='com' who='individual' lo='keyring.sunflower.8' hi='keyring.sunflower.11'/>
    <message type='multi' where='com' who='room_ex' lo='keyring.sunflower.12' hi='keyring.sunflower.15'/>
   </event>

   <event num='5'>
    <comment>drop sunflower</comment>
    <message type='single' where='com' who='individual' lo='keyring.sunflower.16'/>
   </event>

   <event num='6'>
    <comment>break sunflower</comment>
    <message type='multi' where='com' who='individual' lo='keyring.sunflower.17' hi='keyring.sunflower.18'/>
    <destroyobject where='inventory' map='home' id-name='sunflower charm'/>
   </event>

  </section>

 </category>

 <category name='mobiles'>

  <section name='bureaucrat'>

   <event num='1'>
    <comment>Examine bureaucrat - intro then call random message</comment>
    <message type='multi' where='com' who='individual' lo='mobiles.bureaucrat.1' hi='mobiles.bureaucrat.2'/>
    <call event='mobiles.bureaucrat.random[2-9]'/>
   </event>

   <event num='2'>
    <comment>Random drop 1</comment>
    <message type='single' where='com' who='individual' lo='mobiles.bureaucrat.3'/>
   </event>

   <event num='3'>
    <comment>Random drop 2</comment>
    <message type='single' where='com' who='individual' lo='mobiles.bureaucrat.4'/>
    <message type='single' where='com' who='individual' lo='mobiles.bureaucrat.11'/>
   </event>

   <event num='4'>
    <comment>Random drop 3</comment>
    <message type='single' where='com' who='individual' lo='mobiles.bureaucrat.5'/>
    <message type='single' where='com' who='individual' lo='mobiles.bureaucrat.11'/>
   </event>

   <event num='5'>
    <comment>Random drop 4</comment>
    <message type='single' where='com' who='individual' lo='mobiles.bureaucrat.6'/>
    <message type='single' where='com' who='individual' lo='mobiles.bureaucrat.11'/>
   </event>

   <event num='6'>
    <comment>Random drop 5</comment>
    <message type='single' where='com' who='individual' lo='mobiles.bureaucrat.7'/>
    <message type='single' where='com' who='individual' lo='mobiles.bureaucrat.11'/>
   </event>

   <event num='7'>
    <comment>Random drop 6</comment>
    <message type='single' where='com' who='individual' lo='mobiles.bureaucrat.8'/>
    <message type='single' where='com' who='individual' lo='mobiles.bureaucrat.11'/>
   </event>

   <event num='8'>
    <comment>Random drop 7</comment>
    <message type='single' where='com' who='individual' lo='mobiles.bureaucrat.9'/>
    <message type='single' where='com' who='individual' lo='mobiles.bureaucrat.11'/>
   </event>

   <event num='9'>
    <comment>Random drop 8</comment>
    <message type='multi' where='com' who='individual' lo='mobiles.bureaucrat.10' hi='mobiles.bureaucrat.11'/>
   </event>

  </section>

  <section name='customs'>

   <event num='1'>
    <comment>bribe the manager for a customs cert - check for possession of cert</comment>
    <checkflag who='individual' flag ='customs-cert'  set='mobiles.customs.7' unset='mobiles.customs.2'/>
   </event>

   <event num='2'>
    <comment>check for staff</comment>
    <checkflag who='individual' flag ='staff'  set='mobiles.customs.6' unset='mobiles.customs.10'/>
   </event>

   <event num='3'>
    <comment>check for slithy</comment>
    <checkslithy value='1' pass='mobiles.customs.5' fail='mobiles.customs.4'/>
   </event>

   <event num='4'>
    <comment>no slithy = no cert</comment>
    <message type='text' where='com' who='individual'>You don&apos;t have a slithy tove with which to bribe the manager, so he ignores you.</message>
   </event>

   <event num='5'>
    <comment>remove a slithy</comment>
    <changeslithy value='-1' change='add'/>
    <call event='mobiles.customs.6'/>
    <log>SLITHY: %s - customs_exemption</log>
   </event>

   <event num='6'>
    <comment>add the cert to the player&apos;s inventory</comment>
    <flipflag who='individual' flag ='customs-cert'/>
    <message type='text' where='com' who='individual'>You hand over the bribe and the manager uses his terminal to remotely reprogram your ship&apos;s transponder to broadcast details of your new customs exemption certificate.</message>
   </event>

   <event num='7'>
    <comment>already has a cert</comment>
    <message type='text' where='com' who='individual'>You already have a customs exemption certificate - you don&apos;t need another one until your current one expires!</message>
   </event>

   <event num='8'>
    <comment>try to talk to the manager</comment>
    <nomatch id-name='obj_manager' event='mobiles.customs.9'/>
   </event>

   <event num='9'>
    <comment>manager tells the player where to go</comment>
    <message type='text' where='com' who='individual'>The manager is only interested in you to the extent that you can afford the one slithy tove bribe for a customs exemption certificate. He completely ignores your attempts to pass the time of day.</message>
   </event>

   <event num='10'>
    <comment>Extra check - make sure player is not a groundhog</comment>
    <checkstat who='individual' rank='0' higher='mobiles.customs.3' equals='mobiles.customs.11'/>
   </event>

   <event num='11'>
    <comment>Player is groundhog so refuse to sell a certificate</comment>
    <message type='text' where='com' who='individual'>The manager, in an uncharacteristic gesture of honesty, refuses to take your slithy tove. "You don&apos;t have a ship," he tells you, with a note of exasperation in his voice. "What possible interest could customs have in you, that you need an exemption certificate?"</message>
   </event>

  </section>

  <section name='puckleberry'>

   <event num='1'>
    <comment>Puckleberry chat - check if player is waiting for reward</comment>
    <checkvariable name='graveyard' key='puzzle' value='reward' equals='mobiles.puckleberry.2' not-equal='mobiles.puckleberry.3'/>
   </event>

   <event num='2'>
    <comment>Puzzle reward - check rank, plus set variable so they don&apos;t get reward twice</comment>
    <setvariable name='graveyard' key='puzzle' value='finish'/>
    <message type='single' where='com' who='individual' lo='mobiles.puckleberry.1'/>
    <checkstat who='individual' rank='1' higher='mobiles.puckleberry.27' equals='mobiles.puckleberry.26'/>
   </event>

   <event num='3'>
    <comment>Not waiting for reward so check if player has finished puzzle</comment>
    <checkvariable name='graveyard' key='puzzle' value='finish' equals='mobiles.puckleberry.4' not-equal='mobiles.puckleberry.5'/>
   </event>

   <event num='4'>
    <comment>Player has finished puzzle</comment>
    <message type='single' where='com' who='individual' lo='mobiles.puckleberry.37'/>
   </event>

   <event num='5'>
    <comment>Player has not finished puzzle so set up the chat</comment>
    <match phrase='hello' id-name='obj_puckleberry' event='mobiles.puckleberry.6'/>
    <match phrase='yes' id-name='obj_puckleberry' event='mobiles.puckleberry.9'/>
    <match phrase='no' id-name='obj_puckleberry' event='mobiles.puckleberry.14'/>
    <match phrase='ready' id-name='obj_puckleberry' lo='mobiles.puckleberry.17'/>
    <match phrase='carry on' id-name='obj_puckleberry' lo='mobiles.puckleberry.17'/>
    <match phrase='continue' id-name='obj_puckleberry' lo='mobiles.puckleberry.17'/>
    <match phrase='mission' id-name='obj_puckleberry' event='mobiles.puckleberry.20'/>
    <match phrase='crisis' id-name='obj_puckleberry' event='mobiles.puckleberry.20'/>
    <match phrase='irregularit' id-name='obj_puckleberry' event='mobiles.puckleberry.25'/>
    <match phrase='somebody' id-name='obj_puckleberry' event='mobiles.puckleberry.24'/>
    <match phrase='bye' id-name='obj_puckleberry' lo='mobiles.puckleberry.2'/>
    <nomatch id-name='obj_puckleberry' lo='mobiles.puckleberry.5'/>
   </event>

   <event num='6'>
    <comment>Hello - check if player has been briefed</comment>
    <checkvariable name='graveyard' key='puzzle' value='start' equals='mobiles.puckleberry.7' not-equal='mobiles.puckleberry.8'/>
   </event>

   <event num='7'>
    <comment>Player has been briefed</comment>
    <message type='single' where='com' who='individual' lo='mobiles.puckleberry.3'/>
   </event>

   <event num='8'>
    <comment>Player has not been briefed - set topic to mission</comment>
    <message type='single' where='com' who='individual' lo='mobiles.puckleberry.4'/>
    <setvariable name='graveyard' key='puckleberry' value='mission' temporary='true'/>
   </event>

   <event num='9'>
    <comment>Yes - check if topic is mission</comment>
    <checkvariable name='graveyard' key='puckleberry' value='mission' equals='mobiles.puckleberry.10' not-equal='mobiles.puckleberry.11'/>
   </event>

   <event num='10'>
    <comment>Topic is mission</comment>
    <message type='single' where='com' who='individual' lo='mobiles.puckleberry.6'/>
    <call event='mobiles.puckleberry.20'/>
    <setvariable name='graveyard' key='puckleberry' value='unknown' temporary='true'/>
   </event>

   <event num='11'>
    <comment>Topic is not mission so check if it is somebody</comment>
    <checkvariable name='graveyard' key='puckleberry' value='somebody' equals='mobiles.puckleberry.12' not-equal='mobiles.puckleberry.13'/>
   </event>

   <event num='12'>
    <comment>Topic is somebody</comment>
    <setvariable name='graveyard' key='puckleberry' value='unknown' temporary='true'/>
    <call event='mobiles.puckleberry.24'/>
   </event>

   <event num='13'>
    <comment>Topic is unknown</comment>
    <message type='single' where='com' who='individual' lo='mobiles.puckleberry.7'/>
   </event>

   <event num='14'>
    <comment>No - check if topic is mission</comment>
    <checkvariable name='graveyard' key='puckleberry' value='mission' equals='mobiles.puckleberry.15' not-equal='mobiles.puckleberry.16'/>
   </event>

   <event num='15'>
    <comment>Topic is mission</comment>
    <message type='single' where='com' who='individual' lo='mobiles.puckleberry.8'/>
    <setvariable name='graveyard' key='puckleberry' value='unknown' temporary='true'/>
   </event>

   <event num='16'>
    <comment>Topic is not mission so check if it is somebody</comment>
    <checkvariable name='graveyard' key='puckleberry' value='somebody' equals='mobiles.puckleberry.17' not-equal='mobiles.puckleberry.18'/>
   </event>

   <event num='17'>
    <comment>Topic is somebody</comment>
    <message type='single' where='com' who='individual' lo='mobiles.puckleberry.9'/>
    <setvariable name='graveyard' key='puckleberry' value='unknown' temporary='true'/>
   </event>

   <event num='18'>
    <comment>Topic is unknown</comment>
    <message type='single' where='com' who='individual' lo='mobiles.puckleberry.10'/>
   </event>

   <event num='19'>
    <comment>Mission - introductory paragraph if player has been briefed before</comment>
    <message type='single' where='com' who='individual' lo='mobiles.puckleberry.11'/>
    <call event='mobiles.puckleberry.20'/>
   </event>

   <event num='20'>
    <comment>Mission briefing - 1st para then check for rank</comment>
    <message type='single' where='com' who='individual' lo='mobiles.puckleberry.12'/>
    <checkstat who='individual' rank='4' higher='mobiles.puckleberry.21' equals='mobiles.puckleberry.21' lower='mobiles.puckleberry.22'/>
    <setvariable name='graveyard' key='puckleberry' value='unknown' temporary='true'/>
   </event>

   <event num='21'>
    <comment>Briefing continues for members</comment>
    <message type='single' where='com' who='individual' lo='mobiles.puckleberry.13'/>
    <call event='mobiles.puckleberry.23'/>
   </event>

   <event num='22'>
    <comment>Briefing continues for non-members</comment>
    <message type='single' where='com' who='individual' lo='mobiles.puckleberry.14'/>
    <call event='mobiles.puckleberry.23'/>
   </event>

   <event num='23'>
    <comment>Briefing continues for all</comment>
    <message type='multi' where='com' who='individual' lo='mobiles.puckleberry.15' hi='mobiles.puckleberry.16'/>
   </event>

   <event num='24'>
    <comment>Somebody</comment>
    <message type='multi' where='com' who='individual' lo='mobiles.puckleberry.25' hi='mobiles.puckleberry.27'/>
    <setvariable name='graveyard' key='puzzle' value='start' temporary='true'/>
   </event>

   <event num='25'>
    <comment>Investigat</comment>
    <message type='multi' where='com' who='individual' lo='mobiles.puckleberry.21' hi='mobiles.puckleberry.24'/>
    <setvariable name='graveyard' key='puckleberry' value='somebody' temporary='true'/>
   </event>

   <event num='26'>
    <comment>Player is a Commander so give reward</comment>
    <message type='single' where='com' who='individual' lo='mobiles.puckleberry.28'/>
    <changestat who='individual' money='20000' change='add' cur-max='current'/>
    <call event='mobiles.puckleberry.41'/>
   </event>

   <event num='27'>
    <comment>Not Commander so do next check</comment>
    <checkstat who='individual' rank='2' higher='mobiles.puckleberry.29' equals='mobiles.puckleberry.28'/>
   </event>

   <event num='28'>
    <comment>Player is a Captain so give reward</comment>
    <message type='single' where='com' who='individual' lo='mobiles.puckleberry.29'/>
    <changestat who='individual' money='10000' change='add' cur-max='current'/>
    <changestat who='individual' hc='35' change='add' cur-max='current'/>
    <call event='mobiles.puckleberry.41'/>
   </event>

   <event num='29'>
    <comment>Not Captain so do next check</comment>
    <checkstat who='individual' rank='3' higher='mobiles.puckleberry.31' equals='mobiles.puckleberry.30'/>
   </event>

   <event num='30'>
    <comment>Player is an Adventurer so give reward</comment>
    <message type='single' where='com' who='individual' lo='mobiles.puckleberry.30'/>
    <changestat who='individual' money='10000' change='add' cur-max='current'/>
    <changestat who='individual' ak='25' change='add' cur-max='current'/>
    <call event='mobiles.puckleberry.41'/>
   </event>

   <event num='31'>
    <comment>Not Adventurer so do next check</comment>
    <checkstat who='individual' rank='4' higher='mobiles.puckleberry.33' equals='mobiles.puckleberry.32'/>
   </event>

   <event num='32'>
    <comment>Player is a Merchant so give reward</comment>
    <message type='single' where='com' who='individual' lo='mobiles.puckleberry.31'/>
    <changestat who='individual' money='50000' change='add' cur-max='current'/>
    <call event='mobiles.puckleberry.41'/>
   </event>

   <event num='33'>
    <comment>Not Merchant so do next check</comment>
    <checkstat who='individual' rank='5' higher='mobiles.puckleberry.35' equals='mobiles.puckleberry.34'/>
   </event>

   <event num='34'>
    <comment>Player is a Trader so give reward</comment>
    <message type='single' where='com' who='individual' lo='mobiles.puckleberry.32'/>
    <changestat who='individual' money='100000' change='add' cur-max='current'/>
    <call event='mobiles.puckleberry.41'/>
   </event>

   <event num='35'>
    <comment>Not Trader so do next check</comment>
    <checkstat who='individual' rank='6' higher='mobiles.puckleberry.37' equals='mobiles.puckleberry.36'/>
   </event>

   <event num='36'>
    <comment>Player is Indy or Manu so give reward</comment>
    <message type='single' where='com' who='individual' lo='mobiles.puckleberry.33'/>
    <changestat who='individual' shares='150' change='add' cur-max='current'/>
    <call event='mobiles.puckleberry.41'/>
   </event>

   <event num='37'>
    <comment>Not Indy so do next check</comment>
    <checkstat who='individual' rank='7' higher='mobiles.puckleberry.38' equals='mobiles.puckleberry.36'/>
   </event>

   <event num='38'>
    <comment>Not Manu so do next check</comment>
    <checkstat who='individual' rank='8' higher='mobiles.puckleberry.40' equals='mobiles.puckleberry.39'/>
   </event>

   <event num='39'>
    <comment>Player is a Financier so give reward</comment>
    <message type='single' where='com' who='individual' lo='mobiles.puckleberry.34'/>
    <changestat who='individual' c-money='1000000' change='add' cur-max='current'/>
    <call event='mobiles.puckleberry.41'/>
   </event>

   <event num='40'>
    <comment>Player is a PO so give reward</comment>
    <message type='single' where='com' who='individual' lo='mobiles.puckleberry.35'/>
    <changestat who='individual' treasury='2000000' change='add' cur-max='current'/>
    <call event='mobiles.puckleberry.41'/>
   </event>

   <event num='41'>
    <comment>Final bit of reward</comment>
    <message type='single' where='com' who='individual' lo='mobiles.puckleberry.36'/>
    <posttoreview>%s has exhibited great bravery and resourcefulness in aiding the Trading Guild with their mission to Graveyard.</posttoreview>
   </event>

  </section>

  <section name='purple'>

   <event num='1'>
    <comment>Talk to the Clerk of the Purple Wax</comment>
    <nomatch id-name='obj_purpleclerk' lo='mobiles.purple.1'/>
   </event>

  </section>

 </category>

 <category name='monorail'>

  <section name='fare'>

   <event num='1'>
    <comment>Enter event on spaceport monorail platform - 521 - check if player can afford fare</comment>
    <checklastloc loc='970' pass='stop'/>
    <checkstat who='individual' money='34' higher='monorail.fare.2' equals='monorail.fare.2' lower='monorail.fare.3'/>
   </event>

   <event num='2'>
    <comment>Pay the fare</comment>
    <changestat who='individual' money='-34' change='add' cur-max='current'/>
    <message type='single' where='com' who='individual' lo='monorail.fare.1'/>
   </event>

   <event num='3'>
    <comment>Can&apos;t afford the fare - spaceport</comment>
    <message type='single' where='com' who='individual' lo='monorail.fare.2'/>
    <move what='player' who='individual' loc='520'/>
   </event>

   <event num='4'>
    <comment>Enter event on New Wall St monorail platforms - 1039/1167 - check if player can afford fare</comment>
    <checklastloc loc='970' pass='stop'/>
    <checkstat who='individual' money='34' higher='monorail.fare.2' equals='monorail.fare.2' lower='monorail.fare.5'/>
   </event>

   <event num='5'>
    <comment>Can&apos;t afford the fare - New Wall St</comment>
    <message type='single' where='com' who='individual' lo='monorail.fare.2'/>
    <move what='player' who='individual' loc='1103'/>
   </event>

   <event num='6'>
    <comment>Enter event on Zoo Plaza monorail platforms - 980/982 - check if player can afford fare</comment>
    <checklastloc loc='970' pass='stop'/>
    <checkstat who='individual' money='34' higher='monorail.fare.2' equals='monorail.fare.2' lower='monorail.fare.7'/>
   </event>

   <event num='7'>
    <comment>Can&apos;t afford the fare - Zoo Plaza</comment>
    <message type='single' where='com' who='individual' lo='monorail.fare.2'/>
    <move what='player' who='individual' loc='981'/>
   </event>

   <event num='8'>
    <comment>Enter event on hospital monorail platform - 1306 - check if player can afford fare</comment>
    <checklastloc loc='970' pass='stop'/>
    <checkstat who='individual' money='34' higher='monorail.fare.2' equals='monorail.fare.2' lower='monorail.fare.9'/>
   </event>

   <event num='9'>
    <comment>Can&apos;t afford the fare - hospital</comment>
    <message type='single' where='com' who='individual' lo='monorail.fare.2'/>
    <move what='player' who='individual' loc='1305'/>
   </event>

  </section>

  <section name='hospital'>

   <event num='1'>
    <comment>Monorail leaves hospital - 1306</comment>
    <announce type='single' loc='1306' lo='monorail.general.3'/>
    <announce type='single' loc='970' lo='monorail.general.2'/>
    <changelink loc='1306' exit='in' action='remove' />
    <changelink loc='970' exit='out' action='remove' />
    <delayevent delay='10' logoff='monorail.zooplazawest.2'/>
   </event>

   <event num='2'>
    <comment>Monorail arrives at hospital</comment>
    <announce type='single' loc='1306' lo='monorail.hospital.1'/>
    <announce type='single' loc='970' lo='monorail.hospital.2'/>
    <changelink loc='1306' exit='in' action='add' new-loc='970'/>
    <changelink loc='970' exit='out' action='add' new-loc='1306'/>
    <delayevent delay='10' logoff='monorail.hospital.1'/>
   </event>

  </section>

  <section name='spaceport'>

   <event num='1'>
    <comment>Monorail leaves spaceport - 521</comment>
    <announce type='single' loc='521' lo='monorail.general.1'/>
    <announce type='single' loc='970' lo='monorail.general.2'/>
    <changelink loc='521' exit='in' action='remove' />
    <changelink loc='970' exit='out' action='remove' />
    <delayevent delay='10' logoff='monorail.wallstreetsouth.2'/>
   </event>

   <event num='2'>
    <comment>Monorail arrives at spaceport</comment>
    <announce type='single' loc='521' lo='monorail.spaceport.1'/>
    <announce type='single' loc='970' lo='monorail.spaceport.2'/>
    <changelink loc='521' exit='in' action='add' new-loc='970'/>
    <changelink loc='970' exit='out' action='add' new-loc='521'/>
    <delayevent delay='10' logoff='monorail.spaceport.1'/>
   </event>

  </section>

  <section name='wallstreetnorth'>

   <event num='1'>
    <comment>Monorail leaves Wall St northbound - 1039</comment>
    <announce type='single' loc='1039' lo='monorail.general.3'/>
    <announce type='single' loc='970' lo='monorail.general.2'/>
    <changelink loc='1039' exit='in' action='remove' />
    <changelink loc='970' exit='out' action='remove' />
    <delayevent delay='10' logoff='monorail.spaceport.2'/>
   </event>

   <event num='2'>
    <comment>Monorail arrives at Wall St northbound</comment>
    <announce type='single' loc='1039' lo='monorail.wallstreetnorth.1'/>
    <announce type='single' loc='970' lo='monorail.wallstreetnorth.2'/>
    <changelink loc='1039' exit='in' action='add' new-loc='970'/>
    <changelink loc='970' exit='out' action='add' new-loc='1039'/>
    <delayevent delay='10' logoff='monorail.wallstreetnorth.1'/>
   </event>

  </section>

  <section name='wallstreetsouth'>

   <event num='1'>
    <comment>Monorail leaves Wall St southbound - 1167</comment>
    <announce type='single' loc='1167' lo='monorail.general.1'/>
    <announce type='single' loc='970' lo='monorail.general.2'/>
    <changelink loc='1167' exit='in' action='remove' />
    <changelink loc='970' exit='out' action='remove' />
    <delayevent delay='10' logoff='monorail.zooplazaeast.2'/>
   </event>

   <event num='2'>
    <comment>Monorail arrives at Wall St southbound</comment>
    <announce type='single' loc='1167' lo='monorail.wallstreetsouth.1'/>
    <announce type='single' loc='970' lo='monorail.wallstreetsouth.2'/>
    <changelink loc='1167' exit='in' action='add' new-loc='970'/>
    <changelink loc='970' exit='out' action='add' new-loc='1167'/>
    <delayevent delay='10' logoff='monorail.wallstreetsouth.1'/>
   </event>

  </section>

  <section name='zooplazaeast'>

   <event num='1'>
    <comment>Monorail leaves Zoo Plaza eastbound - 982</comment>
    <announce type='single' loc='982' lo='monorail.general.1'/>
    <announce type='single' loc='970' lo='monorail.general.2'/>
    <changelink loc='982' exit='in' action='remove' />
    <changelink loc='970' exit='out' action='remove' />
    <delayevent delay='10' logoff='monorail.hospital.2'/>
   </event>

   <event num='2'>
    <comment>Monorail arrives at Zoo Plaza eastbound</comment>
    <announce type='single' loc='982' lo='monorail.zooplazaeast.1'/>
    <announce type='single' loc='970' lo='monorail.zooplazaeast.2'/>
    <changelink loc='982' exit='in' action='add' new-loc='970'/>
    <changelink loc='970' exit='out' action='add' new-loc='982'/>
    <delayevent delay='10' logoff='monorail.zooplazaeast.1'/>
   </event>

  </section>

  <section name='zooplazawest'>

   <event num='1'>
    <comment>Monorail leaves Zoo Plaza westbound - 980</comment>
    <announce type='single' loc='980' lo='monorail.general.3'/>
    <announce type='single' loc='970' lo='monorail.general.2'/>
    <changelink loc='980' exit='in' action='remove' />
    <changelink loc='970' exit='out' action='remove' />
    <delayevent delay='10' logoff='monorail.wallstreetnorth.2'/>
   </event>

   <event num='2'>
    <comment>Monorail arrives at Zoo Plaza westbound</comment>
    <announce type='single' loc='980' lo='monorail.zooplazawest.1'/>
    <announce type='single' loc='970' lo='monorail.zooplazawest.2'/>
    <changelink loc='980' exit='in' action='add' new-loc='970'/>
    <changelink loc='970' exit='out' action='add' new-loc='980'/>
    <delayevent delay='10' logoff='monorail.zooplazawest.1'/>
   </event>

  </section>

 </category>

 <category name='moves'>

  <section name='alcove'>

   <event num='1'>
    <comment>Alcove in Trading Guild - 1101 - keep non-staff out until puzzle is ready</comment>
    <checkflag who='individual' flag ='staff'  set='stop'/>
    <message type='text' where='com' who='individual'>As you step into the alcove, a Guild flunky turns you back, murmering something about an important official who doesn&apos;t wish to be disturbed at this time, thank you very much, please come back later.</message>
    <move what='player' who='individual' loc='1038'/>
   </event>

  </section>

  <section name='banister'>

   <event num='1'>
    <comment>Get banister - loc 515</comment>
    <message type='single' where='loc' who='individual' lo='moves.banister.1'/>
   </event>

   <event num='2'>
    <comment>Slide down banister</comment>
    <message type='single' where='loc' who='individual' lo='moves.banister.2'/>
    <message type='single' where='loc' who='room_ex' lo='moves.banister.3'/>
    <announce type='single' loc='580' lo='moves.banister.4'/>
    <move what='player' who='individual' loc='580'/>
   </event>

  </section>

  <section name='cab'>

   <event num='1'>
    <comment>Cab ride from hospital - loc 1305 - called on "hail cab"</comment>
    <message type='single' where='loc' who='individual' lo='moves.cab.1'/>
    <checkstat who='individual' money='92' higher='moves.cab.3' equals='moves.cab.3' lower='moves.cab.2'/>
   </event>

   <event num='2'>
    <comment>Not enough funds for cab ride</comment>
    <message type='single' where='loc' who='individual' lo='moves.cab.2'/>
   </event>

   <event num='3'>
    <comment>Cab ride - start</comment>
    <message type='single' where='loc' who='individual' lo='moves.cab.3'/>
    <changestat who='individual' money='-92' change='add' cur-max='current'/>
    <freeze />
    <delayevent delay='3' event='moves.cab.4'/>
   </event>

   <event num='4'>
    <comment>Cab ride - arrival</comment>
    <message type='single' where='loc' who='individual' lo='moves.cab.4'/>
    <move what='player' who='individual' loc='520'/>
    <release />
   </event>

  </section>

  <section name='cell'>

   <event num='1'>
    <comment>Open cell door - loc 851</comment>
    <message type='single' where='loc' who='individual' lo='moves.cell.1'/>
    <move what='player' who='individual' loc='852'/>
   </event>

  </section>

  <section name='elevator'>

   <event num='1'>
    <comment>Press button - in ground floor elevator (loc 784)</comment>
    <message type='single' where='com' who='individual' lo='moves.elevator.1'/>
    <move what='player' who='individual' loc='721'/>
   </event>

   <event num='2'>
    <comment>Press button - in 43rd floor elevator (loc 720)</comment>
    <message type='single' where='com' who='individual' lo='moves.elevator.2'/>
    <move what='player' who='individual' loc='783'/>
   </event>

   <event num='3'>
    <comment>Press button to go to roof - in ground floor elevator (loc 719)</comment>
    <message type='single' where='com' who='individual' lo='moves.elevator.3'/>
    <move what='player' who='individual' loc='527'/>
   </event>

   <event num='4'>
    <comment>Press button - in roof elevator (loc 591)</comment>
    <message type='single' where='com' who='individual' lo='moves.elevator.4'/>
    <move what='player' who='individual' loc='783'/>
   </event>

  </section>

  <section name='hagar'>

   <event num='1'>
    <comment>Enter event on Hagar&apos;s storeroom - 712 - keep out all players</comment>
    <message type='single' where='com' who='individual' lo='moves.hagar.1'/>
    <move what='player' who='individual' loc='713'/>
   </event>

  </section>

  <section name='level42'>

   <event num='1'>
    <comment>On entry to location 785</comment>
    <checkvariable name='newbod' key='clue' value='eight' not-equal='moves.level42.2'/>
   </event>

   <event num='2'>
    <comment>Player is not doing newbod puzzle</comment>
    <message type='text' where='com' who='individual'>As you move towards the door, a stentorian voice emanating from it shouts "HALT! Access is not allowed. Move away from the door with your hands (or the equivalent) visible. Do not attempt to approach this door again." Cursing whoever invented semi-intelligent doors you move away.</message>
    <move what='player' who='individual' loc='721'/>
   </event>

   <event num='3'>
    <comment>If player is doing puzzle - tell him/her about the door</comment>
    <checkvariable name='newbod' key='clue' value='eight' not-equal='stop'/>
    <message type='text' where='com' who='individual'>You notice that a malfunction light is blinking on the fire door, which appears to be slightly ajar.</message>
   </event>

  </section>

  <section name='navy'>

   <event num='1'>
    <comment>Keepout of naval base - loc 265 - enter event</comment>
    <message type='single' where='com' who='individual' lo='moves.navy.1'/>
    <move what='player' who='individual' loc='328'/>
   </event>

  </section>

  <section name='purple'>

   <event num='1'>
    <comment>See if player is doing the puzzle (loc 668)</comment>
    <checkvariable name='newbod' key='clue' value='eight' equals='moves.purple.2'/>
   </event>

   <event num='2'>
    <comment>Does the player already have a seal? If not make one.</comment>
    <checkinventory map='home' id-name='purple seal' found='stop'/>
    <createobject where='inventory' home-map='sol/earth' id='obj_purpleseal'/>
    <message type='multi' where='com' who='individual' lo='mobiles.purple.2' hi='mobiles.purple.3'/>
   </event>

  </section>

  <section name='sponsor'>

   <event num='1'>
    <comment>Enter event on hunting lodge - 2321 - check if they are a sponsor</comment>
    <checkflag who='individual' flag ='sponsor'  set='moves.sponsor.3' unset='moves.sponsor.2'/>
   </event>

   <event num='2'>
    <comment>Not a sponsor, so can&apos;t come in</comment>
    <message type='single' where='com' who='individual' lo='moves.sponsor.1'/>
    <move what='player' who='individual' loc='2384'/>
   </event>

   <event num='3'>
    <comment>Yes they are a sponsor</comment>
    <message type='single' where='com' who='individual' lo='moves.sponsor.2'/>
   </event>

  </section>

  <section name='trader'>

   <event num='1'>
    <comment>Trader&apos;s lounge - loc 1037 - stop poor people getting in</comment>
    <checkstat who='individual' rank='4' lower='moves.trader.2'/>
   </event>

   <event num='2'>
    <comment>If lower than trader, keep out...</comment>
    <message type='single' where='com' who='individual' lo='moves.trader.1'/>
    <move what='player' who='individual' loc='1038'/>
   </event>

  </section>

  <section name='washroom'>

   <event num='1'>
    <comment>In exec elevator - loc 725 - USE KEY - this event would check if they have keycard</comment>
    <checkflag who='individual' flag ='exec-key'  set='moves.washroom.3' unset='moves.washroom.2'/>
   </event>

   <event num='2'>
    <comment>Not got keycard</comment>
    <message type='single' where='loc' who='individual' lo='moves.washroom.1'/>
   </event>

   <event num='3'>
    <comment>Got keycard - move to washroom</comment>
    <message type='single' where='loc' who='individual' lo='moves.washroom.2'/>
    <move what='player' who='individual' loc='727'/>
   </event>

   <event num='4'>
    <comment>Enter event on elevator to take them back down again</comment>
    <checkvariable name='washroom' key='hottub' value='in' equals='washroom.hottub.7' not-equal='moves.washroom.6'/>
   </event>

   <event num='5'>
    <comment>Have come from washroom</comment>
    <message type='single' where='loc' who='individual' lo='moves.washroom.3'/>
    <move what='player' who='individual' loc='724'/>
   </event>

   <event num='6'>
    <comment>They are not still in hot tub, so check where they came from</comment>
    <checklastloc loc='727' pass='moves.washroom.5'/>
   </event>

  </section>

  <section name='zoo'>

   <event num='1'>
    <comment>Loc 1300 - private room in zoo - check if they have a slithy</comment>
    <checkslithy value='1' pass='moves.zoo.2' fail='moves.zoo.3'/>
   </event>

   <event num='2'>
    <comment>Yes they have slithy so send message and let them enter</comment>
    <message type='single' where='loc' who='individual' lo='moves.zoo.1'/>
   </event>

   <event num='3'>
    <comment>No slithy so turn back</comment>
    <message type='single' where='loc' who='individual' lo='moves.zoo.2'/>
    <move what='player' who='individual' loc='1172'/>
   </event>

  </section>

 </category>

 <category name='newbod'>

  <section name='customs'>

   <event num='1'>
    <comment>See if player has a customs voucher  and deal with it if s/he has</comment>
    <checkinventory map='sol/magellan' id-name='customs voucher' not-found='stop'/>
    <changestat who='individual' customs='10' change='add' cur-max='current'/>
    <destroyobject where='inventory' map='magellan' id-name='customs voucher'/>
    <message type='text' where='com' who='individual'>You hand your voucher to the manager. He grunts unhappily and does something via his comm unit. Then he screws up your voucher and throws it into the waste incinerator. He tells you, "You have your ten days, and you&apos;re making my customs shed untidy. Beat it."</message>
   </event>

  </section>

  <section name='exhibition'>

   <event num='1'>
    <comment>Check to see if the player has solved a clue</comment>
    <checkvariable name='newbod' key='clue' value='fourteen' equals='newbod.exhibition.18'/>
    <checkvariable name='newbod' key='clue' value='thirteen' equals='newbod.exhibition.17'/>
    <checkvariable name='newbod' key='clue' value='twelve' equals='newbod.exhibition.16'/>
    <checkvariable name='newbod' key='clue' value='eleven' equals='newbod.exhibition.15'/>
    <checkvariable name='newbod' key='clue' value='ten' equals='newbod.exhibition.14'/>
    <checkvariable name='newbod' key='clue' value='nine' equals='newbod.exhibition.13'/>
    <checkvariable name='newbod' key='clue' value='eight' equals='newbod.exhibition.12'/>
    <checkvariable name='newbod' key='clue' value='seven' equals='newbod.exhibition.11'/>
    <checkvariable name='newbod' key='clue' value='six' equals='newbod.exhibition.10'/>
    <checkvariable name='newbod' key='clue' value='five' equals='newbod.exhibition.9'/>
    <checkvariable name='newbod' key='clue' value='four' equals='newbod.exhibition.8'/>
    <checkvariable name='newbod' key='clue' value='three' equals='newbod.exhibition.6'/>
    <checkvariable name='newbod' key='clue' value='two' equals='newbod.exhibition.4'/>
    <checkvariable name='newbod' key='clue' value='one' equals='newbod.exhibition.2'/>
   </event>

   <event num='2'>
    <comment>Player has had first clue</comment>
    <checkinventory map='sol/silk' id-name='doogmints' found='newbod.exhibition.3'/>
    <checkinventory map='sol/silk' id-name='crialis' found='newbod.exhibition.3'/>
    <checkinventory map='sol/silk' id-name='zippinia' found='newbod.exhibition.3'/>
    <checkinventory map='sol/silk' id-name='koulekouli' found='newbod.exhibition.3'/>
    <checkinventory map='sol/silk' id-name='kubiko' found='newbod.exhibition.3'/>
    <checkinventory map='sol/silk' id-name='elpae' found='newbod.exhibition.3'/>
   </event>

   <event num='3'>
    <comment>Remove the spacebloom and set up variable for clue two</comment>
    <destroyobject where='inventory' map='silk' id-name='doogmints'/>
    <destroyobject where='inventory' map='silk' id-name='crialis'/>
    <destroyobject where='inventory' map='silk' id-name='crialis'/>
    <destroyobject where='inventory' map='silk' id-name='koulekouli'/>
    <destroyobject where='inventory' map='silk' id-name='kubiko'/>
    <destroyobject where='inventory' map='silk' id-name='elpae'/>
    <setvariable name='newbod' key='clue' value='two'/>
    <message type='text' where='com' who='individual'>As you enter Victor spots the spacebloom in your hand. He takes it from you and tells you that you can ask for the second clue whenever you are ready to do the next part of the test.</message>
   </event>

   <event num='4'>
    <comment>Player has has Clue #2</comment>
    <checkinventory map='sol/titan' id-name='magnet' found='newbod.exhibition.5'/>
   </event>

   <event num='5'>
    <comment>Remove magnet and set variable</comment>
    <destroyobject where='inventory' map='titan' id-name='magnet'/>
    <setvariable name='newbod' key='clue' value='three'/>
    <message type='text' where='com' who='individual'>You hand Victor the magnet. He smiles and ticks off the second clue on his list. Then he tells you that you can ask for the next clue whenever it is most convenient for you.</message>
   </event>

   <event num='6'>
    <comment>Player has has Clue #3</comment>
    <checkinventory map='sol/mercury' id-name='lantern' found='newbod.exhibition.7'/>
   </event>

   <event num='7'>
    <comment>Remove lantern and set variable</comment>
    <destroyobject where='inventory' map='mercury' id-name='lantern'/>
    <setvariable name='newbod' key='clue' value='four'/>
    <message type='text' where='com' who='individual'>Victor smiles nervously as you hand him the lantern. He obviously thinks it&apos;s about to self-ignite in his hand! He ticks off the clue on his list and tells you that you can ask for the next clue whenever it is most convenient for you.</message>
   </event>

   <event num='8'>
    <comment>Player has Clue #4</comment>
    <checkinventory map='sol/mars' id-name='card' not-found='stop'/>
    <destroyobject where='inventory' map='mars' id-name='card'/>
    <setvariable name='newbod' key='clue' value='five'/>
    <message type='text' where='com' who='individual'>You hand Victor the card. As he puts it on the desk he inadvertently brings his comm unit too close to one of the magnets and there is a CLUNK!!! as it attaches itself to the communicator. "Uh! Excuse me while I get this off," he tells you trying to remove the magnet without damaging the unit. "Let me know when you need another clue."</message>
   </event>

   <event num='9'>
    <comment>Player has Clue #5</comment>
    <checkinventory map='sol/lattice' id-name='hexagon' not-found='stop'/>
    <destroyobject where='inventory' map='lattice' id-name='hexagon'/>
    <setvariable name='newbod' key='clue' value='six'/>
    <message type='text' where='com' who='individual'>Victor stops struggling with the magnet, which now seems to be attached, through the cloth, to something metallic in an inside pocket. He desists long enough to take the hexagon and tick off his list. You can get the next clue by asking Victor for it.</message>
   </event>

   <event num='10'>
    <comment>Player has Clue #6</comment>
    <checkinventory map='sol/rhea' id-name='asparagus' not-found='stop'/>
    <destroyobject where='inventory' map='rhea' id-name='asparagus'/>
    <setvariable name='newbod' key='clue' value='seven'/>
    <message type='text' where='com' who='individual'>A large security droid is looming over Victor. It seems his struggle with the magnet generated a powerful electro-magnetic field which wiped his ID and he is now considered to be a security threat. He takes your asparagus rather sheepishly and crosses off another clue on his list.</message>
   </event>

   <event num='11'>
    <comment>Player has Clue #7</comment>
    <checkinventory map='sol/pearl' id-name='string' not-found='stop'/>
    <destroyobject where='inventory' map='pearl' id-name='string'/>
    <setvariable name='newbod' key='clue' value='eight'/>
    <message type='text' where='com' who='individual'>A spear of asparagus screams in A# as an errant child grabs it and takes a bite. Victor takes your red silk string. He looks as though he is about to use the string to strangle the child when it scuttles off out of his reach. Sighing Victor marks off another clue on your report card.</message>
   </event>

   <event num='12'>
    <comment>Player has Clue #8</comment>
    <checkinventory map='sol/earth' id-name='purple seal' not-found='stop'/>
    <destroyobject where='inventory' map='earth' id-name='purple seal'/>
    <setvariable name='newbod' key='clue' value='nine'/>
    <message type='text' where='com' who='individual'>Victor takes the seal and places it in his desk drawer. You notice that the security droid seems to have got the magnet stuck to its battle steel armour, and suspect this does not bode well...</message>
   </event>

   <event num='13'>
    <comment>Player has Clue #9</comment>
    <checkinventory map='sol/magrathea' id-name='certificate' not-found='stop'/>
    <destroyobject where='inventory' map='magrathea' id-name='certificate'/>
    <setvariable name='newbod' key='clue' value='ten'/>
    <message type='text' where='com' who='individual'>Victor takes the certificate and ticks off another clue. The security droid has a number of deep scratches in its armor. It has been trying to lever off the magnet with a crowbar, but the crowbar is now also stuck to the magnet!</message>
   </event>

   <event num='14'>
    <comment>Player has Clue #10</comment>
    <checkinventory map='sol/venus' id-name='firestone' not-found='stop'/>
    <destroyobject where='inventory' map='venus' id-name='firestone'/>
    <setvariable name='newbod' key='clue' value='eleven'/>
    <message type='text' where='com' who='individual'>Victor takes the firestone very gingerly. He is obviously not used to handling such expensive items. He looks relieved when he has it locked away safely in his desk drawer. He ticks off the clue on his paper list - the comm unit, looking battered from the struggle to remove the magnet, won&apos;t function with his wiped ID.</message>
   </event>

   <event num='15'>
    <comment>Player has Clue #11</comment>
    <checkinventory map='sol/brass' id-name='sample' not-found='stop'/>
    <destroyobject where='inventory' map='brass' id-name='sample'/>
    <setvariable name='newbod' key='clue' value='twelve'/>
    <message type='multi' where='com' who='individual' lo='newbod.exhibition.1' hi='newbod.exhibition.5'/>
   </event>

   <event num='16'>
    <comment>Player has Clue #12</comment>
    <checkinventory map='sol/moon' id-name='casino chip' not-found='stop'/>
    <destroyobject where='inventory' map='moon' id-name='casino chip'/>
    <setvariable name='newbod' key='clue' value='thirteen'/>
    <message type='text' where='com' who='individual'>There are now two burned out, foam-covered security droids. Victor sighs. "I tried to stop it - it came looking for the first droid and the first thing it did was to pull the magnet off the burned out one..." He takes the casino chip and ticks his list. "Only two more clues to go," he tells you.</message>
   </event>

   <event num='17'>
    <comment>Player has Clue #13</comment>
    <checkinventory map='sol/phobos' id-name='flower' not-found='stop'/>
    <destroyobject where='inventory' map='phobos' id-name='flower'/>
    <setvariable name='newbod' key='clue' value='fourteen'/>
    <message type='text' where='com' who='individual'>You stop in your tracks at the door - from where you stand you can count 18 dead droids. Wading through the hip-deep fire retardant foam you make it to Victor&apos;s desk. He takes the flower and ticks off the clue. He looks too shell shocked to even comment on the foam-covered droids.</message>
   </event>

   <event num='18'>
    <comment>Player has Clue #14</comment>
    <checkinventory map='sol/sumatra' id-name='expresso bulb' not-found='stop'/>
    <destroyobject where='inventory' map='sumatra' id-name='expresso bulb'/>
    <setvariable name='newbod' key='clue' value='fifteen'/>
    <message type='multi' where='com' who='individual' lo='newbod.exhibition.6' hi='newbod.exhibition.11'/>
   </event>

  </section>

  <section name='victor'>

   <event num='1'>
    <comment>talk to victor</comment>
    <match phrase='hello' id-name='obj_victor' lo='newbod.victor.1'/>
    <match phrase='bye' id-name='obj_victor' lo='newbod.victor.3'/>
    <match phrase='job' id-name='obj_victor' lo='newbod.victor.4'/>
    <match phrase='work' id-name='obj_victor' lo='newbod.victor.4'/>
    <match phrase='earth' id-name='obj_victor' lo='newbod.victor.5'/>
    <match phrase='selena' id-name='obj_victor' lo='newbod.victor.6'/>
    <match phrase='moon' id-name='obj_victor' lo='newbod.victor.6'/>
    <match phrase='exhibition' id-name='obj_victor' lo='newbod.victor.7'/>
    <match phrase='where' id-name='obj_victor' lo='newbod.victor.7'/>
    <match phrase='ming' id-name='obj_victor' lo='newbod.victor.8'/>
    <match phrase='magellan' id-name='obj_victor' lo='newbod.victor.9' hi='newbod.victor.10'/>
    <match phrase='society' id-name='obj_victor' lo='newbod.victor.9' hi='newbod.victor.10'/>
    <match phrase='test' id-name='obj_victor' lo='newbod.victor.11' hi='newbod.victor.14'/>
    <match phrase='clue' id-name='obj_victor' event='newbod.victor.2'/>
    <match phrase='snark' id-name='obj_victor' event='snark.pasteboard.1'/>
    <match phrase='thank you' id-name='obj_victor' lo='newbod.victor.32'/>
    <nomatch id-name='obj_victor' lo='newbod.victor.2'/>
   </event>

   <event num='2'>
    <comment>player asks for a clue - check if has already completed puzzle</comment>
    <checkflag who='individual' flag ='newbod'  set='newbod.victor.3' unset='newbod.victor.4'/>
   </event>

   <event num='3'>
    <comment>player already completed the newbod puzzle</comment>
    <message type='single' where='com' who='individual' lo='newbod.victor.15'/>
   </event>

   <event num='4'>
    <comment>see how far the player has got and give out the next clue</comment>
    <checkvariable name='newbod' key='clue' value='fifteen' equals='newbod.victor.41'/>
    <checkvariable name='newbod' key='clue' value='fourteen' equals='newbod.victor.39'/>
    <checkvariable name='newbod' key='clue' value='thirteen' equals='newbod.victor.37'/>
    <checkvariable name='newbod' key='clue' value='twelve' equals='newbod.victor.35'/>
    <checkvariable name='newbod' key='clue' value='eleven' equals='newbod.victor.33'/>
    <checkvariable name='newbod' key='clue' value='ten' equals='newbod.victor.31'/>
    <checkvariable name='newbod' key='clue' value='nine' equals='newbod.victor.29'/>
    <checkvariable name='newbod' key='clue' value='eight' equals='newbod.victor.27'/>
    <checkvariable name='newbod' key='clue' value='seven' equals='newbod.victor.25'/>
    <checkvariable name='newbod' key='clue' value='six' equals='newbod.victor.22'/>
    <checkvariable name='newbod' key='clue' value='five' equals='newbod.victor.19'/>
    <checkvariable name='newbod' key='clue' value='four' equals='newbod.victor.16'/>
    <checkvariable name='newbod' key='clue' value='three' equals='newbod.victor.12'/>
    <checkvariable name='newbod' key='clue' value='two' equals='newbod.victor.9'/>
    <checkvariable name='newbod' key='clue' value='one' equals='newbod.victor.5'/>
    <checkvariable name='newbod' key='clue' value='unknown' equals='newbod.victor.8'/>
   </event>

   <event num='5'>
    <comment>Clue #1 - see if player is captain/commander</comment>
    <checkstat who='individual' rank='2' higher='newbod.victor.7' equals='newbod.victor.6' lower='newbod.victor.6'/>
   </event>

   <event num='6'>
    <comment>Clue #1 - give planet name</comment>
    <message type='text' where='com' who='individual'>"The solution to the first clue is on the asteroid known as Silk."</message>
    <call event='newbod.victor.7'/>
   </event>

   <event num='7'>
    <comment>Hand out clue #1</comment>
    <message type='single' where='com' who='individual' lo='newbod.victor.16'/>
   </event>

   <event num='8'>
    <comment>Start of puzzle - set variable and call for clues again (loops round)</comment>
    <setvariable name='newbod' key='clue' value='one'/>
    <call event='newbod.victor.4'/>
   </event>

   <event num='9'>
    <comment>Clue #2 - see if player is captain/commander</comment>
    <checkstat who='individual' rank='2' higher='newbod.victor.11' equals='newbod.victor.10' lower='newbod.victor.10'/>
   </event>

   <event num='10'>
    <comment>Clue #2 - give planet name</comment>
    <message type='text' where='com' who='individual'>"The solution to the second clue is on Titan, one of the moons of Saturn."</message>
    <call event='newbod.victor.11'/>
   </event>

   <event num='11'>
    <comment>Clue #2</comment>
    <message type='single' where='com' who='individual' lo='newbod.victor.17'/>
   </event>

   <event num='12'>
    <comment>Clue #3 - see if player is captain/commander</comment>
    <checkstat who='individual' rank='2' higher='newbod.victor.14' equals='newbod.victor.13' lower='newbod.victor.13'/>
   </event>

   <event num='13'>
    <comment>Clue #3 - give planet name</comment>
    <message type='text' where='com' who='individual'>"The solution to the third clue can be found on Mercury."</message>
    <call event='newbod.victor.14'/>
   </event>

   <event num='14'>
    <comment>Clue #3</comment>
    <message type='single' where='com' who='individual' lo='newbod.victor.18'/>
   </event>

   <event num='16'>
    <comment>Clue #4 - see if player is captain/commander</comment>
    <checkstat who='individual' rank='2' higher='newbod.victor.18' equals='newbod.victor.17' lower='newbod.victor.17'/>
   </event>

   <event num='17'>
    <comment>Clue #4 - give planet name</comment>
    <message type='text' where='com' who='individual'>"The solution to the next clue can be found on Mars."</message>
    <call event='newbod.victor.18'/>
   </event>

   <event num='18'>
    <comment>Clue #4</comment>
    <message type='single' where='com' who='individual' lo='newbod.victor.19'/>
   </event>

   <event num='19'>
    <comment>Clue #5 - see if player is captain/commander</comment>
    <checkstat who='individual' rank='2' higher='newbod.victor.21' equals='newbod.victor.20' lower='newbod.victor.20'/>
   </event>

   <event num='20'>
    <comment>Clue #5 - give planet name</comment>
    <message type='text' where='com' who='individual'>"The solution to the next clue can be found on the Lattice asteroid."</message>
    <call event='newbod.victor.21'/>
   </event>

   <event num='21'>
    <comment>Clue #5</comment>
    <message type='single' where='com' who='individual' lo='newbod.victor.20'/>
   </event>

   <event num='22'>
    <comment>Clue #6 - see if player is captain/commander</comment>
    <checkstat who='individual' rank='2' higher='newbod.victor.24' equals='newbod.victor.23' lower='newbod.victor.23'/>
   </event>

   <event num='23'>
    <comment>Clue #6 - give planet name</comment>
    <message type='text' where='com' who='individual'>"The solution to the next clue can be found on Rhea."</message>
    <call event='newbod.victor.24'/>
   </event>

   <event num='24'>
    <comment>Clue #6</comment>
    <message type='single' where='com' who='individual' lo='newbod.victor.21'/>
   </event>

   <event num='25'>
    <comment>Clue #7 - see if player is captain/commander &amp; give clue</comment>
    <checkstat who='individual' rank='2' equals='newbod.victor.26' lower='newbod.victor.26'/>
    <message type='multi' where='com' who='individual' lo='newbod.victor.22' hi='newbod.victor.24'/>
   </event>

   <event num='26'>
    <comment>Clue #7 - give planet name</comment>
    <message type='text' where='com' who='individual'>"The solution to the next clue can be found on Pearl."</message>
   </event>

   <event num='27'>
    <comment>Clue #8 - see if player is captain/commander &amp; give clue</comment>
    <checkstat who='individual' rank='2' equals='newbod.victor.28' lower='newbod.victor.28'/>
    <message type='single' where='com' who='individual' lo='newbod.victor.25'/>
   </event>

   <event num='28'>
    <comment>Clue #8 - give planet name</comment>
    <message type='text' where='com' who='individual'>"The solution to the next clue can be found here on Earth..."</message>
   </event>

   <event num='29'>
    <comment>Clue #9 - see if player is captain/commander &amp; give clue</comment>
    <checkstat who='individual' rank='2' equals='newbod.victor.30' lower='newbod.victor.30'/>
    <message type='single' where='com' who='individual' lo='newbod.victor.26'/>
   </event>

   <event num='30'>
    <comment>Clue #9 - give planet name</comment>
    <message type='text' where='com' who='individual'>"The solution to the next clue can be found in the depths of space, on Magrathea."</message>
   </event>

   <event num='31'>
    <comment>Clue #10 - see if player is captain/commander &amp; give clue</comment>
    <checkstat who='individual' rank='2' equals='newbod.victor.32' lower='newbod.victor.32'/>
    <message type='single' where='com' who='individual' lo='newbod.victor.27'/>
   </event>

   <event num='32'>
    <comment>Clue #10 - give planet name</comment>
    <message type='text' where='com' who='individual'>"The solution to the next clue can be found a little closer to home, on Venus."</message>
   </event>

   <event num='33'>
    <comment>Clue #11 - see if player is captain/commander &amp; give clue</comment>
    <checkstat who='individual' rank='2' equals='newbod.victor.34' lower='newbod.victor.34'/>
    <message type='single' where='com' who='individual' lo='newbod.victor.28'/>
   </event>

   <event num='34'>
    <comment>Clue #11 - give planet name</comment>
    <message type='text' where='com' who='individual'>"The solution to the next clue can be found in the asteroid belt - on Brass."</message>
   </event>

   <event num='35'>
    <comment>Clue #12 - see if player is captain/commander &amp; give clue</comment>
    <checkstat who='individual' rank='2' equals='newbod.victor.36' lower='newbod.victor.36'/>
    <message type='single' where='com' who='individual' lo='newbod.victor.29'/>
   </event>

   <event num='36'>
    <comment>Clue #12 - give planet name</comment>
    <message type='text' where='com' who='individual'>"The solution to the next clue can be found not far from here - on the Moon, in Selena."</message>
   </event>

   <event num='37'>
    <comment>Clue #13 - see if player is captain/commander &amp; give clue</comment>
    <checkstat who='individual' rank='2' equals='newbod.victor.38' lower='newbod.victor.38'/>
    <message type='single' where='com' who='individual' lo='newbod.victor.30'/>
   </event>

   <event num='38'>
    <comment>Clue #13 - give planet name</comment>
    <message type='text' where='com' who='individual'>"The solution to the next clue can be found on Phobos."</message>
   </event>

   <event num='39'>
    <comment>Clue #14 - see if player is captain/commander &amp; give clue</comment>
    <checkstat who='individual' rank='2' equals='newbod.victor.40' lower='newbod.victor.40'/>
    <message type='single' where='com' who='individual' lo='newbod.victor.31'/>
   </event>

   <event num='40'>
    <comment>Clue #14 - give planet name</comment>
    <message type='text' where='com' who='individual'>"The solution to the final clue can be found on Sumatra."</message>
   </event>

   <event num='41'>
    <comment>Tell the player to go to Magellan</comment>
    <message type='text' where='com' who='individual'>Victor explains that you have successfully completed the test. To claim your membership you need to go to the Magellan space station and see the president of the Magellan Society, who will handle the necessary bureaucracy.</message>
   </event>

  </section>

 </category>

 <category name='objects'>

  <section name='abouquet'>

   <event num='1'>
    <comment>player takes a bouquet from the flower girl</comment>
    <message type='text' where='com' who='individual'>You smile at the girl and take the proffered bouquet.</message>
    <createobject where='inventory' home-map='sol/earth' id='obj_bouquet'/>
   </event>

  </section>

  <section name='bond'>

   <event num='1'>
    <comment>player wants to promote to merchant</comment>
    <checkstat who='individual' rank='4' higher='objects.bond.2' equals='objects.bond.3' lower='objects.bond.2'/>
   </event>

   <event num='2'>
    <comment>wrong rank</comment>
    <message type='single' where='com' who='individual' lo='objects.bond.1'/>
   </event>

   <event num='3'>
    <comment>check for merchant ranking</comment>
    <checkstat who='individual' tc='800' higher='objects.bond.5' equals='objects.bond.5' lower='objects.bond.4'/>
   </event>

   <event num='4'>
    <comment>not enuf credits</comment>
    <message type='single' where='com' who='individual' lo='objects.bond.2'/>
   </event>

   <event num='5'>
    <comment>check for cash</comment>
    <checkstat who='individual' money='400000' higher='objects.bond.7' equals='objects.bond.7' lower='objects.bond.6'/>
   </event>

   <event num='6'>
    <comment>not enuff cash</comment>
    <message type='single' where='com' who='individual' lo='objects.bond.3'/>
   </event>

   <event num='7'>
    <comment>has enuff cash - take the bond money and promote</comment>
    <message type='single' where='com' who='individual' lo='objects.bond.4'/>
    <changestat who='individual' money='-400000' change='add' cur-max='current'/>
    <changestat who='individual' rank='5' change='set' cur-max='current'/>
   </event>

  </section>

  <section name='bone'>

   <event num='1'>
    <comment>Get bone - Orrans Ox Roast - 1602 - Check inventory</comment>
    <checkinventory map='sol/earth' id-name='wishbone' found='objects.bone.2' not-found='objects.bone.3'/>
   </event>

   <event num='2'>
    <comment>Already got a bone</comment>
    <message type='single' where='com' who='individual' lo='objects.bone.1'/>
   </event>

   <event num='3'>
    <comment>Give the player a bone</comment>
    <message type='single' where='com' who='individual' lo='objects.bone.2'/>
    <createobject where='inventory' home-map='sol/earth' id='obj_wishbone'/>
   </event>

   <event num='4'>
    <comment>Drop wishbone</comment>
    <message type='single' where='com' who='individual' lo='objects.bone.3'/>
    <message type='single' where='com' who='room_ex' lo='objects.bone.4'/>
    <destroyobject where='inventory' map='home' id-name='wishbone'/>
   </event>

   <event num='5'>
    <comment>Lick/eat wishbone</comment>
    <message type='single' where='com' who='individual' lo='objects.bone.5'/>
   </event>

   <event num='6'>
    <comment>Pull wishbone</comment>
    <message type='single' where='com' who='individual' lo='objects.bone.6'/>
    <message type='single' where='com' who='room_ex' lo='objects.bone.7'/>
    <destroyobject where='inventory' map='home' id-name='wishbone'/>
    <call event='objects.bone.random[7-8]'/>
   </event>

   <event num='7'>
    <comment>Wishbone - player does not get a wish</comment>
    <message type='single' where='com' who='individual' lo='objects.bone.8'/>
    <message type='single' where='com' who='room_ex' lo='objects.bone.9'/>
   </event>

   <event num='8'>
    <comment>Wishbone - player does get a wish</comment>
    <message type='single' where='com' who='individual' lo='objects.bone.10'/>
    <message type='single' where='com' who='room_ex' lo='objects.bone.11'/>
   </event>

  </section>

  <section name='boss'>

   <event num='1'>
    <comment>talk to boss</comment>
    <match phrase='hello' id-name='obj_boss' lo='objects.boss.1'/>
    <match phrase='bye' id-name='obj_boss' lo='objects.boss.2'/>
    <match phrase='job' id-name='obj_boss' lo='objects.boss.3'/>
    <match phrase='work' id-name='obj_boss' lo='objects.boss.3'/>
    <match phrase='gaelaan' id-name='obj_boss' lo='objects.boss.4' hi='objects.boss.5'/>
    <match phrase='galactic admin' id-name='obj_boss' lo='objects.boss.6'/>
    <match phrase='zoning' id-name='obj_boss' lo='objects.boss.7'/>
    <match phrase='planning' id-name='obj_boss' lo='objects.boss.8'/>
    <match phrase='bribe' id-name='obj_boss' lo='objects.boss.9'/>
    <match phrase='backhander' id-name='obj_boss' lo='objects.boss.9'/>
    <match phrase='worthy' id-name='obj_boss' lo='objects.boss.10' hi='objects.boss.11'/>
    <match phrase='warehouse' id-name='obj_boss' event='objects.boss.2'/>
    <match phrase='depot' id-name='obj_boss' event='objects.boss.3'/>
    <match phrase='storage' id-name='obj_boss' event='objects.boss.4'/>
    <match phrase='factory' id-name='obj_boss' lo='objects.boss.18' hi='objects.boss.19'/>
    <match phrase='permit' id-name='obj_boss' lo='objects.boss.12' hi='objects.boss.13'/>
    <nomatch id-name='obj_boss' lo='objects.boss.21'/>
   </event>

   <event num='2'>
    <comment>keyword warehouse</comment>
    <message type='single' where='com' who='individual' lo='objects.boss.14'/>
    <message type='single' where='com' who='individual' lo='objects.boss.20'/>
   </event>

   <event num='3'>
    <comment>keyword depot</comment>
    <message type='multi' where='com' who='individual' lo='objects.boss.15' hi='objects.boss.16'/>
    <message type='single' where='com' who='individual' lo='objects.boss.20'/>
   </event>

   <event num='4'>
    <comment>keyword storage</comment>
    <message type='single' where='com' who='individual' lo='objects.boss.17'/>
    <message type='single' where='com' who='individual' lo='objects.boss.20'/>
   </event>

   <event num='5'>
    <comment>player tries to directly bribe the boss</comment>
    <message type='single' where='com' who='individual' lo='objects.boss.22'/>
   </event>

  </section>

  <section name='bouquet'>

   <event num='1'>
    <comment>call up a random description</comment>
    <call event='objects.bouquet.random[2-10]'/>
   </event>

   <event num='2'>
    <comment>gold</comment>
    <message type='text' where='com' who='individual'>The bouquet of roses shimmers and each bloom changes color to gold.</message>
   </event>

   <event num='3'>
    <comment>silver</comment>
    <message type='text' where='com' who='individual'>The bouquet of roses shimmers and each bloom changes color to silver.</message>
   </event>

   <event num='4'>
    <comment>white</comment>
    <message type='text' where='com' who='individual'>The bouquet of roses shimmers and each bloom changes color to white.</message>
   </event>

   <event num='5'>
    <comment>black</comment>
    <message type='text' where='com' who='individual'>The bouquet of roses shimmers and each bloom changes color to black.</message>
   </event>

   <event num='6'>
    <comment>red</comment>
    <message type='text' where='com' who='individual'>The bouquet of roses shimmers and each bloom changes color to red.</message>
   </event>

   <event num='7'>
    <comment>yellow</comment>
    <message type='text' where='com' who='individual'>The bouquet of roses shimmers and each bloom changes color to saffron.</message>
   </event>

   <event num='8'>
    <comment>green</comment>
    <message type='text' where='com' who='individual'>The bouquet of roses shimmers and each bloom changes color to a pale green.</message>
   </event>

   <event num='9'>
    <comment>blue</comment>
    <message type='text' where='com' who='individual'>The bouquet of roses shimmers and each bloom changes color to a deep azure.</message>
   </event>

   <event num='10'>
    <comment>amber</comment>
    <message type='text' where='com' who='individual'>The bouquet of roses shimmers and each bloom changes color to a transulent amber.</message>
   </event>

  </section>

  <section name='bust'>

   <event num='1'>
    <comment>GET event on bust - object in loc 1038</comment>
    <message type='single' where='com' who='individual' lo='objects.bust.1'/>
   </event>

  </section>

  <section name='card'>

   <event num='1'>
    <comment>drop event on calling card from police box</comment>
    <destroyobject where='inventory' map='home' id-name='card'/>
    <message type='single' where='com' who='individual' lo='objects.card.1'/>
   </event>

  </section>

  <section name='catnip'>

   <event num='1'>
    <comment>Drop catnip</comment>
    <message type='single' where='com' who='individual' lo='objects.catnip.1'/>
    <destroyobject where='inventory' map='home' id-name='catnip'/>
   </event>

   <event num='2'>
    <comment>Smell catnip</comment>
    <message type='single' where='com' who='individual' lo='objects.catnip.2'/>
    <message type='single' where='com' who='room_ex' lo='objects.catnip.3'/>
    <destroyobject where='inventory' map='home' id-name='catnip'/>
   </event>

   <event num='3'>
    <comment>eat catnip</comment>
    <message type='single' where='com' who='individual' lo='objects.catnip.4'/>
    <message type='single' where='com' who='room_ex' lo='objects.catnip.5'/>
    <destroyobject where='inventory' map='home' id-name='catnip'/>
   </event>

  </section>

  <section name='chad'>

   <event num='1'>
    <comment>Fabricate vote reward - check if they are staff</comment>
    <checkflag who='individual' flag ='staff'  set='objects.chad.3' unset='objects.chad.2'/>
   </event>

   <event num='2'>
    <comment>Not staff</comment>
    <message type='single' where='com' who='individual' lo='objects.chad.1'/>
   </event>

   <event num='3'>
    <comment>Create chad</comment>
    <message type='single' where='com' who='individual' lo='objects.chad.2'/>
    <message type='single' where='com' who='room_ex' lo='objects.chad.3'/>
    <createobject where='inventory' home-map='sol/earth' id='obj_chad'/>
   </event>

   <event num='4'>
    <comment>Swing chad</comment>
    <message type='single' where='com' who='individual' lo='objects.chad.4'/>
    <message type='single' where='com' who='room_ex' lo='objects.chad.5'/>
   </event>

   <event num='5'>
    <comment>Drop chad</comment>
    <message type='single' where='com' who='individual' lo='objects.chad.6'/>
    <message type='single' where='com' who='room_ex' lo='objects.chad.7'/>
    <destroyobject where='inventory' map='home' id-name='chad'/>
   </event>

   <event num='6'>
    <comment>Eat chad</comment>
    <message type='single' where='com' who='individual' lo='objects.chad.8'/>
    <message type='single' where='com' who='room_ex' lo='objects.chad.9'/>
    <destroyobject where='inventory' map='home' id-name='chad'/>
   </event>

  </section>

  <section name='comm'>

   <event num='1'>
    <comment>Fabricate communicator - in Lucky 7 - loc 1479</comment>
    <checkflag who='individual' flag ='staff'  set='objects.comm.3' unset='objects.comm.2'/>
   </event>

   <event num='2'>
    <comment>Not staff</comment>
    <message type='single' where='com' who='individual' lo='objects.comm.1'/>
   </event>

   <event num='3'>
    <comment>Staff - so create the comm unit</comment>
    <message type='single' where='com' who='individual' lo='objects.comm.2'/>
    <message type='single' where='com' who='room_ex' lo='objects.comm.3'/>
    <createobject where='inventory' home-map='sol/earth' id='obj_communit'/>
   </event>

   <event num='4'>
    <comment>Drop comm unit</comment>
    <message type='single' where='com' who='individual' lo='objects.comm.4'/>
    <message type='single' where='com' who='room_ex' lo='objects.comm.5'/>
    <destroyobject where='inventory' map='home' id-name='comm unit'/>
   </event>

   <event num='5'>
    <comment>Shake comm unit - select random response</comment>
    <call event='objects.comm.random[6-13]'/>
   </event>

   <event num='6'>
    <comment>Shake comm unit - option 1</comment>
    <message type='single' where='com' who='individual' lo='objects.comm.6'/>
    <message type='single' where='com' who='room_ex' lo='objects.comm.7'/>
   </event>

   <event num='7'>
    <comment>Shake comm unit - option 2</comment>
    <message type='single' where='com' who='individual' lo='objects.comm.8'/>
    <message type='single' where='com' who='room_ex' lo='objects.comm.9'/>
   </event>

   <event num='8'>
    <comment>Shake comm unit - option 3</comment>
    <message type='single' where='com' who='individual' lo='objects.comm.10'/>
    <message type='single' where='com' who='room_ex' lo='objects.comm.11'/>
   </event>

   <event num='9'>
    <comment>Shake comm unit - option 4</comment>
    <message type='single' where='com' who='individual' lo='objects.comm.12'/>
    <message type='single' where='com' who='room_ex' lo='objects.comm.13'/>
   </event>

   <event num='10'>
    <comment>Shake comm unit - option 5</comment>
    <message type='single' where='com' who='individual' lo='objects.comm.14'/>
    <message type='single' where='com' who='room_ex' lo='objects.comm.15'/>
   </event>

   <event num='11'>
    <comment>Shake comm unit - option 6</comment>
    <message type='single' where='com' who='individual' lo='objects.comm.16'/>
    <message type='single' where='com' who='room_ex' lo='objects.comm.17'/>
   </event>

   <event num='12'>
    <comment>Shake comm unit - option 7</comment>
    <message type='single' where='com' who='individual' lo='objects.comm.18'/>
    <message type='single' where='com' who='room_ex' lo='objects.comm.19'/>
   </event>

   <event num='13'>
    <comment>Shake comm unit - option 8</comment>
    <message type='single' where='com' who='individual' lo='objects.comm.20'/>
    <message type='single' where='com' who='room_ex' lo='objects.comm.21'/>
   </event>

  </section>

  <section name='complaints'>

   <event num='1'>
    <comment>Player complains to the clerk in room 718</comment>
    <message type='multi' where='com' who='individual' lo='objects.complaints.1' hi='objects.complaints.7'/>
   </event>

  </section>

  <section name='control'>

   <event num='1'>
    <comment>one control</comment>
    <setvariable name='graveyard' key='puzzle' value='finish' temporary='true'/>
   </event>

   <event num='2'>
    <comment>two control</comment>
    <setvariable name='graveyard' key='puzzle' value='reward' temporary='true'/>
   </event>

  </section>

  <section name='depotpermit'>

   <event num='1'>
    <comment>buy depot permit - check rank</comment>
    <checkstat who='individual' rank='6' higher='objects.depotpermit.3' equals='objects.depotpermit.3' lower='objects.depotpermit.2'/>
   </event>

   <event num='2'>
    <comment>wrong rank</comment>
    <message type='text' where='com' who='individual'>You need to be at least an industrialist to buy a depot permit!</message>
   </event>

   <event num='3'>
    <comment>check cash</comment>
    <checkstat who='individual' c-money='1000000' higher='objects.depotpermit.5' equals='objects.depotpermit.5' lower='objects.depotpermit.4'/>
   </event>

   <event num='4'>
    <comment>insufficient cash</comment>
    <message type='text' where='com' who='individual'>The boss checks your bank account and shakes his head. "You need at a megagroat to apply for a depot permit," he tells you.</message>
   </event>

   <event num='5'>
    <comment>check for a slithy</comment>
    <checkslithy value='1' pass='objects.depotpermit.7' fail='objects.depotpermit.6'/>
   </event>

   <event num='6'>
    <comment>no slithy</comment>
    <message type='text' where='com' who='individual'>The boss shakes his head slowly. "You haven&apos;t really done anything to prove yourself worthy of a depot permit," he tells you. A passing clerk tips you off that you need to have a slithy as well, if you want the boss to issue the permit.</message>
   </event>

   <event num='7'>
    <comment>do we already have a depot permit?</comment>
    <checkflag who='individual' flag ='depot-permit'  set='objects.depotpermit.8' unset='objects.depotpermit.9'/>
   </event>

   <event num='8'>
    <comment>the dork already has a depot permit</comment>
    <message type='text' where='com' who='individual'>The boss stops processing your application when he realises that you already have a depot permit. Scowling he fines you 5,000ig on the spot for wasting Galactic Administration time.</message>
    <changestat who='individual' money='-5000' change='add' cur-max='current'/>
   </event>

   <event num='9'>
    <comment>everything OK - let&apos;s go</comment>
    <message type='text' where='com' who='individual'>With a sigh you pass over the application, with a certificate of slithy tove ownership hidden underneath it. The boss smirks, rapidly processes the application and transmits the permit to your company.</message>
    <changestat who='individual' c-money='-1000000' change='add' cur-max='current'/>
    <changeslithy value='-1' change='add'/>
    <flipflag who='individual' flag ='depot-permit'/>
    <log>SLITHY: %s - depot_permit.</log>
   </event>

  </section>

  <section name='dumpster'>

   <event num='1'>
    <comment>Open dumpster - object ion loc 1040</comment>
    <message type='single' where='com' who='individual' lo='objects.dumpster.1'/>
    <message type='single' where='com' who='room_ex' lo='objects.dumpster.2'/>
   </event>

  </section>

  <section name='factorypermit'>

   <event num='1'>
    <comment>buy factory permit - check rank</comment>
    <checkstat who='individual' rank='7' higher='objects.factorypermit.3' equals='objects.factorypermit.3' lower='objects.factorypermit.2'/>
   </event>

   <event num='2'>
    <comment>wrong rank</comment>
    <message type='text' where='com' who='individual'>You need to be at least a manufacturer to buy a factory permit.</message>
   </event>

   <event num='3'>
    <comment>check cash</comment>
    <checkstat who='individual' c-money='5000000' higher='objects.factorypermit.5' equals='objects.factorypermit.5' lower='objects.factorypermit.4'/>
   </event>

   <event num='4'>
    <comment>not enuff cash</comment>
    <message type='text' where='com' who='individual'>The boss checks your company&apos;s account and shakes his head. "Your company needs five megagroats in the bank before you can apply for a factory permit."</message>
   </event>

   <event num='5'>
    <comment>check slithies</comment>
    <checkslithy value='2' pass='objects.factorypermit.7' fail='objects.factorypermit.6'/>
   </event>

   <event num='6'>
    <comment>insufficient slithies</comment>
    <message type='text' where='com' who='individual'>The boss looks very lugubrious. "Very difficult," he says. "You really need to prove your worth before I can issue factory permits. I have to justify it to the unions, you know." A passing clerk tips you off that you need to have two slithy toves as well, if you want the permit issued.</message>
   </event>

   <event num='7'>
    <comment>do we have a factory permit already?</comment>
    <checkflag who='individual' flag ='factory-permit'  set='objects.factorypermit.8' unset='objects.factorypermit.9'/>
   </event>

   <event num='8'>
    <comment>we do have a permit already...</comment>
    <message type='text' where='com' who='individual'>The boss is not happy with you. You already have a permit, he has just found out. Thoroughly annoyed, he fines you 8,000ig on the spot for wasting Galactic Administration time.</message>
    <changestat who='individual' money='-8000' change='add' cur-max='current'/>
   </event>

   <event num='9'>
    <comment>all OK - issue the permit</comment>
    <message type='text' where='com' who='individual'>One day, you vow to yourself you will get even. But for now you just fold a certificate of ownership of a mimsy borogove into the application and hand it to the boss. He opens it and a smirk spreads across his face. He rapidly processes the application and transmits the permit to your company. He shakes your hand. "A pleasure to do business," he tells you, ignoring your scowl.</message>
    <changestat who='individual' c-money='-5000000' change='add' cur-max='current'/>
    <changeslithy value='-2' change='add'/>
    <flipflag who='individual' flag ='factory-permit'/>
    <log>SLITHY: %s - factory_permit.</log>
   </event>

  </section>

  <section name='helpbutton'>

   <event num='1'>
    <comment>Help messages - press button in Meeting Point, loc 390 - 1</comment>
    <message type='single' where='loc' who='individual' lo='objects.helpbutton.1'/>
    <delayevent delay='5' event='objects.helpbutton.2'/>
   </event>

   <event num='2'>
    <comment>Help messages - press button in Meeting Point, loc 390 - 2</comment>
    <checkmap map='home'  fail='stop' loc='390'/>
    <message type='single' where='loc' who='individual' lo='objects.helpbutton.2'/>
    <delayevent delay='10' event='objects.helpbutton.3'/>
   </event>

   <event num='3'>
    <comment>Help messages - press button in Meeting Point, loc 390 - 3</comment>
    <checkmap map='home'  fail='stop' loc='390'/>
    <message type='single' where='loc' who='individual' lo='objects.helpbutton.3'/>
    <delayevent delay='10' event='objects.helpbutton.4'/>
   </event>

   <event num='4'>
    <comment>Help messages - press button in Meeting Point, loc 390 - 4</comment>
    <checkmap map='home'  fail='stop' loc='390'/>
    <message type='single' where='loc' who='individual' lo='objects.helpbutton.4'/>
    <delayevent delay='12' event='objects.helpbutton.5'/>
   </event>

   <event num='5'>
    <comment>Help messages - press button in Meeting Point, loc 390 - 5</comment>
    <checkmap map='home'  fail='stop' loc='390'/>
    <message type='single' where='loc' who='individual' lo='objects.helpbutton.5'/>
    <delayevent delay='12' event='objects.helpbutton.6'/>
   </event>

   <event num='6'>
    <comment>Help messages - press button in Meeting Point, loc 390 - 6</comment>
    <checkmap map='home'  fail='stop' loc='390'/>
    <message type='single' where='loc' who='individual' lo='objects.helpbutton.6'/>
    <delayevent delay='10' event='objects.helpbutton.7'/>
   </event>

   <event num='7'>
    <comment>Help messages - press button in Meeting Point, loc 390 - 7</comment>
    <checkmap map='home'  fail='stop' loc='390'/>
    <message type='multi' where='loc' who='individual' lo='objects.helpbutton.7' hi='objects.helpbutton.8'/>
   </event>

  </section>

  <section name='herbs'>

   <event num='1'>
    <comment>Pick herbs - backyard - 579</comment>
    <message type='single' where='com' who='individual' lo='objects.herbs.1'/>
    <createobject where='inventory' home-map='sol/earth' id='obj_catnip'/>
   </event>

  </section>

  <section name='kalindra'>

   <event num='1'>
    <comment>Loc 713 - Hagar&apos;s - buy music box</comment>
    <checkstat who='individual' money='100' higher='objects.kalindra.2' equals='objects.kalindra.2' lower='objects.kalindra.3'/>
   </event>

   <event num='2'>
    <comment>Yes they can afford it so create kalindra</comment>
    <changestat who='individual' money='-100' change='add' cur-max='current'/>
    <createobject where='inventory' home-map='home' id='obj_kalindra'/>
    <message type='single' where='com' who='individual' lo='objects.kalindra.1'/>
    <message type='single' where='com' who='room_ex' lo='objects.kalindra.2'/>
   </event>

   <event num='3'>
    <comment>Can&apos;t afford kalindra</comment>
    <message type='single' where='com' who='individual' lo='objects.kalindra.7'/>
   </event>

   <event num='4'>
    <comment>Play kalindra</comment>
    <message type='single' where='com' who='individual' lo='objects.kalindra.3'/>
    <message type='single' where='com' who='room_ex' lo='objects.kalindra.4'/>
   </event>

   <event num='5'>
    <comment>Drop kalindra</comment>
    <message type='single' where='com' who='individual' lo='objects.kalindra.5'/>
    <message type='single' where='com' who='room_ex' lo='objects.kalindra.6'/>
    <destroyobject where='inventory' map='home' id-name='kalindra'/>
   </event>

  </section>

  <section name='manual'>

   <event num='1'>
    <comment>Read manual - object in 656</comment>
    <message type='single' where='com' who='individual' lo='objects.manual.1'/>
   </event>

   <event num='2'>
    <comment>Get manual</comment>
    <message type='single' where='com' who='individual' lo='objects.manual.2'/>
   </event>

  </section>

  <section name='marsrat'>

   <event num='1'>
    <comment>Spot marsrat event - mini-zoo 1172</comment>
    <checkinventory map='sol/mars' id-name='marsrat' not-found='stop'/>
    <destroyobject where='inventory' map='mars' id-name='marsrat'/>
    <message type='single' where='com' who='individual' lo='objects.marsrat.1'/>
    <message type='single' where='com' who='room_ex' lo='objects.marsrat.2'/>
   </event>

   <event num='2'>
    <comment>Spot marsrat event - terminus entrance 456</comment>
    <checkinventory map='sol/mars' id-name='marsrat' not-found='stop'/>
    <message type='single' where='com' who='individual' lo='objects.marsrat.3'/>
   </event>

   <event num='3'>
    <comment>Spot marsrat event - GA HQ 782</comment>
    <checkinventory map='sol/mars' id-name='marsrat' not-found='stop'/>
    <message type='single' where='com' who='individual' lo='objects.marsrat.4'/>
    <move what='player' who='individual' loc='781'/>
   </event>

  </section>

  <section name='net'>

   <event num='1'>
    <comment>Get/take net - WWT shop - 1179</comment>
    <message type='single' where='com' who='individual' lo='objects.net.1'/>
   </event>

   <event num='2'>
    <comment>Buy net - check if they can afford it</comment>
    <checkstat who='individual' money='5' higher='objects.net.4' equals='objects.net.4' lower='objects.net.3'/>
   </event>

   <event num='3'>
    <comment>Not enuff groats for net</comment>
    <message type='single' where='com' who='individual' lo='objects.net.2'/>
   </event>

   <event num='4'>
    <comment>Sell the net</comment>
    <message type='single' where='com' who='individual' lo='objects.net.3'/>
    <createobject where='inventory' home-map='sol/earth' id='obj_butterflynet'/>
    <changestat who='individual' money='-5' change='add' cur-max='current'/>
   </event>

   <event num='5'>
    <comment>Drop butterfly net</comment>
    <message type='single' where='com' who='individual' lo='objects.net.4'/>
    <message type='single' where='com' who='room_ex' lo='objects.net.5'/>
    <destroyobject where='inventory' map='home' id-name='butterfly net'/>
   </event>

   <event num='6'>
    <comment>Use/swing butterfly net - random choice of 5 outcomes</comment>
    <call event='objects.net.random[7-11]'/>
   </event>

   <event num='7'>
    <comment>Butterfly net - option 1 - gender check</comment>
    <message type='single' where='com' who='individual' lo='objects.net.6'/>
    <checkgender male='objects.net.12' female='objects.net.13' neuter='objects.net.14'/>
   </event>

   <event num='8'>
    <comment>Option 2</comment>
    <message type='single' where='com' who='individual' lo='objects.net.10'/>
    <message type='single' where='com' who='room_ex' lo='objects.net.11'/>
   </event>

   <event num='9'>
    <comment>Option 3</comment>
    <message type='single' where='com' who='individual' lo='objects.net.12'/>
    <message type='single' where='com' who='room_ex' lo='objects.net.13'/>
   </event>

   <event num='10'>
    <comment>Option 4</comment>
    <message type='single' where='com' who='individual' lo='objects.net.14'/>
    <message type='single' where='com' who='room_ex' lo='objects.net.15'/>
   </event>

   <event num='11'>
    <comment>Option 5 - gender check</comment>
    <message type='single' where='com' who='individual' lo='objects.net.16'/>
    <checkgender male='objects.net.15' female='objects.net.16' neuter='objects.net.17'/>
   </event>

   <event num='12'>
    <comment>Option 1 - roomex - male</comment>
    <message type='single' where='com' who='room_ex' lo='objects.net.7'/>
   </event>

   <event num='13'>
    <comment>Option 1 - roomex - female</comment>
    <message type='single' where='com' who='room_ex' lo='objects.net.8'/>
   </event>

   <event num='14'>
    <comment>Option 1 - roomex - neuter</comment>
    <message type='single' where='com' who='room_ex' lo='objects.net.9'/>
   </event>

   <event num='15'>
    <comment>Option 5 - roomex - male</comment>
    <message type='single' where='com' who='room_ex' lo='objects.net.17'/>
   </event>

   <event num='16'>
    <comment>Option 5 - roomex - female</comment>
    <message type='single' where='com' who='room_ex' lo='objects.net.18'/>
   </event>

   <event num='17'>
    <comment>Option 5 - roomex - neuter</comment>
    <message type='single' where='com' who='room_ex' lo='objects.net.19'/>
   </event>

  </section>

  <section name='permit'>

   <event num='1'>
    <comment>player asks for a permit wthout saying which one</comment>
    <checkstat who='individual' rank='4' higher='objects.permit.3' equals='objects.permit.3' lower='objects.permit.2'/>
    <message type='text' where='com' who='individual'>You need to say which permit you want to buy - a warehouse permit, a depot permit, a storage permit, or a factory permit.</message>
   </event>

  </section>

  <section name='policebox'>

   <event num='1'>
    <comment>enter police box outside the spaceport</comment>
    <message type='single' where='object' who='individual' lo='objects.policebox.1' id-name='obj_policebox'/>
    <checkinventory map='home' id-name='card' not-found='objects.policebox.2'/>
   </event>

   <event num='2'>
    <comment>doesn&apos;t alread have a calling card</comment>
    <createobject where='inventory' home-map='sol/earth' id='obj_callingcard'/>
    <message type='single' where='com' who='individual' lo='objects.policebox.2'/>
   </event>

   <event num='3'>
    <comment>move policebox into location 1041</comment>
    <move what='object' id-name='obj_policebox' loc='1041'/>
   </event>

   <event num='4'>
    <comment>move policebox to location 457</comment>
    <move what='object' id-name='obj_policebox' loc='457'/>
   </event>

   <event num='5'>
    <comment>move policebox to location 1112</comment>
    <move what='object' id-name='obj_policebox' loc='1112'/>
   </event>

   <event num='6'>
    <comment>move police box to location 1541</comment>
    <move what='object' id-name='obj_policebox' loc='1541'/>
   </event>

   <event num='7'>
    <comment>move policebox to location 723</comment>
    <move what='object' id-name='obj_policebox' loc='723'/>
   </event>

  </section>

  <section name='purple'>

   <event num='1'>
    <comment>Drop purple seal</comment>
    <destroyobject where='inventory' map='home' id-name='purple seal'/>
    <message type='text' where='com' who='individual'>The brittle wax shatters as it impacts and there is nothing left of your seal.</message>
   </event>

  </section>

  <section name='shelves'>

   <event num='1'>
    <comment>Slide shelves - loc 848</comment>
    <message type='multi' where='com' who='individual' lo='objects.shelves.1' hi='objects.shelves.2'/>
    <message type='multi' where='com' who='room_ex' lo='objects.shelves.3' hi='objects.shelves.4'/>
   </event>

  </section>

  <section name='signpost'>

   <event num='1'>
    <comment>scan the signpost - cookie only if u r in the know</comment>
    <message type='multi' where='object' who='individual' lo='objects.signpost.1' hi='objects.signpost.4' id-name='obj_signpost'/>
   </event>

  </section>

  <section name='skeletons'>

   <event num='1'>
    <comment>Get skeletons - object in loc 1563</comment>
    <message type='multi' where='com' who='individual' lo='objects.skeletons.1' hi='objects.skeletons.4'/>
    <message type='multi' where='com' who='room_ex' lo='objects.skeletons.10' hi='objects.skeletons.13'/>
   </event>

   <event num='2'>
    <comment>Play skeletons - object in loc 1563</comment>
    <call event='objects.skeletons.random[3-6]'/>
   </event>

   <event num='3'>
    <comment>Play skeletons - 1</comment>
    <message type='single' where='com' who='individual' lo='objects.skeletons.5'/>
    <message type='single' where='com' who='room_ex' lo='objects.skeletons.14'/>
   </event>

   <event num='4'>
    <comment>Play skeletons - 2</comment>
    <message type='single' where='com' who='individual' lo='objects.skeletons.6'/>
    <message type='single' where='com' who='room_ex' lo='objects.skeletons.15'/>
   </event>

   <event num='5'>
    <comment>Play skeletons - 3</comment>
    <message type='single' where='com' who='individual' lo='objects.skeletons.7'/>
    <message type='single' where='com' who='room_ex' lo='objects.skeletons.16'/>
   </event>

   <event num='6'>
    <comment>Play skeletons - 4</comment>
    <message type='multi' where='com' who='individual' lo='objects.skeletons.8' hi='objects.skeletons.9'/>
    <message type='single' where='com' who='room_ex' lo='objects.skeletons.17'/>
   </event>

  </section>

  <section name='storepermit'>

   <event num='1'>
    <comment>buy store permit - check rank</comment>
    <checkstat who='individual' rank='7' higher='objects.storepermit.3' equals='objects.storepermit.3' lower='objects.storepermit.2'/>
   </event>

   <event num='2'>
    <comment>wrong rank</comment>
    <message type='text' where='com' who='individual'>You need to be at least a manufacturer to buy a storage permit!</message>
   </event>

   <event num='3'>
    <comment>check cash</comment>
    <checkstat who='individual' c-money='500000' higher='objects.storepermit.5' equals='objects.storepermit.5' lower='objects.storepermit.4'/>
   </event>

   <event num='4'>
    <comment>insufficient cash</comment>
    <message type='text' where='com' who='individual'>The boss checks your bank account and shakes his head, "You need at least half a megagroat before you can apply for a storage permit."</message>
   </event>

   <event num='5'>
    <comment>check for a slithy</comment>
    <checkslithy value='1' pass='objects.storepermit.7' fail='objects.storepermit.6'/>
   </event>

   <event num='6'>
    <comment>no slithy</comment>
    <message type='text' where='com' who='individual'>The boss purses his lips. "I&apos;m not really sure you are worthy of a storage permit, you know." A passing clerk tips you off that you need to have a slithy before the boss will issue the permit.</message>
   </event>

   <event num='7'>
    <comment>check for existing permit</comment>
    <checkflag who='individual' flag ='store-permit'  set='objects.storepermit.8' unset='objects.storepermit.9'/>
   </event>

   <event num='8'>
    <comment>player already has permit</comment>
    <message type='text' where='com' who='individual'>The boss starts to process your application. After a moment there is a beep from his terminal - you already have a storage permit. Annoyed, he fines you 2,000ig for wasting his time.</message>
    <changestat who='individual' money='-2000' change='add' cur-max='current'/>
   </event>

   <event num='9'>
    <comment>everything is OK - issue the permit</comment>
    <message type='text' where='com' who='individual'>With an almost inaudible sigh you hand in the application, with a slithy tove ownership certificate folded into it. The boss opens the form, beams happily, and rapidly processes your application. The resulting permit is transmitted to your company.</message>
    <changestat who='individual' c-money='-500000' change='add' cur-max='current'/>
    <flipflag who='individual' flag ='store-permit'/>
    <changeslithy value='-1' change='add'/>
    <log>SLITHY: %s - storage_permit.</log>
   </event>

  </section>

  <section name='sweets'>

   <event num='1'>
    <comment>Loc 781 - ex candyman</comment>
    <message type='single' where='com' who='individual' lo='objects.sweets.1'/>
   </event>

   <event num='2'>
    <comment>Kiss candyman</comment>
    <message type='single' where='com' who='individual' lo='objects.sweets.2'/>
    <message type='single' where='com' who='room_ex' lo='objects.sweets.3'/>
   </event>

   <event num='3'>
    <comment>Hug candyman</comment>
    <message type='single' where='com' who='individual' lo='objects.sweets.4'/>
    <message type='single' where='com' who='room_ex' lo='objects.sweets.5'/>
   </event>

   <event num='4'>
    <comment>Get/take sweetie - check if player already has one</comment>
    <checkinventory map='home' id-name='sweetie' found='objects.sweets.5' not-found='objects.sweets.6'/>
   </event>

   <event num='5'>
    <comment>Player has sweetie</comment>
    <message type='single' where='com' who='individual' lo='objects.sweets.6'/>
    <message type='single' where='com' who='room_ex' lo='objects.sweets.7'/>
   </event>

   <event num='6'>
    <comment>Player has not got sweetie already, so create one</comment>
    <message type='single' where='com' who='individual' lo='objects.sweets.8'/>
    <message type='single' where='com' who='room_ex' lo='objects.sweets.9'/>
    <createobject where='inventory' home-map='home' id='obj_sweetie'/>
   </event>

   <event num='7'>
    <comment>Drop sweetie</comment>
    <message type='single' where='com' who='individual' lo='objects.sweets.10'/>
    <message type='single' where='com' who='room_ex' lo='objects.sweets.11'/>
    <destroyobject where='inventory' map='home' id-name='sweetie'/>
   </event>

   <event num='8'>
    <comment>Eat/unwrap sweetie</comment>
    <message type='single' where='com' who='individual' lo='objects.sweets.12'/>
    <message type='single' where='com' who='room_ex' lo='objects.sweets.13'/>
    <changestat who='individual' stamina='2' change='add' cur-max='current'/>
    <destroyobject where='inventory' map='home' id-name='sweetie'/>
    <call event='objects.sweets.random[9-16]'/>
   </event>

   <event num='9'>
    <comment>Sweetie 1</comment>
    <message type='single' where='com' who='individual' lo='objects.sweets.14'/>
   </event>

   <event num='10'>
    <comment>Sweetie 2</comment>
    <message type='single' where='com' who='individual' lo='objects.sweets.15'/>
   </event>

   <event num='11'>
    <comment>Sweetie 3</comment>
    <message type='single' where='com' who='individual' lo='objects.sweets.16'/>
   </event>

   <event num='12'>
    <comment>Sweetie 4</comment>
    <message type='single' where='com' who='individual' lo='objects.sweets.17'/>
   </event>

   <event num='13'>
    <comment>Sweetie 5</comment>
    <message type='single' where='com' who='individual' lo='objects.sweets.18'/>
   </event>

   <event num='14'>
    <comment>Sweetie 6</comment>
    <message type='single' where='com' who='individual' lo='objects.sweets.19'/>
   </event>

   <event num='15'>
    <comment>Sweetie 7</comment>
    <message type='single' where='com' who='individual' lo='objects.sweets.20'/>
   </event>

   <event num='16'>
    <comment>Sweetie 8</comment>
    <message type='single' where='com' who='individual' lo='objects.sweets.21'/>
   </event>

  </section>

  <section name='umbrella'>

   <event num='1'>
    <comment>In event on monorail carriage - 970 - check if already carrying umbrella</comment>
    <checkinventory map='home' id-name='umbrella' found='stop'/>
    <checkflag who='individual' flag ='staff'  set='objects.umbrella.2' unset='objects.umbrella.3'/>
   </event>

   <event num='2'>
    <comment>Create umbrella</comment>
    <message type='single' where='com' who='individual' lo='objects.umbrella.1'/>
    <createobject where='inventory' home-map='home' id='obj_umbrella'/>
   </event>

   <event num='3'>
    <comment>Not staff, so roll a dice to see if they get a brolly</comment>
    <percent value='40' equals='objects.umbrella.2' lower='objects.umbrella.2'/>
   </event>

   <event num='4'>
    <comment>Examine brolly - give basic desc then check if it&apos;s open or closed</comment>
    <message type='single' where='com' who='individual' lo='objects.umbrella.2'/>
    <checksize id-name='umbrella' value='1' more='objects.umbrella.5' equal='objects.umbrella.6' less='objects.umbrella.6'/>
   </event>

   <event num='5'>
    <comment>Open</comment>
    <message type='single' where='com' who='individual' lo='objects.umbrella.3'/>
   </event>

   <event num='6'>
    <comment>Closed</comment>
    <message type='single' where='com' who='individual' lo='objects.umbrella.4'/>
   </event>

   <event num='7'>
    <comment>Open umbrella - check state</comment>
    <checksize id-name='umbrella' value='1' more='objects.umbrella.8' equal='objects.umbrella.9' less='objects.umbrella.9'/>
   </event>

   <event num='8'>
    <comment>Already open</comment>
    <message type='single' where='com' who='individual' lo='objects.umbrella.5'/>
   </event>

   <event num='9'>
    <comment>Not open, so open it</comment>
    <message type='single' where='com' who='individual' lo='objects.umbrella.6'/>
    <message type='single' where='com' who='room_ex' lo='objects.umbrella.7'/>
    <changesize id-name='umbrella' amount='2' change='set' max-size='2' destroy='yes'/>
   </event>

   <event num='10'>
    <comment>Close umbrella - check state</comment>
    <checksize id-name='umbrella' value='1' more='objects.umbrella.11' equal='objects.umbrella.12' less='objects.umbrella.12'/>
   </event>

   <event num='11'>
    <comment>Close the umbrella</comment>
    <message type='single' where='com' who='individual' lo='objects.umbrella.8'/>
    <message type='single' where='com' who='room_ex' lo='objects.umbrella.9'/>
    <changesize id-name='umbrella' amount='1' change='set' max-size='10' destroy='yes'/>
   </event>

   <event num='12'>
    <comment>It&apos;s already closed</comment>
    <message type='single' where='com' who='individual' lo='objects.umbrella.10'/>
   </event>

   <event num='13'>
    <comment>Drop umbrella</comment>
    <message type='single' where='com' who='individual' lo='objects.umbrella.11'/>
    <message type='single' where='com' who='room_ex' lo='objects.umbrella.12'/>
    <destroyobject where='inventory' map='home' id-name='umbrella'/>
   </event>

   <event num='14'>
    <comment>Wield umbrella - check state</comment>
    <checksize id-name='umbrella' value='1' more='objects.umbrella.15' equal='objects.umbrella.16' less='objects.umbrella.16'/>
   </event>

   <event num='15'>
    <comment>It&apos;s open so can&apos;t be wielded</comment>
    <message type='single' where='com' who='individual' lo='objects.umbrella.13'/>
   </event>

   <event num='16'>
    <comment>It&apos;s closed so random pick from events</comment>
    <call event='objects.umbrella.random[17-23]'/>
   </event>

   <event num='17'>
    <comment>Option 1</comment>
    <message type='single' where='com' who='individual' lo='objects.umbrella.14'/>
    <message type='single' where='com' who='room_ex' lo='objects.umbrella.15'/>
   </event>

   <event num='18'>
    <comment>Option 2</comment>
    <message type='single' where='com' who='individual' lo='objects.umbrella.16'/>
    <message type='single' where='com' who='room_ex' lo='objects.umbrella.17'/>
   </event>

   <event num='19'>
    <comment>Option 3</comment>
    <message type='single' where='com' who='individual' lo='objects.umbrella.18'/>
    <message type='single' where='com' who='room_ex' lo='objects.umbrella.19'/>
   </event>

   <event num='20'>
    <comment>Option 4</comment>
    <message type='single' where='com' who='individual' lo='objects.umbrella.20'/>
    <message type='single' where='com' who='room_ex' lo='objects.umbrella.21'/>
   </event>

   <event num='21'>
    <comment>Option 5</comment>
    <message type='single' where='com' who='individual' lo='objects.umbrella.22'/>
    <message type='single' where='com' who='room_ex' lo='objects.umbrella.23'/>
   </event>

   <event num='22'>
    <comment>Option 6</comment>
    <message type='single' where='com' who='individual' lo='objects.umbrella.24'/>
    <message type='single' where='com' who='room_ex' lo='objects.umbrella.25'/>
   </event>

   <event num='23'>
    <comment>Option 7</comment>
    <message type='single' where='com' who='individual' lo='objects.umbrella.26'/>
    <message type='single' where='com' who='room_ex' lo='objects.umbrella.27'/>
   </event>

  </section>

  <section name='warepermit'>

   <event num='1'>
    <comment>player wants to buy a warehouse permit - check rank</comment>
    <checkstat who='individual' rank='4' higher='objects.warepermit.2' equals='objects.warepermit.3' lower='objects.warepermit.2'/>
   </event>

   <event num='2'>
    <comment>wrong rank</comment>
    <message type='text' where='com' who='individual'>The boss tells you that only merchants can apply for a warehouse permit.</message>
   </event>

   <event num='3'>
    <comment>check merchant rating</comment>
    <checkstat who='individual' tc='300' higher='objects.warepermit.5' equals='objects.warepermit.5' lower='objects.warepermit.4'/>
   </event>

   <event num='4'>
    <comment>rating too low</comment>
    <message type='text' where='com' who='individual'>The boss tells you that you need at least 300 successful trades before you can apply for a warehouse permit.</message>
   </event>

   <event num='5'>
    <comment>check for enough cash</comment>
    <checkstat who='individual' money='700000' higher='objects.warepermit.7' equals='objects.warepermit.7' lower='objects.warepermit.6'/>
   </event>

   <event num='6'>
    <comment>insufficient cash</comment>
    <message type='text' where='com' who='individual'>The boss checks your bank balance and shakes his head, telling you that you need at least 700,000ig in the bank before you can apply for a permit. "Otherwise you wouldn&apos;t have enough working capital left," he concludes.</message>
   </event>

   <event num='7'>
    <comment>check whether player already has a permit or not</comment>
    <checkflag who='individual' flag ='ware-permit'  set='objects.warepermit.8' unset='objects.warepermit.9'/>
   </event>

   <event num='8'>
    <comment>already has a permit</comment>
    <message type='text' where='com' who='individual'>The boss looks disgusted as he realises you already have a warehouse permit, and fines you 1,000ig on the spot for wasting his time.</message>
    <changestat who='individual' money='-1000' change='add' cur-max='current'/>
   </event>

   <event num='9'>
    <comment>check for a slithy</comment>
    <checkslithy value='1' pass='objects.warepermit.11' fail='objects.warepermit.10'/>
   </event>

   <event num='10'>
    <comment>no slithy</comment>
    <message type='text' where='com' who='individual'>Boss Tweed looks at you blandly. "First you must convince me that you are worthy to hold a permit." A passing clerk nudges you and mutters, "Make sure you have a slithy or you&apos;ll never get a permit!"</message>
   </event>

   <event num='11'>
    <comment>everything OK - perform the transaction</comment>
    <message type='multi' where='com' who='individual' lo='objects.permit.1' hi='objects.permit.2'/>
    <flipflag who='individual' flag ='ware-permit'/>
    <changestat who='individual' money='-600000' change='add' cur-max='current'/>
    <changeslithy value='-1' change='add'/>
    <log>SLITHY: %s - warehouse_permit</log>
   </event>

  </section>

 </category>

 <category name='permits'>

  <section name='remote'>

   <event num='1'>
    <comment>Remote price check certificate</comment>
    <checkstat who='individual' rank='4' higher='permits.remote.3' equals='permits.remote.3' lower='permits.remote.2'/>
   </event>

   <event num='2'>
    <comment>rank too low</comment>
    <message type='text' where='com' who='individual'>You need to be at least a merchant to use the exchange!</message>
   </event>

   <event num='3'>
    <comment>has a slithy?</comment>
    <checkslithy value='1' pass='permits.remote.5' fail='permits.remote.4'/>
   </event>

   <event num='4'>
    <comment>not enuff slithies</comment>
    <message type='text' where='com' who='individual'>You need a slithy tove to access this service for a month, and you don&apos;t have any slithy toves.</message>
   </event>

   <event num='5'>
    <comment>do it</comment>
    <changeslithy value='-1' change='add'/>
    <changestat who='individual' remote-check='1' change='add' cur-max='current'/>
    <message type='text' where='com' who='individual'>You hand over a certificates of ownership for a slithy tove and in return get a certification that you are entitled to use the remote price checking service.</message>
    <log>SLITHY: %s - remote_price_sub</log>
   </event>

   <event num='6'>
    <comment>upgrade remote service - check for standard permit</comment>
    <checkstat who='individual' remote-check='1' higher='permits.remote.8' equals='permits.remote.8' lower='permits.remote.7'/>
   </event>

   <event num='7'>
    <comment>no standard permit</comment>
    <message type='text' where='com' who='individual'>You need to have a valid standard remote price checking subscription before you can upgrade!</message>
   </event>

   <event num='8'>
    <comment>check for slithies</comment>
    <checkslithy value='2' pass='permits.remote.10' fail='permits.remote.9'/>
   </event>

   <event num='9'>
    <comment>not enuff slithies</comment>
    <message type='text' where='com' who='individual'>The clerk shakes his head and regretfully informs you that you don&apos;t have the two slithy toves needed to purchase the upgrade.</message>
   </event>

   <event num='10'>
    <comment>check for existing upgrade</comment>
    <checkflag who='individual' flag ='remote-upgrade'  set='permits.remote.11' unset='permits.remote.12'/>
   </event>

   <event num='11'>
    <comment>already has upgrade</comment>
    <message type='text' where='com' who='individual'>The clerk starts to process your application and then stops, frowning at his screen. He informs you that you already have an upgrade!</message>
   </event>

   <event num='12'>
    <comment>everything is OK - do it</comment>
    <flipflag who='individual' flag ='remote-upgrade'/>
    <changeslithy value='-2' change='add'/>
    <message type='text' where='com' who='individual'>The clerk completes the processing of your application, and a certificate slides out of the replicator slot. He hands it to you with a smile and wishes you a good day.</message>
    <log>SLITHY: %s - remote_price_upgrade</log>
   </event>

  </section>

  <section name='ship'>

   <event num='1'>
    <comment>Bribe clerk - object in loc 659</comment>
    <checkflag who='individual' flag ='ship-permit'  set='permits.ship.2' unset='permits.ship.3'/>
   </event>

   <event num='2'>
    <comment>If player already has a ship permit</comment>
    <message type='single' where='com' who='individual' lo='permits.ship.1'/>
    <changestat who='individual' money='-500' change='add' cur-max='current'/>
   </event>

   <event num='3'>
    <comment>If player does not already have permit</comment>
    <message type='multi' where='com' who='individual' lo='permits.ship.2' hi='permits.ship.4'/>
    <flipflag who='individual' flag ='ship-permit'/>
    <changestat who='individual' money='-500' change='add' cur-max='current'/>
    <changeslithy value='-1' change='add'/>
   </event>

   <event num='4'>
    <comment>Bribe 200 - object in loc 659 - help for those who can&apos;t work out the correct command</comment>
    <message type='single' where='com' who='individual' lo='permits.ship.5'/>
   </event>

  </section>

 </category>

 <category name='port'>

  <section name='announce'>

   <event num='1'>
    <comment>Space port announcements - select random message</comment>
    <call event='port.announce.random[2-25]'/>
   </event>

   <event num='2'>
    <comment>Spaceport announcements - 1st message</comment>
    <announce type='single' loc='262' lo='port.announce.1'/>
    <announce type='single' loc='263' lo='port.announce.1'/>
    <announce type='single' loc='326' lo='port.announce.1'/>
    <announce type='single' loc='327' lo='port.announce.1'/>
    <announce type='single' loc='328' lo='port.announce.1'/>
    <announce type='single' loc='390' lo='port.announce.1'/>
    <announce type='single' loc='391' lo='port.announce.1'/>
    <announce type='single' loc='392' lo='port.announce.1'/>
    <announce type='single' loc='454' lo='port.announce.1'/>
    <delayevent delay='900' logoff='port.announce.1'/>
   </event>

   <event num='3'>
    <comment>Spaceport announcements - 2nd message</comment>
    <announce type='single' loc='262' lo='port.announce.2'/>
    <announce type='single' loc='263' lo='port.announce.2'/>
    <announce type='single' loc='326' lo='port.announce.2'/>
    <announce type='single' loc='327' lo='port.announce.2'/>
    <announce type='single' loc='328' lo='port.announce.2'/>
    <announce type='single' loc='390' lo='port.announce.2'/>
    <announce type='single' loc='391' lo='port.announce.2'/>
    <announce type='single' loc='392' lo='port.announce.2'/>
    <announce type='single' loc='454' lo='port.announce.2'/>
    <delayevent delay='900' logoff='port.announce.1'/>
   </event>

   <event num='4'>
    <comment>Spaceport announcements - 3rd message</comment>
    <announce type='single' loc='262' lo='port.announce.3'/>
    <announce type='single' loc='263' lo='port.announce.3'/>
    <announce type='single' loc='326' lo='port.announce.3'/>
    <announce type='single' loc='327' lo='port.announce.3'/>
    <announce type='single' loc='328' lo='port.announce.3'/>
    <announce type='single' loc='390' lo='port.announce.3'/>
    <announce type='single' loc='391' lo='port.announce.3'/>
    <announce type='single' loc='392' lo='port.announce.3'/>
    <announce type='single' loc='454' lo='port.announce.3'/>
    <delayevent delay='900' logoff='port.announce.1'/>
   </event>

   <event num='5'>
    <comment>Spaceport announcements - 4th message</comment>
    <announce type='single' loc='262' lo='port.announce.4'/>
    <announce type='single' loc='263' lo='port.announce.4'/>
    <announce type='single' loc='326' lo='port.announce.4'/>
    <announce type='single' loc='327' lo='port.announce.4'/>
    <announce type='single' loc='328' lo='port.announce.4'/>
    <announce type='single' loc='390' lo='port.announce.4'/>
    <announce type='single' loc='391' lo='port.announce.4'/>
    <announce type='single' loc='392' lo='port.announce.4'/>
    <announce type='single' loc='454' lo='port.announce.4'/>
    <delayevent delay='900' logoff='port.announce.1'/>
   </event>

   <event num='6'>
    <comment>Spaceport announcements - 5th message</comment>
    <announce type='single' loc='262' lo='port.announce.5'/>
    <announce type='single' loc='263' lo='port.announce.5'/>
    <announce type='single' loc='326' lo='port.announce.5'/>
    <announce type='single' loc='327' lo='port.announce.5'/>
    <announce type='single' loc='328' lo='port.announce.5'/>
    <announce type='single' loc='390' lo='port.announce.5'/>
    <announce type='single' loc='391' lo='port.announce.5'/>
    <announce type='single' loc='392' lo='port.announce.5'/>
    <announce type='single' loc='454' lo='port.announce.5'/>
    <delayevent delay='900' logoff='port.announce.1'/>
   </event>

   <event num='7'>
    <comment>Spaceport announcements - 6th message</comment>
    <announce type='single' loc='262' lo='port.announce.6'/>
    <announce type='single' loc='263' lo='port.announce.6'/>
    <announce type='single' loc='326' lo='port.announce.6'/>
    <announce type='single' loc='327' lo='port.announce.6'/>
    <announce type='single' loc='328' lo='port.announce.6'/>
    <announce type='single' loc='390' lo='port.announce.6'/>
    <announce type='single' loc='391' lo='port.announce.6'/>
    <announce type='single' loc='392' lo='port.announce.6'/>
    <announce type='single' loc='454' lo='port.announce.6'/>
    <delayevent delay='900' logoff='port.announce.1'/>
   </event>

   <event num='8'>
    <comment>Spaceport announcements - 7th message</comment>
    <announce type='single' loc='262' lo='port.announce.7'/>
    <announce type='single' loc='263' lo='port.announce.7'/>
    <announce type='single' loc='326' lo='port.announce.7'/>
    <announce type='single' loc='327' lo='port.announce.7'/>
    <announce type='single' loc='328' lo='port.announce.7'/>
    <announce type='single' loc='390' lo='port.announce.7'/>
    <announce type='single' loc='391' lo='port.announce.7'/>
    <announce type='single' loc='392' lo='port.announce.7'/>
    <announce type='single' loc='454' lo='port.announce.7'/>
    <delayevent delay='900' logoff='port.announce.1'/>
   </event>

   <event num='9'>
    <comment>Spaceport announcements - 8th message</comment>
    <announce type='single' loc='262' lo='port.announce.8'/>
    <announce type='single' loc='263' lo='port.announce.8'/>
    <announce type='single' loc='326' lo='port.announce.8'/>
    <announce type='single' loc='327' lo='port.announce.8'/>
    <announce type='single' loc='328' lo='port.announce.8'/>
    <announce type='single' loc='390' lo='port.announce.8'/>
    <announce type='single' loc='391' lo='port.announce.8'/>
    <announce type='single' loc='392' lo='port.announce.8'/>
    <announce type='single' loc='454' lo='port.announce.8'/>
    <delayevent delay='900' logoff='port.announce.1'/>
   </event>

   <event num='10'>
    <comment>Spaceport announcements - 9th message</comment>
    <announce type='single' loc='262' lo='port.announce.9'/>
    <announce type='single' loc='263' lo='port.announce.9'/>
    <announce type='single' loc='326' lo='port.announce.9'/>
    <announce type='single' loc='327' lo='port.announce.9'/>
    <announce type='single' loc='328' lo='port.announce.9'/>
    <announce type='single' loc='390' lo='port.announce.9'/>
    <announce type='single' loc='391' lo='port.announce.9'/>
    <announce type='single' loc='392' lo='port.announce.9'/>
    <announce type='single' loc='454' lo='port.announce.9'/>
    <delayevent delay='900' logoff='port.announce.1'/>
   </event>

   <event num='11'>
    <comment>Spaceport announcements - 10th message</comment>
    <announce type='single' loc='262' lo='port.announce.10'/>
    <announce type='single' loc='263' lo='port.announce.10'/>
    <announce type='single' loc='326' lo='port.announce.10'/>
    <announce type='single' loc='327' lo='port.announce.10'/>
    <announce type='single' loc='328' lo='port.announce.10'/>
    <announce type='single' loc='390' lo='port.announce.10'/>
    <announce type='single' loc='391' lo='port.announce.10'/>
    <announce type='single' loc='392' lo='port.announce.10'/>
    <announce type='single' loc='454' lo='port.announce.10'/>
    <delayevent delay='900' logoff='port.announce.1'/>
   </event>

   <event num='12'>
    <comment>Spaceport announcements - 11th message</comment>
    <announce type='single' loc='262' lo='port.announce.11'/>
    <announce type='single' loc='263' lo='port.announce.11'/>
    <announce type='single' loc='326' lo='port.announce.11'/>
    <announce type='single' loc='327' lo='port.announce.11'/>
    <announce type='single' loc='328' lo='port.announce.11'/>
    <announce type='single' loc='390' lo='port.announce.11'/>
    <announce type='single' loc='391' lo='port.announce.11'/>
    <announce type='single' loc='392' lo='port.announce.11'/>
    <announce type='single' loc='454' lo='port.announce.11'/>
    <delayevent delay='900' logoff='port.announce.1'/>
   </event>

   <event num='13'>
    <comment>Spaceport announcements - 12th message</comment>
    <announce type='single' loc='262' lo='port.announce.12'/>
    <announce type='single' loc='263' lo='port.announce.12'/>
    <announce type='single' loc='326' lo='port.announce.12'/>
    <announce type='single' loc='327' lo='port.announce.12'/>
    <announce type='single' loc='328' lo='port.announce.12'/>
    <announce type='single' loc='390' lo='port.announce.12'/>
    <announce type='single' loc='391' lo='port.announce.12'/>
    <announce type='single' loc='392' lo='port.announce.12'/>
    <announce type='single' loc='454' lo='port.announce.12'/>
    <delayevent delay='900' logoff='port.announce.1'/>
   </event>

   <event num='14'>
    <comment>Spaceport announcements - 13th message</comment>
    <announce type='single' loc='262' lo='port.announce.13'/>
    <announce type='single' loc='263' lo='port.announce.13'/>
    <announce type='single' loc='326' lo='port.announce.13'/>
    <announce type='single' loc='327' lo='port.announce.13'/>
    <announce type='single' loc='328' lo='port.announce.13'/>
    <announce type='single' loc='390' lo='port.announce.13'/>
    <announce type='single' loc='391' lo='port.announce.13'/>
    <announce type='single' loc='392' lo='port.announce.13'/>
    <announce type='single' loc='454' lo='port.announce.13'/>
    <delayevent delay='900' logoff='port.announce.1'/>
   </event>

   <event num='15'>
    <comment>Spaceport announcements - 14th message</comment>
    <announce type='single' loc='262' lo='port.announce.14'/>
    <announce type='single' loc='263' lo='port.announce.14'/>
    <announce type='single' loc='326' lo='port.announce.14'/>
    <announce type='single' loc='327' lo='port.announce.14'/>
    <announce type='single' loc='328' lo='port.announce.14'/>
    <announce type='single' loc='390' lo='port.announce.14'/>
    <announce type='single' loc='391' lo='port.announce.14'/>
    <announce type='single' loc='392' lo='port.announce.14'/>
    <announce type='single' loc='454' lo='port.announce.14'/>
    <delayevent delay='900' logoff='port.announce.1'/>
   </event>

   <event num='16'>
    <comment>Spaceport announcements - 15th message</comment>
    <announce type='single' loc='262' lo='port.announce.15'/>
    <announce type='single' loc='263' lo='port.announce.15'/>
    <announce type='single' loc='326' lo='port.announce.15'/>
    <announce type='single' loc='327' lo='port.announce.15'/>
    <announce type='single' loc='328' lo='port.announce.15'/>
    <announce type='single' loc='390' lo='port.announce.15'/>
    <announce type='single' loc='391' lo='port.announce.15'/>
    <announce type='single' loc='392' lo='port.announce.15'/>
    <announce type='single' loc='454' lo='port.announce.15'/>
    <delayevent delay='900' logoff='port.announce.1'/>
   </event>

   <event num='17'>
    <comment>Spaceport announcements - 16th message</comment>
    <announce type='single' loc='262' lo='port.announce.16'/>
    <announce type='single' loc='263' lo='port.announce.16'/>
    <announce type='single' loc='326' lo='port.announce.16'/>
    <announce type='single' loc='327' lo='port.announce.16'/>
    <announce type='single' loc='328' lo='port.announce.16'/>
    <announce type='single' loc='390' lo='port.announce.16'/>
    <announce type='single' loc='391' lo='port.announce.16'/>
    <announce type='single' loc='392' lo='port.announce.16'/>
    <announce type='single' loc='454' lo='port.announce.16'/>
    <delayevent delay='900' logoff='port.announce.1'/>
   </event>

   <event num='18'>
    <comment>Spaceport announcements - 17th message</comment>
    <announce type='single' loc='262' lo='port.announce.17'/>
    <announce type='single' loc='263' lo='port.announce.17'/>
    <announce type='single' loc='326' lo='port.announce.17'/>
    <announce type='single' loc='327' lo='port.announce.17'/>
    <announce type='single' loc='328' lo='port.announce.17'/>
    <announce type='single' loc='390' lo='port.announce.17'/>
    <announce type='single' loc='391' lo='port.announce.17'/>
    <announce type='single' loc='392' lo='port.announce.17'/>
    <announce type='single' loc='454' lo='port.announce.17'/>
    <delayevent delay='900' logoff='port.announce.1'/>
   </event>

   <event num='19'>
    <comment>Spaceport announcements - 18th message</comment>
    <announce type='single' loc='262' lo='port.announce.18'/>
    <announce type='single' loc='263' lo='port.announce.18'/>
    <announce type='single' loc='326' lo='port.announce.18'/>
    <announce type='single' loc='327' lo='port.announce.18'/>
    <announce type='single' loc='328' lo='port.announce.18'/>
    <announce type='single' loc='390' lo='port.announce.18'/>
    <announce type='single' loc='391' lo='port.announce.18'/>
    <announce type='single' loc='392' lo='port.announce.18'/>
    <announce type='single' loc='454' lo='port.announce.18'/>
    <delayevent delay='900' logoff='port.announce.1'/>
   </event>

   <event num='20'>
    <comment>Spaceport announcements - 19th message</comment>
    <announce type='single' loc='262' lo='port.announce.19'/>
    <announce type='single' loc='263' lo='port.announce.19'/>
    <announce type='single' loc='326' lo='port.announce.19'/>
    <announce type='single' loc='327' lo='port.announce.19'/>
    <announce type='single' loc='328' lo='port.announce.19'/>
    <announce type='single' loc='390' lo='port.announce.19'/>
    <announce type='single' loc='391' lo='port.announce.19'/>
    <announce type='single' loc='392' lo='port.announce.19'/>
    <announce type='single' loc='454' lo='port.announce.19'/>
    <delayevent delay='900' logoff='port.announce.1'/>
   </event>

   <event num='21'>
    <comment>Spaceport announcements - 20th message</comment>
    <announce type='single' loc='262' lo='port.announce.20'/>
    <announce type='single' loc='263' lo='port.announce.20'/>
    <announce type='single' loc='326' lo='port.announce.20'/>
    <announce type='single' loc='327' lo='port.announce.20'/>
    <announce type='single' loc='328' lo='port.announce.20'/>
    <announce type='single' loc='390' lo='port.announce.20'/>
    <announce type='single' loc='391' lo='port.announce.20'/>
    <announce type='single' loc='392' lo='port.announce.20'/>
    <announce type='single' loc='454' lo='port.announce.20'/>
    <delayevent delay='900' logoff='port.announce.1'/>
   </event>

   <event num='22'>
    <comment>Spaceport announcements - 21st message</comment>
    <announce type='single' loc='262' lo='port.announce.21'/>
    <announce type='single' loc='263' lo='port.announce.21'/>
    <announce type='single' loc='326' lo='port.announce.21'/>
    <announce type='single' loc='327' lo='port.announce.21'/>
    <announce type='single' loc='328' lo='port.announce.21'/>
    <announce type='single' loc='390' lo='port.announce.21'/>
    <announce type='single' loc='391' lo='port.announce.21'/>
    <announce type='single' loc='392' lo='port.announce.21'/>
    <announce type='single' loc='454' lo='port.announce.21'/>
    <delayevent delay='900' logoff='port.announce.1'/>
   </event>

   <event num='23'>
    <comment>Spaceport announcements - 22nd message</comment>
    <announce type='single' loc='262' lo='port.announce.22'/>
    <announce type='single' loc='263' lo='port.announce.22'/>
    <announce type='single' loc='326' lo='port.announce.22'/>
    <announce type='single' loc='327' lo='port.announce.22'/>
    <announce type='single' loc='328' lo='port.announce.22'/>
    <announce type='single' loc='390' lo='port.announce.22'/>
    <announce type='single' loc='391' lo='port.announce.22'/>
    <announce type='single' loc='392' lo='port.announce.22'/>
    <announce type='single' loc='454' lo='port.announce.22'/>
    <delayevent delay='900' logoff='port.announce.1'/>
   </event>

   <event num='24'>
    <comment>Spaceport announcements - 23rd message</comment>
    <announce type='single' loc='262' lo='port.announce.23'/>
    <announce type='single' loc='263' lo='port.announce.23'/>
    <announce type='single' loc='326' lo='port.announce.23'/>
    <announce type='single' loc='327' lo='port.announce.23'/>
    <announce type='single' loc='328' lo='port.announce.23'/>
    <announce type='single' loc='390' lo='port.announce.23'/>
    <announce type='single' loc='391' lo='port.announce.23'/>
    <announce type='single' loc='392' lo='port.announce.23'/>
    <announce type='single' loc='454' lo='port.announce.23'/>
    <delayevent delay='900' logoff='port.announce.1'/>
   </event>

   <event num='25'>
    <comment>Spaceport announcements - 24th message</comment>
    <announce type='single' loc='262' lo='port.announce.24'/>
    <announce type='single' loc='263' lo='port.announce.24'/>
    <announce type='single' loc='326' lo='port.announce.24'/>
    <announce type='single' loc='327' lo='port.announce.24'/>
    <announce type='single' loc='328' lo='port.announce.24'/>
    <announce type='single' loc='390' lo='port.announce.24'/>
    <announce type='single' loc='391' lo='port.announce.24'/>
    <announce type='single' loc='392' lo='port.announce.24'/>
    <announce type='single' loc='454' lo='port.announce.24'/>
    <delayevent delay='900' logoff='port.announce.1'/>
   </event>

  </section>

 </category>

 <category name='sexchange'>

  <section name='female'>

   <event num='1'>
    <comment>Press female button in hospital ward - loc 1433</comment>
    <checkstat who='individual' money='999' higher='sexchange.female.2' equals='sexchange.female.2' lower='sexchange.general.4'/>
   </event>

   <event num='2'>
    <comment>They have enuff money - so check gender</comment>
    <checkgender male='sexchange.female.3' female='sexchange.general.5' neuter='sexchange.female.3'/>
   </event>

   <event num='3'>
    <comment>Everything ok - so go ahead with procedure</comment>
    <message type='single' where='com' who='individual' lo='sexchange.general.8'/>
    <freeze />
    <delayevent delay='2' event='sexchange.female.4'/>
   </event>

   <event num='4'>
    <comment>Procedure finishes</comment>
    <message type='single' where='com' who='individual' lo='sexchange.female.1'/>
    <changegender gender='f'/>
    <message type='single' where='com' who='individual' lo='sexchange.general.10'/>
    <changestat who='individual' money='-999' change='add' cur-max='current'/>
    <release />
   </event>

  </section>

  <section name='general'>

   <event num='1'>
    <comment>Hospital ward - loc 1433 - description of gender realignment machine</comment>
    <message type='single' where='object' who='individual' lo='sexchange.general.11' id-name='obj_grm'/>
   </event>

   <event num='2'>
    <comment>Use grm</comment>
    <message type='single' where='object' who='individual' lo='sexchange.general.1' id-name='obj_grm'/>
   </event>

   <event num='3'>
    <comment>Read sign</comment>
    <message type='multi' where='object' who='individual' lo='sexchange.general.2' hi='sexchange.general.6' id-name='obj_grmsign'/>
   </event>

   <event num='4'>
    <comment>Not enuff cash for sex change</comment>
    <message type='single' where='com' who='individual' lo='sexchange.general.7'/>
   </event>

   <event num='5'>
    <comment>Already the sex they chose</comment>
    <message type='single' where='com' who='individual' lo='sexchange.general.8'/>
    <freeze />
    <delayevent delay='2' event='sexchange.general.6'/>
   </event>

   <event num='6'>
    <comment>Machine ejects them</comment>
    <message type='multi' where='com' who='individual' lo='sexchange.general.12' hi='sexchange.general.13'/>
    <message type='single' where='com' who='individual' lo='sexchange.general.9'/>
    <changestat who='individual' money='-999' change='add' cur-max='current'/>
    <release />
   </event>

   <event num='7'>
    <comment>Press button - but which one?</comment>
    <message type='single' where='com' who='individual' lo='sexchange.general.14'/>
   </event>

  </section>

  <section name='male'>

   <event num='1'>
    <comment>Press male button in hospital ward - loc 1433</comment>
    <checkstat who='individual' money='999' higher='sexchange.male.2' equals='sexchange.male.2' lower='sexchange.general.4'/>
   </event>

   <event num='2'>
    <comment>They have enuff money - so check gender</comment>
    <checkgender male='sexchange.general.5' female='sexchange.male.3' neuter='sexchange.male.3'/>
   </event>

   <event num='3'>
    <comment>Everything ok - so go ahead with procedure</comment>
    <message type='single' where='com' who='individual' lo='sexchange.general.8'/>
    <freeze />
    <delayevent delay='2' event='sexchange.male.4'/>
   </event>

   <event num='4'>
    <comment>Procedure finishes</comment>
    <message type='single' where='com' who='individual' lo='sexchange.male.1'/>
    <changegender gender='m'/>
    <message type='single' where='com' who='individual' lo='sexchange.general.10'/>
    <changestat who='individual' money='-999' change='add' cur-max='current'/>
    <release />
   </event>

  </section>

  <section name='neuter'>

   <event num='1'>
    <comment>Press neuter button in hospital ward - loc 1433</comment>
    <checkstat who='individual' money='999' higher='sexchange.neuter.2' equals='sexchange.neuter.2' lower='sexchange.general.4'/>
   </event>

   <event num='2'>
    <comment>They have enuff money - so check gender</comment>
    <checkgender male='sexchange.neuter.3' female='sexchange.neuter.3' neuter='sexchange.general.5'/>
   </event>

   <event num='3'>
    <comment>Everything ok - so go ahead with procedure</comment>
    <message type='single' where='com' who='individual' lo='sexchange.general.8'/>
    <freeze />
    <delayevent delay='2' event='sexchange.neuter.4'/>
   </event>

   <event num='4'>
    <comment>Procedure finishes</comment>
    <message type='single' where='com' who='individual' lo='sexchange.neuter.1'/>
    <changegender gender='n'/>
    <message type='single' where='com' who='individual' lo='sexchange.general.10'/>
    <changestat who='individual' money='-999' change='add' cur-max='current'/>
    <release />
   </event>

  </section>

 </category>

 <category name='snark'>

  <section name='pasteboard'>

   <event num='1'>
    <comment>Start of Snark puzzle - see if player is allowed</comment>
    <checkflag who='individual' flag ='newbod'  set='snark.pasteboard.3' unset='snark.pasteboard.2'/>
   </event>

   <event num='2'>
    <comment>Player is not a Magellan Society member</comment>
    <message type='text' where='com' who='individual'>Victor looks embarrassed. "I&apos;m sorry", he tells you, "but that issue is a matter for members only."</message>
   </event>

   <event num='3'>
    <comment>Has player asked before</comment>
    <checkvariable name='snark' key='victor' value='starttalk' equals='snark.pasteboard.5' not-equal='snark.pasteboard.4'/>
   </event>

   <event num='4'>
    <comment>Give player the card</comment>
    <message type='text' where='com' who='individual'>Victor looks a little furtive, and waits for a passing security robot to leave the room. The robot, which has burn marks on its manipulators, scowls at Victor as it trundles past. Once it has left Victor hands you a small square of pasteboard, tells you to show it to the owner, and then refuses to discuss the issue further.</message>
    <createobject where='inventory' home-map='home' id='obj_snarkboard'/>
    <setvariable name='snark' key='victor' value='starttalk'/>
   </event>

   <event num='5'>
    <comment>Player already has a card</comment>
    <message type='text' where='com' who='individual'>Victor makes it clear that the only information he has is on the card he gave you earlier.</message>
   </event>

   <event num='10'>
    <comment>Try to drop the pasteboard card</comment>
    <checksize id-name='pasteboard' value='2' more='snark.pasteboard.12' equal='snark.pasteboard.12' less='snark.pasteboard.11'/>
   </event>

   <event num='11'>
    <comment>Refuse to drop the card</comment>
    <message type='text' where='com' who='individual'>I don&apos;t think that&apos;s wise - this pasteboard card is your only opportunity to gain an entree to the higher levels of the Magellan Society. If you really insist, I suppose you could rip it up...</message>
   </event>

   <event num='12'>
    <comment>Drop/Rip the card</comment>
    <message type='text' where='com' who='individual'>You rip up the card and drop the fragments. There is a sudden flare of light as a self destruct mechanism cuts in, and within seconds all that remains are a few fragments of ash and a wisp of smoke.</message>
    <destroyobject where='inventory' map='home' id-name='pasteboard'/>
   </event>

   <event num='13'>
    <comment>Show the pasteboard card</comment>
    <checkmap map='sol/magellan.'  pass='snark.pasteboard.15' fail='snark.pasteboard.14' loc='521'/>
   </event>

   <event num='14'>
    <comment>Show the pasteboard card in the wrong place</comment>
    <message type='text' where='com' who='individual'>You show the card to everyone in the area, but no one takes any interest.</message>
   </event>

   <event num='15'>
    <comment>We are showing the card to von Bellman</comment>
    <message type='multi' where='com' who='individual' lo='snark.pasteboard.1' hi='snark.pasteboard.2'/>
    <destroyobject where='inventory' map='home' id-name='pasteboard'/>
    <setvariable name='snark' key='bellman' value='start'/>
   </event>

  </section>

 </category>

 <category name='special'>

  <section name='ticket'>

   <event num='1'>
    <comment>Lucky 7 - 1479 - MANIPULATE WOTSIT - check if they are staff</comment>
    <checkflag who='individual' flag ='staff'  set='special.ticket.3' unset='special.ticket.2'/>
   </event>

   <event num='2'>
    <comment>Not staff</comment>
    <message type='single' where='com' who='individual' lo='special.ticket.1'/>
   </event>

   <event num='3'>
    <comment>Staff - so create the tungsten ticket</comment>
    <message type='single' where='com' who='individual' lo='special.ticket.2'/>
    <createobject where='inventory' home-map='sol/earth' id='obj_ticket'/>
   </event>

   <event num='4'>
    <comment>Read tungsten ticket</comment>
    <message type='single' where='com' who='individual' lo='special.ticket.3'/>
   </event>

   <event num='5'>
    <comment>Drop tungsten ticket - check if player is staff</comment>
    <checkflag who='individual' flag ='staff'  set='special.ticket.6' unset='special.ticket.7'/>
   </event>

   <event num='6'>
    <comment>Drop ticket - staff</comment>
    <message type='single' where='com' who='individual' lo='special.ticket.4'/>
    <drop id-name='tungsten ticket' silent='true'/>
   </event>

   <event num='7'>
    <comment>Drop tungsten ticket - not staff</comment>
    <message type='single' where='com' who='individual' lo='special.ticket.5'/>
    <destroyobject where='inventory' map='home' id-name='tungsten ticket'/>
   </event>

  </section>

 </category>

 <category name='start'>

  <section name='start'>

   <event num='1'>
    <comment>Startup for Earth spaceport announcements and monorail</comment>
    <delayevent delay='10' logoff='port.announce.1'/>
    <delayevent delay='10' logoff='monorail.spaceport.1'/>
   </event>

  </section>

 </category>

 <category name='stats'>

  <section name='dexterity'>

   <event num='1'>
    <comment>Genetic lab - 1236 - ask about dexterity</comment>
    <message type='multi' where='com' who='individual' lo='stats.dexterity.1' hi='stats.dexterity.2'/>
   </event>

   <event num='2'>
    <comment>buy dexterity - check for slithy</comment>
    <checkslithy value='1' pass='stats.dexterity.4' fail='stats.dexterity.3'/>
   </event>

   <event num='3'>
    <comment>No slithy</comment>
    <message type='single' where='com' who='individual' lo='stats.dexterity.3'/>
   </event>

   <event num='4'>
    <comment>Has got slithy so send basic msg and check if already done a stat today</comment>
    <message type='single' where='com' who='individual' lo='stats.dexterity.4'/>
    <checkflag who='individual' flag ='slithy2stat'  set='stats.dexterity.5' unset='stats.dexterity.6'/>
   </event>

   <event num='5'>
    <comment>Already done a stat today</comment>
    <message type='multi' where='com' who='individual' lo='stats.dexterity.5' hi='stats.dexterity.6'/>
   </event>

   <event num='6'>
    <comment>Not already done so check if dexterity is maxed, or almost maxed</comment>
    <checkstat who='individual' dexterity='149' higher='stats.dexterity.7' equals='stats.dexterity.8' lower='stats.dexterity.9'/>
   </event>

   <event num='7'>
    <comment>Dex is already maxed</comment>
    <message type='single' where='com' who='individual' lo='stats.dexterity.7'/>
   </event>

   <event num='8'>
    <comment>Dex is 149 so call dex increase event, and send final warning</comment>
    <call event='stats.dexterity.9'/>
    <message type='single' where='com' who='individual' lo='stats.dexterity.12'/>
   </event>

   <event num='9'>
    <comment>Increase dex</comment>
    <message type='multi' where='com' who='individual' lo='stats.dexterity.8' hi='stats.dexterity.11'/>
    <changeslithy value='-1' change='add'/>
    <changestat who='individual' dexterity='1' change='add' cur-max='maximum'/>
    <changestat who='individual' dexterity='99' change='add' cur-max='current'/>
    <flipflag who='individual' flag ='slithy2stat'/>
    <log>SLITHY - %s has bought a dexterity point.</log>
   </event>

  </section>

 </category>

 <category name='trader'>

  <section name='test1'>

   <event num='1'>
    <comment>Merchant promo - door checks on loc 1102 - check rank</comment>
    <checkstat who='individual' rank='3' higher='trader.test1.3' equals='trader.test2.1' lower='trader.test1.2'/>
   </event>

   <event num='2'>
    <comment>If not high enough rank...</comment>
    <message type='single' where='com' who='individual' lo='trader.test1.1'/>
    <move what='player' who='individual' loc='1038'/>
   </event>

   <event num='3'>
    <comment>If too high rank...</comment>
    <message type='single' where='com' who='individual' lo='trader.test1.2'/>
    <move what='player' who='individual' loc='1038'/>
   </event>

  </section>

  <section name='test2'>

   <event num='1'>
    <comment>Trader promo - door check on loc 1102 - check ak jobs</comment>
    <checkstat who='individual' ak='75' higher='trader.test4.1' equals='trader.test4.1' lower='trader.test2.2'/>
   </event>

   <event num='2'>
    <comment>Not enough ak jobs...</comment>
    <message type='single' where='com' who='individual' lo='trader.test2.1'/>
    <move what='player' who='individual' loc='1038'/>
   </event>

  </section>

  <section name='test3'>

   <event num='1'>
    <comment>Trader promo - door check on loc 1102 - check account status - no longer in use</comment>
   </event>

   <event num='2'>
    <comment>If still on a trial a/c</comment>
    <message type='multi' where='com' who='individual' lo='trader.test3.1' hi='trader.test3.3'/>
    <move what='player' who='individual' loc='1038'/>
   </event>

  </section>

  <section name='test4'>

   <event num='1'>
    <comment>check player isn&apos;t already a merchant and move out of office</comment>
    <checkstat who='individual' rank='3' equals='trader.test4.2'/>
    <message type='text' where='com' who='individual'>The Secretary frowns. "You&apos;ve taken up enough of my valuable time," he growls. "Please leave immediately." With that he goes back to studying the papers on his desk. Suitably intimidated you beat a hasty retreat.</message>
    <move what='player' who='individual' loc='1038'/>
   </event>

   <event num='2'>
    <comment>check player has the money</comment>
    <message type='text' where='com' who='individual'>He looks up and says grudgingly, "Your papers appear to be in order."</message>
    <checkstat who='individual' money='75000' higher='trader.test4.4' equals='trader.test4.4' lower='trader.test4.3'/>
   </event>

   <event num='3'>
    <comment>insufficient funds</comment>
    <message type='text' where='com' who='individual'>"However, you do not have sufficent working capital to trade. You need a minimum of 75,000ig."</message>
   </event>

   <event num='4'>
    <comment>promote player</comment>
    <message type='text' where='com' who='individual'>"Your sponorship for membershipof the Trading Guild is all in order." The Secretary punches a series of buttons. "You are now cleared for access to all Guild facilities," he tells you.</message>
    <changestat who='individual' rank='4' change='set' cur-max='maximum'/>
   </event>

  </section>

 </category>

 <category name='washroom'>

  <section name='facilities'>

   <event num='1'>
    <comment>Washroom - loc 727 - use facilities</comment>
    <message type='single' where='com' who='individual' lo='washroom.facilities.1'/>
   </event>

  </section>

  <section name='hands'>

   <event num='1'>
    <comment>Washroom - loc 727 - wash hands</comment>
    <message type='single' where='com' who='individual' lo='washroom.hands.1'/>
   </event>

  </section>

  <section name='hottub'>

   <event num='1'>
    <comment>Washroom - loc 727 - use hot tub - are they already in it?</comment>
    <checkvariable name='washroom' key='hottub' value='in' equals='washroom.hottub.2' not-equal='washroom.hottub.3'/>
   </event>

   <event num='2'>
    <comment>Already in hot tub</comment>
    <message type='single' where='com' who='individual' lo='washroom.hottub.1'/>
   </event>

   <event num='3'>
    <comment>Not already in hot tub - so they get in</comment>
    <setvariable name='washroom' key='hottub' value='in' temporary='true'/>
    <message type='multi' where='com' who='individual' lo='washroom.hottub.2' hi='washroom.hottub.3'/>
   </event>

   <event num='4'>
    <comment>get out of hot tub - check if they are in it</comment>
    <checkvariable name='washroom' key='hottub' value='in' equals='washroom.hottub.6' not-equal='washroom.hottub.5'/>
   </event>

   <event num='5'>
    <comment>Not in hot tub</comment>
    <message type='single' where='com' who='individual' lo='washroom.hottub.4'/>
   </event>

   <event num='6'>
    <comment>They are in hot tub, so they get out</comment>
    <message type='single' where='com' who='individual' lo='washroom.hottub.5'/>
    <clearvariable name='washroom'/>
   </event>

   <event num='7'>
    <comment>They are in hot tub, and try to leave the room</comment>
    <message type='single' where='com' who='individual' lo='washroom.hottub.6'/>
    <move what='player' who='individual' loc='727'/>
   </event>

  </section>

  <section name='shower'>

   <event num='1'>
    <comment>Washroom - loc 727 - use shower</comment>
    <message type='multi' where='com' who='individual' lo='washroom.shower.1' hi='washroom.shower.3'/>
   </event>

  </section>

 </category>

 <category name='wedding'>

  <section name='registrar'>

   <event num='1'>
    <comment>talk to the registrar</comment>
    <match phrase='hello' id-name='obj_registrar' lo='wedding.registrar.1'/>
    <match phrase='bye' id-name='obj_registrar' lo='wedding.registrar.2'/>
    <match phrase='work' id-name='obj_registrar' lo='wedding.registrar.3'/>
    <match phrase='job' id-name='obj_registrar' lo='wedding.registrar.3'/>
    <match phrase='profession' id-name='obj_registrar' lo='wedding.registrar.3'/>
    <match phrase='earth' id-name='obj_registrar' lo='wedding.registrar.4'/>
    <match phrase='galactic admin' id-name='obj_registrar' lo='wedding.registrar.5'/>
    <match phrase='marriage' id-name='obj_registrar' lo='wedding.registrar.6'/>
    <match phrase='wedding' id-name='obj_registrar' lo='wedding.registrar.6'/>
    <match phrase='ming' id-name='obj_registrar' lo='wedding.registrar.7'/>
    <nomatch id-name='obj_registrar' lo='wedding.registrar.8'/>
   </event>

  </section>

 </category>

 <category name='wild'>

  <section name='animals'>

   <event num='1'>
    <comment>Roll dice to see if animal appears - lots of different locs</comment>
    <percent value='50' higher='wild.animals.2' equals='wild.animals.2'/>
   </event>

   <event num='2'>
    <comment>An animal appears - choose which one (there are 8 possibilities)</comment>
    <call event='wild.animals.random[3-10]'/>
   </event>

   <event num='3'>
    <comment>Player meets a wolf - is their comm broke?</comment>
    <checkvariable name='wilderness' key='gadget' value='notgot' equals='wild.animals.12' not-equal='wild.animals.11'/>
   </event>

   <event num='4'>
    <comment>Player meets pack of wolves - is their comm broke?</comment>
    <checkvariable name='wilderness' key='gadget' value='notgot' equals='wild.animals.14' not-equal='wild.animals.13'/>
   </event>

   <event num='5'>
    <comment>Player meets a lynx - Is their comm broke?</comment>
    <checkvariable name='wilderness' key='gadget' value='notgot' equals='wild.animals.16' not-equal='wild.animals.15'/>
   </event>

   <event num='6'>
    <comment>Player meets a boar - Is their comm broke?</comment>
    <checkvariable name='wilderness' key='gadget' value='notgot' equals='wild.animals.18' not-equal='wild.animals.17'/>
   </event>

   <event num='7'>
    <comment>Player meets a fox</comment>
    <message type='single' where='loc' who='individual' lo='wild.animals.9'/>
   </event>

   <event num='8'>
    <comment>Player meets some rabbits</comment>
    <message type='single' where='loc' who='individual' lo='wild.animals.10'/>
   </event>

   <event num='9'>
    <comment>Player meets some deer</comment>
    <message type='single' where='loc' who='individual' lo='wild.animals.11'/>
   </event>

   <event num='10'>
    <comment>Player meets a stag</comment>
    <message type='single' where='loc' who='individual' lo='wild.animals.12'/>
   </event>

   <event num='11'>
    <comment>Player meets wolf - comm is safe</comment>
    <message type='single' where='loc' who='individual' lo='wild.animals.1'/>
   </event>

   <event num='12'>
    <comment>Player meets wolf - comm is broke</comment>
    <message type='single' where='loc' who='individual' lo='wild.animals.2'/>
    <call event='wild.animals.random[19-22]'/>
   </event>

   <event num='13'>
    <comment>Player meets wolfpack - comm is safe</comment>
    <message type='single' where='loc' who='individual' lo='wild.animals.3'/>
   </event>

   <event num='14'>
    <comment>Player meets wolfpack - comm is broke</comment>
    <message type='single' where='loc' who='individual' lo='wild.animals.4'/>
    <changestat who='individual' stamina='-999' change='add' cur-max='current'/>
   </event>

   <event num='15'>
    <comment>Player meets lynx - comm is safe</comment>
    <message type='single' where='loc' who='individual' lo='wild.animals.5'/>
   </event>

   <event num='16'>
    <comment>Player meets lynx - comm is broke</comment>
    <message type='single' where='loc' who='individual' lo='wild.animals.6'/>
    <call event='wild.animals.random[19-22]'/>
   </event>

   <event num='17'>
    <comment>Player meets boar - comm is safe</comment>
    <message type='single' where='loc' who='individual' lo='wild.animals.7'/>
   </event>

   <event num='18'>
    <comment>Player meets boar - comm is broke</comment>
    <message type='single' where='loc' who='individual' lo='wild.animals.8'/>
    <call event='wild.animals.random[19-22]'/>
   </event>

   <event num='19'>
    <comment>Damage option 1</comment>
    <changestat who='individual' stamina='-5' change='add' cur-max='current'/>
   </event>

   <event num='20'>
    <comment>Damage option 2</comment>
    <changestat who='individual' stamina='-10' change='add' cur-max='current'/>
   </event>

   <event num='21'>
    <comment>Damage option 3</comment>
    <changestat who='individual' stamina='-15' change='add' cur-max='current'/>
   </event>

   <event num='22'>
    <comment>Damage option 4</comment>
    <changestat who='individual' stamina='-20' change='add' cur-max='current'/>
   </event>

  </section>

  <section name='berries'>

   <event num='1'>
    <comment>Eat blackberries in brambles - 2260</comment>
    <message type='single' where='com' who='individual' lo='wild.berries.1'/>
    <changestat who='individual' stamina='5' change='add' cur-max='current'/>
   </event>

  </section>

  <section name='brambles'>

   <event num='1'>
    <comment>No exit event for all the bramble locations</comment>
    <message type='single' where='loc' who='individual' lo='wild.brambles.1'/>
    <changestat who='individual' stamina='-1' change='add' cur-max='current'/>
   </event>

  </section>

  <section name='bridge'>

   <event num='1'>
    <comment>Enter event - 2317 - north side of bridge - check where they came from</comment>
    <checklastloc loc='2381' pass='wild.bridge.2'/>
   </event>

   <event num='2'>
    <comment>If they came from south side, give message</comment>
    <message type='single' where='loc' who='individual' lo='wild.bridge.1'/>
   </event>

   <event num='3'>
    <comment>Enter event - 2381 - south side of bridge - check where they came from</comment>
    <checklastloc loc='2317' pass='wild.bridge.4'/>
   </event>

   <event num='4'>
    <comment>If they came from north side, give message</comment>
    <message type='single' where='loc' who='individual' lo='wild.bridge.1'/>
   </event>

  </section>

  <section name='confirm'>

   <event num='1'>
    <comment>I confirm - in loc 1115 - are they signed up?</comment>
    <checkvariable name='wilderness' key='journey' value='signup' equals='wild.confirm.3' not-equal='wild.confirm.2'/>
   </event>

   <event num='2'>
    <comment>Not signed up, or not got gadget</comment>
    <message type='single' where='com' who='individual' lo='wild.confirm.1'/>
   </event>

   <event num='3'>
    <comment>Signed up - have they got gadget?</comment>
    <checkvariable name='wilderness' key='gadget' value='got' equals='wild.confirm.4' not-equal='wild.confirm.2'/>
   </event>

   <event num='4'>
    <comment>Everything ok so go to hopper</comment>
    <message type='single' where='com' who='individual' lo='wild.confirm.2'/>
    <move what='player' who='individual' loc='1117'/>
    <setvariable name='wilderness' key='journey' value='confirm' temporary='true'/>
   </event>

  </section>

  <section name='gadget1'>

   <event num='1'>
    <comment>Give comm unit in loc 1115 - check if signed up</comment>
    <checkvariable name='wilderness' key='journey' value='signup' equals='wild.gadget1.3' not-equal='wild.gadget1.2'/>
   </event>

   <event num='2'>
    <comment>Not signed up</comment>
    <message type='single' where='com' who='individual' lo='wild.gadget1.1'/>
   </event>

   <event num='3'>
    <comment>They are signed up so they get the gadget</comment>
    <message type='multi' where='com' who='individual' lo='wild.gadget1.2' hi='wild.gadget1.4'/>
    <setvariable name='wilderness' key='gadget' value='got' temporary='true'/>
    <delayevent delay='2' event='wild.gadget1.4'/>
   </event>

   <event num='4'>
    <message type='single' where='com' who='individual' lo='wild.gadget1.5'/>
   </event>

  </section>

  <section name='geyser'>

   <event num='1'>
    <comment>In room event on hot springs - loc 2125 - start the clock</comment>
    <delayevent delay='10' event='wild.geyser.2'/>
   </event>

   <event num='2'>
    <comment>After the delay, check if player is still in hot springs</comment>
    <checkmap map='sol/earth'  pass='wild.geyser.4' fail='wild.geyser.3' loc='2125'/>
   </event>

   <event num='3'>
    <comment>Player is not still there so escapes being boiled alive</comment>
    <announce type='single' loc='2188' lo='wild.geyser.1'/>
    <announce type='single' loc='2126' lo='wild.geyser.1'/>
   </event>

   <event num='4'>
    <comment>Player gets geysered</comment>
    <message type='single' where='loc' who='individual' lo='wild.geyser.2'/>
    <changestat who='individual' stamina='-999' change='add' cur-max='current'/>
   </event>

  </section>

  <section name='journey'>

   <event num='1'>
    <comment>Buckle up - in hopper, loc 1117</comment>
    <message type='single' where='com' who='individual' lo='wild.journey.1'/>
    <freeze />
    <delayevent delay='2' event='wild.journey.2'/>
   </event>

   <event num='2'>
    <comment>Arrive at wilderness</comment>
    <message type='single' where='com' who='individual' lo='wild.journey.2'/>
    <move what='player' who='individual' loc='2639'/>
    <setvariable name='wilderness' key='journey' value='made' temporary='true'/>
    <release />
   </event>

  </section>

  <section name='nogo'>

   <event num='1'>
    <comment>Exit event on WWT office - loc 1115 - strip off variables if they don&apos;t go on journey</comment>
    <clearvariable name='wilderness'/>
   </event>

  </section>

  <section name='oak'>

   <event num='1'>
    <comment>Enter event on dead oak - 2190</comment>
    <message type='single' where='com' who='individual' lo='wild.oak.1'/>
    <changestat who='individual' stamina='-2' change='add' cur-max='current'/>
   </event>

  </section>

  <section name='pit'>

   <event num='1'>
    <comment>Death by falling in pit - loc 2195</comment>
    <changestat who='individual' stamina='-999' change='add' cur-max='current'/>
   </event>

   <event num='2'>
    <comment>Loc 2194 - look ahead or look east</comment>
    <message type='single' where='loc' who='individual' lo='wild.pit.1'/>
   </event>

  </section>

  <section name='return'>

   <event num='1'>
    <comment>Call Robin - loc 2639</comment>
    <message type='single' where='com' who='individual' lo='wild.return.1'/>
    <freeze />
    <delayevent delay='2' event='wild.return.2'/>
   </event>

   <event num='2'>
    <comment>Call Robin - loc 2639</comment>
    <move what='player' who='individual' loc='1114'/>
    <setvariable name='wilderness' key='gadget' value='notgot'/>
    <release />
   </event>

  </section>

  <section name='signup'>

   <event num='1'>
    <comment>Sign up - loc 1115 - check if already signed up</comment>
    <checkvariable name='wilderness' key='journey' value='signup' equals='wild.signup.2' not-equal='wild.signup.3'/>
   </event>

   <event num='2'>
    <comment>Already signed up</comment>
    <message type='single' where='com' who='individual' lo='wild.signup.1'/>
   </event>

   <event num='3'>
    <comment>Not already signed up - so do it</comment>
    <setvariable name='wilderness' key='journey' value='signup'/>
    <message type='single' where='com' who='individual' lo='wild.signup.2'/>
    <delayevent delay='2' event='wild.signup.4'/>
   </event>

   <event num='4'>
    <comment>Check insurance</comment>
    <checkflag who='individual' flag ='insured'  set='wild.signup.6' unset='wild.signup.5'/>
   </event>

   <event num='5'>
    <comment>No insurance</comment>
    <message type='single' where='com' who='individual' lo='wild.signup.3'/>
   </event>

   <event num='6'>
    <comment>They are insured, so check money</comment>
    <message type='single' where='com' who='individual' lo='wild.signup.4'/>
    <checkstat who='individual' money='100' higher='wild.signup.8' equals='wild.signup.8' lower='wild.signup.7'/>
   </event>

   <event num='7'>
    <comment>Not enuff groats</comment>
    <message type='single' where='com' who='individual' lo='wild.signup.5'/>
   </event>

   <event num='8'>
    <comment>Pay the man</comment>
    <changestat who='individual' money='-100' change='add' cur-max='current'/>
    <message type='multi' where='com' who='individual' lo='wild.signup.6' hi='wild.signup.8'/>
    <setvariable name='wilderness' key='gadget' value='requested' temporary='true'/>
   </event>

  </section>

  <section name='swamp'>

   <event num='1'>
    <comment>No exit event on swamp - loc 2133</comment>
    <message type='single' where='loc' who='individual' lo='wild.swamp.1'/>
    <changestat who='individual' stamina='-999' change='add' cur-max='current'/>
   </event>

  </section>

  <section name='tripwire'>

   <event num='1'>
    <comment>In long grass - locs 2319 and 2254 - check if comm is already broken</comment>
    <checkvariable name='wilderness' key='gadget' value='got' equals='wild.tripwire.2'/>
   </event>

   <event num='2'>
    <comment>If comm is not already broken - roll dice to see if player trips over</comment>
    <percent value='40' equals='wild.tripwire.3' lower='wild.tripwire.3'/>
   </event>

   <event num='3'>
    <comment>Player trips up. Whoops!</comment>
    <setvariable name='wilderness' key='gadget' value='notgot'/>
    <message type='single' where='loc' who='individual' lo='wild.tripwire.1'/>
   </event>

  </section>

 </category>

 <category name='xmas06'>

  <section name='box'>

   <event num='1'>
    <comment>Spin/use box</comment>
    <message type='single' where='com' who='individual' lo='xmas06.box.1'/>
    <message type='single' where='com' who='room_ex' lo='xmas06.box.2'/>
   </event>

   <event num='2'>
    <comment>drop box</comment>
    <message type='single' where='com' who='individual' lo='xmas06.box.3'/>
    <message type='single' where='com' who='room_ex' lo='xmas06.box.4'/>
    <destroyobject where='inventory' map='home' id-name='box'/>
   </event>

  </section>

  <section name='cane'>

   <event num='1'>
    <comment>Eat cane</comment>
    <message type='single' where='com' who='individual' lo='xmas06.cane.1'/>
    <message type='single' where='com' who='room_ex' lo='xmas06.cane.2'/>
    <destroyobject where='inventory' map='home' id-name='candy cane'/>
    <changestat who='individual' stamina='2' change='add' cur-max='current'/>
   </event>

   <event num='2'>
    <comment>Use/twirl cane</comment>
    <message type='single' where='com' who='individual' lo='xmas06.cane.3'/>
    <message type='single' where='com' who='room_ex' lo='xmas06.cane.4'/>
    <destroyobject where='inventory' map='home' id-name='candy cane'/>
   </event>

   <event num='3'>
    <comment>Lick cane</comment>
    <message type='single' where='com' who='individual' lo='xmas06.cane.5'/>
    <message type='single' where='com' who='room_ex' lo='xmas06.cane.6'/>
    <destroyobject where='inventory' map='home' id-name='candy cane'/>
    <changestat who='individual' stamina='2' change='add' cur-max='current'/>
   </event>

   <event num='4'>
    <comment>Drop cane</comment>
    <message type='single' where='com' who='individual' lo='xmas06.cane.7'/>
    <message type='single' where='com' who='room_ex' lo='xmas06.cane.8'/>
    <destroyobject where='inventory' map='home' id-name='candy cane'/>
   </event>

  </section>

  <section name='coal'>

   <event num='1'>
    <comment>Use/ignite coal</comment>
    <message type='single' where='com' who='individual' lo='xmas06.coal.1'/>
    <message type='single' where='com' who='room_ex' lo='xmas06.coal.2'/>
    <destroyobject where='inventory' map='home' id-name='coal'/>
   </event>

   <event num='2'>
    <comment>Eat coal</comment>
    <message type='single' where='com' who='individual' lo='xmas06.coal.3'/>
    <message type='single' where='com' who='room_ex' lo='xmas06.coal.4'/>
    <destroyobject where='inventory' map='home' id-name='coal'/>
    <changestat who='individual' stamina='-2' change='add' cur-max='current'/>
   </event>

   <event num='3'>
    <comment>Squeeze coal</comment>
    <message type='single' where='com' who='individual' lo='xmas06.coal.5'/>
    <message type='single' where='com' who='room_ex' lo='xmas06.coal.6'/>
    <destroyobject where='inventory' map='home' id-name='coal'/>
   </event>

   <event num='4'>
    <comment>Drop coal</comment>
    <message type='single' where='com' who='individual' lo='xmas06.coal.7'/>
    <message type='single' where='com' who='room_ex' lo='xmas06.coal.8'/>
    <destroyobject where='inventory' map='home' id-name='coal'/>
   </event>

  </section>

  <section name='femaledoll'>

   <event num='1'>
    <comment>Use/squeeze female doll - select from 3 possibilities</comment>
    <call event='xmas06.femaledoll.random[2-4]'/>
   </event>

   <event num='2'>
    <comment>The female doll speaks - option 1</comment>
    <message type='single' where='com' who='individual' lo='xmas06.femaledoll.1'/>
    <message type='single' where='com' who='room_ex' lo='xmas06.femaledoll.2'/>
   </event>

   <event num='3'>
    <comment>The female doll speaks - option 2</comment>
    <message type='single' where='com' who='individual' lo='xmas06.femaledoll.3'/>
    <message type='single' where='com' who='room_ex' lo='xmas06.femaledoll.4'/>
   </event>

   <event num='4'>
    <comment>The female doll speaks - option 3</comment>
    <message type='single' where='com' who='individual' lo='xmas06.femaledoll.5'/>
    <message type='single' where='com' who='room_ex' lo='xmas06.femaledoll.6'/>
   </event>

   <event num='5'>
    <comment>Drop female doll</comment>
    <message type='single' where='com' who='individual' lo='xmas06.femaledoll.7'/>
    <message type='single' where='com' who='room_ex' lo='xmas06.femaledoll.8'/>
    <destroyobject where='inventory' map='home' id-name='doll'/>
   </event>

  </section>

  <section name='hunt'>

   <event num='1'>
    <comment>READ CLUES - Cantina - 454</comment>
    <checkstat who='individual' money='10' higher='xmas.pie.2' equals='xmas.pie.2' lower='xmas.pie.3'/>
    <message type='multi' where='com' who='individual' lo='xmas06.hunt.1' hi='xmas06.hunt.20'/>
   </event>

  </section>

  <section name='maker'>

   <event num='1'>
    <comment>Candy maker - check if player is staff</comment>
    <checkflag who='individual' flag ='staff'  set='xmas06.maker.2' unset='xmas06.maker.3'/>
   </event>

   <event num='2'>
    <comment>They are staff so create a candy cane</comment>
    <message type='single' where='com' who='individual' lo='xmas06.maker.2'/>
    <createobject where='inventory' home-map='sol/earth' id='xmascandycane_ab'/>
   </event>

   <event num='3'>
    <comment>Not staff</comment>
    <message type='single' where='com' who='individual' lo='xmas06.maker.1'/>
   </event>

   <event num='4'>
    <comment>Coal maker - check if player is staff</comment>
    <checkflag who='individual' flag ='staff'  set='xmas06.maker.5' unset='xmas06.maker.3'/>
   </event>

   <event num='5'>
    <comment>They are staff so create coal</comment>
    <message type='single' where='com' who='individual' lo='xmas06.maker.3'/>
    <createobject where='inventory' home-map='sol/earth' id='xmascoal_ab'/>
   </event>

  </section>

  <section name='maledoll'>

   <event num='1'>
    <comment>Use/squeeze male doll - select from 3 possibilities</comment>
    <call event='xmas06.maledoll.random[2-4]'/>
   </event>

   <event num='2'>
    <comment>The male doll speaks - option 1</comment>
    <message type='single' where='com' who='individual' lo='xmas06.maledoll.1'/>
    <message type='single' where='com' who='room_ex' lo='xmas06.maledoll.2'/>
   </event>

   <event num='3'>
    <comment>The male doll speaks - option 2</comment>
    <message type='single' where='com' who='individual' lo='xmas06.maledoll.3'/>
    <message type='single' where='com' who='room_ex' lo='xmas06.maledoll.4'/>
   </event>

   <event num='4'>
    <comment>The male doll speaks - option 3</comment>
    <message type='single' where='com' who='individual' lo='xmas06.maledoll.5'/>
    <message type='single' where='com' who='room_ex' lo='xmas06.maledoll.6'/>
   </event>

   <event num='5'>
    <comment>Drop male doll</comment>
    <message type='single' where='com' who='individual' lo='xmas06.maledoll.7'/>
    <message type='single' where='com' who='room_ex' lo='xmas06.maledoll.8'/>
    <destroyobject where='inventory' map='home' id-name='doll'/>
   </event>

  </section>

  <section name='move'>

   <event num='1'>
    <comment>Enter event on 70 - check where player came from.</comment>
    <checklastloc loc='263' fail='stop'/>
    <message type='single' where='com' who='individual' lo='xmas06.move.1'/>
   </event>

   <event num='2'>
    <comment>Enter event on 263 - check where player came from.</comment>
    <checklastloc loc='70' fail='stop'/>
    <message type='single' where='com' who='individual' lo='xmas06.move.1'/>
   </event>

  </section>

  <section name='neuterdoll'>

   <event num='1'>
    <comment>Use/squeeze neuter doll - select from 3 possibilities</comment>
    <call event='xmas06.neuterdoll.random[2-4]'/>
   </event>

   <event num='2'>
    <comment>The neuter doll speaks - option 1</comment>
    <message type='single' where='com' who='individual' lo='xmas06.neuterdoll.1'/>
    <message type='single' where='com' who='room_ex' lo='xmas06.neuterdoll.2'/>
   </event>

   <event num='3'>
    <comment>The neuter doll speaks - option 2</comment>
    <message type='single' where='com' who='individual' lo='xmas06.neuterdoll.3'/>
    <message type='single' where='com' who='room_ex' lo='xmas06.neuterdoll.4'/>
   </event>

   <event num='4'>
    <comment>The neuter doll speaks - option 3</comment>
    <message type='single' where='com' who='individual' lo='xmas06.neuterdoll.5'/>
    <message type='single' where='com' who='room_ex' lo='xmas06.neuterdoll.6'/>
   </event>

   <event num='5'>
    <comment>Drop neuter doll</comment>
    <message type='single' where='com' who='individual' lo='xmas06.neuterdoll.7'/>
    <message type='single' where='com' who='room_ex' lo='xmas06.neuterdoll.8'/>
    <destroyobject where='inventory' map='home' id-name='doll'/>
   </event>

  </section>

  <section name='santa'>

   <event num='1'>
    <comment>Sit on Santa&apos;s lap - check if player is already on the lap</comment>
    <checkvariable name='xmas06' key='santa' value='lap' equals='xmas06.santa.2' not-equal='xmas06.santa.3'/>
   </event>

   <event num='2'>
    <comment>Already on the lap, so can&apos;t sit on it again</comment>
    <message type='single' where='com' who='individual' lo='xmas06.santa.8'/>
   </event>

   <event num='3'>
    <comment>Not already on the lap, so climb on!</comment>
    <message type='single' where='com' who='individual' lo='xmas06.santa.9'/>
    <message type='single' where='com' who='room_ex' lo='xmas06.santa.10'/>
    <setvariable name='xmas06' key='santa' value='lap' temporary='true'/>
   </event>

   <event num='4'>
    <comment>If not sitting on lap, can&apos;t do anything else</comment>
    <message type='single' where='com' who='individual' lo='xmas06.santa.1'/>
   </event>

   <event num='5'>
    <comment>Hug Santa - check if on the lap</comment>
    <checkvariable name='xmas06' key='santa' value='lap' equals='xmas06.santa.6' not-equal='xmas06.santa.4'/>
   </event>

   <event num='6'>
    <comment>Yes they are on Santa&apos;s lap so they can hug him</comment>
    <message type='single' where='com' who='individual' lo='xmas06.santa.2'/>
    <message type='single' where='com' who='room_ex' lo='xmas06.santa.3'/>
   </event>

   <event num='7'>
    <comment>Kiss Santa - check if on the lap</comment>
    <checkvariable name='xmas06' key='santa' value='lap' equals='xmas06.santa.8' not-equal='xmas06.santa.4'/>
   </event>

   <event num='8'>
    <comment>Yes they are on Santa&apos;s lap so they can kiss him</comment>
    <message type='single' where='com' who='individual' lo='xmas06.santa.4'/>
    <message type='single' where='com' who='room_ex' lo='xmas06.santa.5'/>
   </event>

   <event num='9'>
    <comment>Grope Santa - check if on the lap</comment>
    <checkvariable name='xmas06' key='santa' value='lap' equals='xmas06.santa.10' not-equal='xmas06.santa.4'/>
   </event>

   <event num='10'>
    <comment>Yes they are on Santa&apos;s lap so they can grope him</comment>
    <message type='single' where='com' who='individual' lo='xmas06.santa.6'/>
    <message type='single' where='com' who='room_ex' lo='xmas06.santa.7'/>
    <clearvariable name='xmas06'/>
    <move what='player' who='individual' loc='71'/>
   </event>

   <event num='11'>
    <comment>Tug Santa&apos;s beard - check if on the lap</comment>
    <checkvariable name='xmas06' key='santa' value='lap' equals='xmas06.santa.12' not-equal='xmas06.santa.4'/>
   </event>

   <event num='12'>
    <comment>Yes they are on Santa&apos;s lap so they can kiss him</comment>
    <message type='single' where='com' who='individual' lo='xmas06.santa.11'/>
    <message type='single' where='com' who='room_ex' lo='xmas06.santa.12'/>
    <clearvariable name='xmas06'/>
   </event>

   <event num='13'>
    <comment>In room event for 71 and 72 to clear variables</comment>
    <clearvariable name='xmas06'/>
   </event>

   <event num='14'>
    <comment>Tickle Santa - check if on the lap</comment>
    <checkvariable name='xmas06' key='santa' value='lap' equals='xmas06.santa.15' not-equal='xmas06.santa.4'/>
   </event>

   <event num='15'>
    <comment>Yes they are on his lap so can tickle him</comment>
    <message type='single' where='com' who='individual' lo='xmas06.santa.13'/>
    <message type='single' where='com' who='room_ex' lo='xmas06.santa.14'/>
   </event>

  </section>

  <section name='santamove'>

   <event num='1'>
    <comment>Flip big red switch - check if player is staff</comment>
    <clearvariable name='xmas06'/>
    <checkflag who='individual' flag ='staff'  set='xmas06.santamove.3' unset='xmas06.santamove.2'/>
   </event>

   <event num='2'>
    <comment>Not staff</comment>
    <message type='single' where='com' who='individual' lo='xmas06.santamove.1'/>
   </event>

   <event num='3'>
    <comment>They are staff so check where Santa is now</comment>
    <checksize id-name='switch' value='100' more='xmas06.santamove.5' equal='xmas06.santamove.5' less='xmas06.santamove.4'/>
   </event>

   <event num='4'>
    <comment>Size is 50 - Santa is in the grotto so move him to storeroom</comment>
    <announce type='single' loc='72' lo='xmas06.santamove.2'/>
    <move what='object' id-name='xmassanta_st' loc='0'/>
    <move what='object' silent='true' id-name='xmasbeard_st' loc='0'/>
    <move what='object' silent='true' id-name='xmaslap_st' loc='0'/>
    <changesize id-name='switch' amount='50' change='add' max-size='200' destroy='yes'/>
   </event>

   <event num='5'>
    <comment>Size is 100 - Santa is in the storeroom so move him back to grotto</comment>
    <move what='object' id-name='xmassanta_st' loc='72'/>
    <move what='object' silent='true' id-name='xmasbeard_st' loc='72'/>
    <move what='object' silent='true' id-name='xmaslap_st' loc='72'/>
    <changesize id-name='switch' amount='-50' change='add' max-size='100' destroy='yes'/>
    <announce type='single' loc='72' lo='xmas06.santamove.3'/>
   </event>

  </section>

  <section name='santatalk'>

   <event num='1'>
    <comment>Talk to Santa - check if player is on his lap</comment>
    <checkvariable name='xmas06' key='santa' value='lap' equals='xmas06.santatalk.3' not-equal='xmas06.santatalk.2'/>
   </event>

   <event num='2'>
    <comment>Not on lap so can&apos;t talk to Santa</comment>
    <message type='single' where='com' who='individual' lo='xmas06.santatalk.1'/>
   </event>

   <event num='3'>
    <comment>Are on lap so can talk - Santa&apos;s magic words</comment>
    <match phrase='hello' id-name='xmassanta_st' lo='xmas06.santatalk.2'/>
    <match phrase='naughty' id-name='xmassanta_st' event='xmas06.santatalk.4'/>
    <match phrase='nice' id-name='xmassanta_st' event='xmas06.santatalk.5'/>
    <match phrase='present' id-name='xmassanta_st' lo='xmas06.santatalk.5'/>
    <match phrase='toy' id-name='xmassanta_st' lo='xmas06.santatalk.6'/>
    <match phrase='xmas' id-name='xmassanta_st' lo='xmas06.santatalk.7'/>
    <match phrase='christmas' id-name='xmassanta_st' lo='xmas06.santatalk.7'/>
    <match phrase='housework' id-name='xmassanta_st' lo='xmas06.santatalk.9'/>
    <match phrase='laundry' id-name='xmassanta_st' lo='xmas06.santatalk.10'/>
    <match phrase='cooking' id-name='xmassanta_st' lo='xmas06.santatalk.11'/>
    <match phrase='security' id-name='xmassanta_st' lo='xmas06.santatalk.12'/>
    <match phrase='elves' id-name='xmassanta_st' lo='xmas06.santatalk.8'/>
    <match phrase='ghastly' id-name='xmassanta_st' lo='xmas06.santatalk.13' hi='xmas06.santatalk.15'/>
    <match phrase='business' id-name='xmassanta_st' lo='xmas06.santatalk.13' hi='xmas06.santatalk.15'/>
    <match phrase='mrs claus' id-name='xmassanta_st' lo='xmas06.santatalk.16'/>
    <match phrase='wife' id-name='xmassanta_st' lo='xmas06.santatalk.16'/>
    <match phrase='list' id-name='xmassanta_st' lo='xmas06.santatalk.16'/>
    <match phrase='grotto' id-name='xmassanta_st' lo='xmas06.santatalk.17'/>
    <match phrase='big night' id-name='xmassanta_st' lo='xmas06.santatalk.18' hi='xmas06.santatalk.20'/>
    <match phrase='deliver' id-name='xmassanta_st' lo='xmas06.santatalk.18' hi='xmas06.santatalk.20'/>
    <match phrase='reindeer' id-name='xmassanta_st' lo='xmas06.santatalk.21'/>
    <match phrase='donner' id-name='xmassanta_st' lo='xmas06.santatalk.22'/>
    <match phrase='rudolph' id-name='xmassanta_st' lo='xmas06.santatalk.23'/>
    <match phrase='olive' id-name='xmassanta_st' lo='xmas06.santatalk.24'/>
    <match phrase='milk' id-name='xmassanta_st' lo='xmas06.santatalk.25'/>
    <match phrase='cookies' id-name='xmassanta_st' lo='xmas06.santatalk.26'/>
    <match phrase='bye' id-name='xmassanta_st' event='xmas06.santatalk.6'/>
    <nomatch id-name='xmassanta_st' lo='xmas06.santatalk.28'/>
   </event>

   <event num='4'>
    <comment>Santa gives coal to naughty child</comment>
    <message type='single' where='com' who='individual' lo='xmas06.santatalk.3'/>
    <createobject where='inventory' home-map='sol/earth' id='xmascoal_ab'/>
   </event>

   <event num='5'>
    <comment>Santa gives cane to nice child</comment>
    <message type='single' where='com' who='individual' lo='xmas06.santatalk.4'/>
    <createobject where='inventory' home-map='sol/earth' id='xmascandycane_ab'/>
   </event>

   <event num='6'>
    <comment>Bye Santa</comment>
    <message type='single' where='com' who='individual' lo='xmas06.santatalk.27'/>
    <clearvariable name='xmas06'/>
   </event>

  </section>

  <section name='ship'>

   <event num='1'>
    <comment>Spin/use ship</comment>
    <message type='single' where='com' who='individual' lo='xmas06.ship.1'/>
    <message type='single' where='com' who='room_ex' lo='xmas06.ship.2'/>
   </event>

   <event num='2'>
    <comment>drop ship</comment>
    <message type='single' where='com' who='individual' lo='xmas06.ship.3'/>
    <message type='single' where='com' who='room_ex' lo='xmas06.ship.4'/>
    <destroyobject where='inventory' map='home' id-name='spaceship'/>
   </event>

  </section>

  <section name='sleigh'>

   <event num='1'>
    <comment>Sleigh ride - ENTER SLEIGH from location 71</comment>
    <freeze />
    <message type='single' where='com' who='individual' lo='xmas06.sleigh.1'/>
    <move what='player' who='individual' loc='73'/>
    <message type='single' where='com' who='individual' lo='xmas06.sleigh.2'/>
    <delayevent delay='15' event='xmas06.sleigh.2'/>
   </event>

   <event num='2'>
    <comment>Sleighride 1</comment>
    <message type='multi' where='com' who='individual' lo='xmas06.sleigh.3' hi='xmas06.sleigh.4'/>
    <delayevent delay='15' event='xmas06.sleigh.3'/>
   </event>

   <event num='3'>
    <comment>Sleighride 2</comment>
    <message type='single' where='com' who='individual' lo='xmas06.sleigh.5'/>
    <delayevent delay='15' event='xmas06.sleigh.4'/>
   </event>

   <event num='4'>
    <comment>Selighruide 3</comment>
    <message type='single' where='com' who='individual' lo='xmas06.sleigh.6'/>
    <delayevent delay='15' event='xmas06.sleigh.5'/>
   </event>

   <event num='5'>
    <comment>Sleighride 4</comment>
    <message type='single' where='com' who='individual' lo='xmas06.sleigh.7'/>
    <delayevent delay='15' event='xmas06.sleigh.6'/>
   </event>

   <event num='6'>
    <comment>Sleighride 5</comment>
    <message type='single' where='com' who='individual' lo='xmas06.sleigh.8'/>
    <delayevent delay='15' event='xmas06.sleigh.7'/>
   </event>

   <event num='7'>
    <comment>Sleighride 6 - landing</comment>
    <message type='multi' where='com' who='individual' lo='xmas06.sleigh.9' hi='xmas06.sleigh.11'/>
    <move what='player' who='individual' loc='71'/>
    <release />
   </event>

   <event num='8'>
    <comment>Examine sleigh</comment>
    <message type='multi' where='com' who='individual' lo='xmas06.sleigh.12' hi='xmas06.sleigh.13'/>
   </event>

  </section>

  <section name='slinky'>

   <event num='1'>
    <comment>Spin/use slinky</comment>
    <message type='single' where='com' who='individual' lo='xmas06.slinky.1'/>
    <message type='single' where='com' who='room_ex' lo='xmas06.slinky.2'/>
   </event>

   <event num='2'>
    <comment>drop slinky</comment>
    <message type='single' where='com' who='individual' lo='xmas06.slinky.3'/>
    <message type='single' where='com' who='room_ex' lo='xmas06.slinky.4'/>
    <destroyobject where='inventory' map='home' id-name='slinky'/>
   </event>

  </section>

  <section name='top'>

   <event num='1'>
    <comment>Spin/use top</comment>
    <message type='single' where='com' who='individual' lo='xmas06.top.1'/>
    <message type='single' where='com' who='room_ex' lo='xmas06.top.2'/>
   </event>

   <event num='2'>
    <comment>drop top</comment>
    <message type='single' where='com' who='individual' lo='xmas06.top.3'/>
    <message type='single' where='com' who='room_ex' lo='xmas06.top.4'/>
    <destroyobject where='inventory' map='home' id-name='top'/>
   </event>

  </section>

  <section name='tub'>

   <event num='1'>
    <comment>Get lucky dip tub</comment>
    <message type='single' where='com' who='individual' lo='xmas06.tub.1'/>
   </event>

   <event num='2'>
    <comment>Put hand into tub</comment>
    <message type='single' where='com' who='individual' lo='xmas06.tub.2'/>
    <call event='xmas06.tub.random[3-8]'/>
   </event>

   <event num='3'>
    <comment>Create toy number 1 - yoyo</comment>
    <createobject where='inventory' home-map='sol/earth' id='xmastoyyoyo_ab'/>
   </event>

   <event num='4'>
    <comment>Create toy number 2 - top</comment>
    <createobject where='inventory' home-map='sol/earth' id='xmastoytop_ab'/>
   </event>

   <event num='5'>
    <comment>Create toy number 3 - box</comment>
    <createobject where='inventory' home-map='sol/earth' id='xmastoybox_ab'/>
   </event>

   <event num='6'>
    <comment>Create toy number 4 - spaceship</comment>
    <createobject where='inventory' home-map='sol/earth' id='xmastoyship_ab'/>
   </event>

   <event num='7'>
    <comment>Create toy number 5 - slinky</comment>
    <createobject where='inventory' home-map='sol/earth' id='xmastoyslinky_ab'/>
   </event>

   <event num='8'>
    <comment>Create toy number 6 - check gender before creating doll</comment>
    <checkgender male='xmas06.tub.9' female='xmas06.tub.10' neuter='xmas06.tub.11'/>
   </event>

   <event num='9'>
    <comment>Create male doll</comment>
    <createobject where='inventory' home-map='sol/earth' id='xmastoydollmale_ab'/>
   </event>

   <event num='10'>
    <comment>Create female doll</comment>
    <createobject where='inventory' home-map='sol/earth' id='xmastoydollfemale_ab'/>
   </event>

   <event num='11'>
    <comment>Create neuter doll</comment>
    <createobject where='inventory' home-map='sol/earth' id='xmastoydollneuter_ab'/>
   </event>

  </section>

  <section name='yoyo'>

   <event num='1'>
    <comment>Spin/use yoyo</comment>
    <message type='single' where='com' who='individual' lo='xmas06.yoyo.1'/>
    <message type='single' where='com' who='room_ex' lo='xmas06.yoyo.2'/>
   </event>

   <event num='2'>
    <comment>drop yoyo</comment>
    <message type='single' where='com' who='individual' lo='xmas06.yoyo.3'/>
    <message type='single' where='com' who='room_ex' lo='xmas06.yoyo.4'/>
    <destroyobject where='inventory' map='home' id-name='yoyo'/>
   </event>

  </section>

 </category>

 <category name='xmas08'>

  <section name='fruitcake'>

   <event num='1'>
    <comment>Static fruitcake - kick</comment>
    <message type='single' where='com' who='individual' lo='xmas08.fruitcake.1'/>
    <message type='single' where='com' who='room_ex' lo='xmas08.fruitcake.2'/>
   </event>

   <event num='2'>
    <comment>Eat</comment>
    <message type='single' where='com' who='individual' lo='xmas08.fruitcake.3'/>
   </event>

   <event num='3'>
    <comment>Get - check if already got some</comment>
    <checkinventory map='home' id-name='fruitcake' found='xmas08.fruitcake.4' not-found='xmas08.fruitcake.5'/>
   </event>

   <event num='4'>
    <comment>Already got some</comment>
    <message type='single' where='com' who='individual' lo='xmas08.fruitcake.4'/>
   </event>

   <event num='5'>
    <comment>Not got some, so give the player some cake</comment>
    <message type='single' where='com' who='individual' lo='xmas08.fruitcake.5'/>
    <message type='single' where='com' who='room_ex' lo='xmas08.fruitcake.6'/>
    <createobject where='inventory' home-map='home' id='obj_cake'/>
   </event>

   <event num='6'>
    <comment>Abstract cake - eat</comment>
    <message type='single' where='com' who='individual' lo='xmas08.fruitcake.7'/>
    <message type='single' where='com' who='room_ex' lo='xmas08.fruitcake.8'/>
    <destroyobject where='inventory' map='home' id-name='fruitcake'/>
   </event>

   <event num='7'>
    <comment>Drop</comment>
    <message type='single' where='com' who='individual' lo='xmas08.fruitcake.9'/>
    <message type='single' where='com' who='room_ex' lo='xmas08.fruitcake.10'/>
    <destroyobject where='inventory' map='home' id-name='fruitcake'/>
   </event>

   <event num='8'>
    <comment>Throw - check if player is in a bar</comment>
    <checklocflag flag='bar'  set='xmas08.fruitcake.9' unset='xmas08.fruitcake.10'/>
   </event>

   <event num='9'>
    <comment>Yes, it&apos;s a bar</comment>
    <message type='single' where='com' who='individual' lo='xmas08.fruitcake.11'/>
    <message type='single' where='com' who='room_ex' lo='xmas08.fruitcake.12'/>
    <destroyobject where='inventory' map='home' id-name='fruitcake'/>
   </event>

   <event num='10'>
    <comment>Not a bar</comment>
    <message type='single' where='com' who='individual' lo='xmas08.fruitcake.13'/>
    <message type='single' where='com' who='room_ex' lo='xmas08.fruitcake.14'/>
    <destroyobject where='inventory' map='home' id-name='fruitcake'/>
   </event>

  </section>

  <section name='tree'>

   <event num='1'>
    <comment>get ornament</comment>
    <message type='single' where='com' who='individual' lo='xmas08.tree.1'/>
    <message type='single' where='com' who='room_ex' lo='xmas08.tree.2'/>
   </event>

   <event num='2'>
    <comment>Bella</comment>
    <message type='single' where='com' who='individual' lo='xmas08.tree.3'/>
   </event>

   <event num='3'>
    <comment>Cloudbase</comment>
    <message type='single' where='com' who='individual' lo='xmas08.tree.4'/>
   </event>

   <event num='4'>
    <comment>Jezz</comment>
    <message type='single' where='com' who='individual' lo='xmas08.tree.5'/>
   </event>

   <event num='5'>
    <comment>Fancy</comment>
    <message type='single' where='com' who='individual' lo='xmas08.tree.6'/>
   </event>

   <event num='6'>
    <comment>Tenabutter</comment>
    <message type='single' where='com' who='individual' lo='xmas08.tree.7'/>
   </event>

   <event num='7'>
    <comment>Pugwash</comment>
    <message type='single' where='com' who='individual' lo='xmas08.tree.8'/>
   </event>

  </section>

 </category>

 <category name='zoo'>

  <section name='camel'>

   <event num='1'>
    <comment>Pet camel</comment>
    <message type='single' where='com' who='individual' lo='zoo.camel.1'/>
   </event>

   <event num='2'>
    <comment>Get camel</comment>
    <message type='single' where='com' who='individual' lo='zoo.camel.2'/>
   </event>

   <event num='3'>
    <comment>Feed camel</comment>
    <checkinventory map='home' id-name='fodder' found='zoo.camel.4' not-found='zoo.fodder.4'/>
   </event>

   <event num='4'>
    <comment>Has food, so feed the camel</comment>
    <message type='single' where='com' who='individual' lo='zoo.camel.3'/>
    <destroyobject where='inventory' map='home' id-name='fodder'/>
   </event>

  </section>

  <section name='elephant'>

   <event num='1'>
    <comment>Pet elephant</comment>
    <message type='single' where='com' who='individual' lo='zoo.elephant.1'/>
   </event>

   <event num='2'>
    <comment>Get elephant</comment>
    <message type='single' where='com' who='individual' lo='zoo.elephant.2'/>
   </event>

   <event num='3'>
    <comment>Ride elephant</comment>
    <message type='single' where='com' who='individual' lo='zoo.elephant.3'/>
   </event>

   <event num='4'>
    <comment>Feed elephant</comment>
    <checkinventory map='home' id-name='fodder' found='zoo.elephant.5' not-found='zoo.fodder.4'/>
   </event>

   <event num='5'>
    <comment>Have fodder - so feed elephant</comment>
    <message type='single' where='com' who='individual' lo='zoo.elephant.4'/>
    <destroyobject where='inventory' map='home' id-name='fodder'/>
   </event>

  </section>

  <section name='fodder'>

   <event num='1'>
    <comment>Drop fodder</comment>
    <message type='single' where='com' who='individual' lo='zoo.fodder.1'/>
    <destroyobject where='inventory' map='home' id-name='fodder'/>
   </event>

   <event num='2'>
    <comment>Use fodder</comment>
    <message type='single' where='com' who='individual' lo='zoo.fodder.2'/>
   </event>

   <event num='3'>
    <comment>Eat fodder</comment>
    <message type='single' where='com' who='individual' lo='zoo.fodder.3'/>
    <changestat who='individual' stamina='2' change='add' cur-max='current'/>
    <destroyobject where='inventory' map='home' id-name='fodder'/>
   </event>

   <event num='4'>
    <comment>No food so can&apos;t feed animals</comment>
    <message type='single' where='com' who='individual' lo='zoo.fodder.4'/>
   </event>

  </section>

  <section name='giraffe'>

   <event num='1'>
    <comment>Pet giraffe</comment>
    <message type='single' where='com' who='individual' lo='zoo.giraffe.1'/>
   </event>

   <event num='2'>
    <comment>Get giraffe</comment>
    <message type='single' where='com' who='individual' lo='zoo.giraffe.2'/>
   </event>

   <event num='3'>
    <comment>Feed giraffe</comment>
    <checkinventory map='home' id-name='fodder' found='zoo.giraffe.4' not-found='zoo.fodder.4'/>
   </event>

   <event num='4'>
    <comment>Has food, so feed the giraffe</comment>
    <message type='single' where='com' who='individual' lo='zoo.giraffe.3'/>
    <destroyobject where='inventory' map='home' id-name='fodder'/>
   </event>

  </section>

  <section name='grizzle'>

   <event num='1'>
    <comment>Get/Pet/Cuddle grizzle</comment>
    <message type='single' where='com' who='individual' lo='zoo.grizzle.1'/>
   </event>

   <event num='2'>
    <comment>Feed grizzle</comment>
    <checkinventory map='home' id-name='fodder' found='zoo.grizzle.3' not-found='zoo.fodder.4'/>
   </event>

   <event num='3'>
    <comment>Has fodder, so feed the grizzle</comment>
    <message type='single' where='com' who='individual' lo='zoo.grizzle.2'/>
    <destroyobject where='inventory' map='home' id-name='fodder'/>
   </event>

  </section>

  <section name='hippo'>

   <event num='1'>
    <comment>Pet hippo</comment>
    <message type='single' where='com' who='individual' lo='zoo.hippo.1'/>
   </event>

   <event num='2'>
    <comment>Get hippo</comment>
    <message type='single' where='com' who='individual' lo='zoo.hippo.2'/>
   </event>

   <event num='3'>
    <comment>Feed hippo</comment>
    <checkinventory map='home' id-name='fodder' found='zoo.hippo.4' not-found='zoo.fodder.4'/>
   </event>

   <event num='4'>
    <comment>Has food, so feed the hippo</comment>
    <message type='single' where='com' who='individual' lo='zoo.hippo.3'/>
    <destroyobject where='inventory' map='home' id-name='fodder'/>
   </event>

  </section>

  <section name='panda'>

   <event num='1'>
    <comment>Pet panda</comment>
    <message type='single' where='com' who='individual' lo='zoo.panda.1'/>
   </event>

   <event num='2'>
    <comment>Get panda</comment>
    <message type='single' where='com' who='individual' lo='zoo.panda.2'/>
   </event>

   <event num='3'>
    <comment>Feed panda</comment>
    <checkinventory map='home' id-name='fodder' found='zoo.panda.4' not-found='zoo.fodder.4'/>
   </event>

   <event num='4'>
    <comment>Has food, so feed the panda</comment>
    <message type='single' where='com' who='individual' lo='zoo.panda.3'/>
    <destroyobject where='inventory' map='home' id-name='fodder'/>
   </event>

  </section>

  <section name='vend'>

   <event num='1'>
    <comment>Buy animal food - loc 1172</comment>
    <checkstat who='individual' money='15' higher='zoo.vend.2' equals='zoo.vend.2' lower='zoo.vend.3'/>
   </event>

   <event num='2'>
    <comment>Buy the food</comment>
    <message type='single' where='com' who='individual' lo='zoo.vend.1'/>
    <changestat who='individual' money='-15' change='add' cur-max='current'/>
    <createobject where='inventory' home-map='sol/earth' id='obj_fodder'/>
   </event>

   <event num='3'>
    <comment>Not enough groats</comment>
    <message type='single' where='com' who='individual' lo='zoo.vend.2'/>
   </event>

  </section>

 </category>

</event-list>

